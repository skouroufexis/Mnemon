{"remainingRequest":"/Users/stavros/Documents/web/todo/node_modules/babel-loader/lib/index.js!/Users/stavros/Documents/web/todo/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/stavros/Documents/web/todo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/todo/src/components/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/todo/src/components/Main.vue","mtime":1705364585132},{"path":"/Users/stavros/Documents/web/todo/babel.config.js","mtime":1694974383124},{"path":"/Users/stavros/Documents/web/todo/node_modules/cache-loader/dist/cjs.js","mtime":1694974234613},{"path":"/Users/stavros/Documents/web/todo/node_modules/babel-loader/lib/index.js","mtime":1694974236369},{"path":"/Users/stavros/Documents/web/todo/node_modules/cache-loader/dist/cjs.js","mtime":1694974234613},{"path":"/Users/stavros/Documents/web/todo/node_modules/vue-loader/lib/index.js","mtime":1694974238803}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWU3dhdGNoZXMgZnJvbSAndnVlLXN3YXRjaGVzJzsKaW1wb3J0ICd2dWUtc3dhdGNoZXMvZGlzdC92dWUtc3dhdGNoZXMuY3NzJzsKaW1wb3J0IERhdGVQaWNrZXIgZnJvbSAndnVlMi1kYXRlcGlja2VyJzsKaW1wb3J0ICd2dWUyLWRhdGVwaWNrZXIvaW5kZXguY3NzJzsKaW1wb3J0IGRyYWdnYWJsZSBmcm9tICd2dWVkcmFnZ2FibGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01haW4nLAogIHByb3BzOiB7CiAgICB0aXRsZTogU3RyaW5nCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBWU3dhdGNoZXMsCiAgICBEYXRlUGlja2VyLAogICAgZHJhZ2dhYmxlCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkRGF0YSgpOwogICAgdGhpcy5sb2FkTm90aWZpY2F0aW9ucygpOwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wdGlvbjogMSwKICAgICAgbm90ZXM6IFtdLAogICAgICBub3Rlc05vTGFiZWw6IFtdLAogICAgICBlbmFibGVBZGQ6IGZhbHNlLAogICAgICBlbmFibGVkTGFiZWw6IGZhbHNlLAogICAgICBlbmFibGVkTm90aWZpY2F0aW9uOiBmYWxzZSwKICAgICAgY29sb3VyOiAnIzAwMDAwMCcsCiAgICAgIGxhYmVsVGV4dDogJycsCiAgICAgIGxhYmVsQ29sb3VyOiAnJywKICAgICAgbGFiZWxzOiBbXSwKICAgICAgc2VsZWN0ZWRMYWJlbDogJ0FsbCBub3RlcycsCiAgICAgIGlzTm90ZU9wdGlvbnM6IGZhbHNlLAogICAgICBub3RlSW5kZXg6ICcnLAogICAgICBub3RlSWQ6ICcnLAogICAgICBzZWxlY3RlZE5vdGU6IFtdLAogICAgICByZW1pbmRlckRhdGU6IG51bGwsCiAgICAgIHJlbWluZGVyVGltZTogbnVsbCwKICAgICAgZGlzcGxheURhdGVUaW1lOiAnJywKICAgICAgZGF0ZU51bGw6IGZhbHNlLAogICAgICB0aW1lTnVsbDogZmFsc2UsCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIGlzVGFnU2VhcmNoOiBmYWxzZSwKICAgICAgaXNBY3RpdmVSZW1pbmRlcjogZmFsc2UsCiAgICAgIGlzVXBjb21pbmdSZW1pbmRlcjogZmFsc2UsCiAgICAgIGFjdGl2ZVJlbWluZGVyczogMCwKICAgICAgdXBjb21pbmdSZW1pbmRlcnM6IDAsCiAgICAgIG5vdGlmaWNhdGlvbnM6IDAsCiAgICAgIGlzRHJhZ2dhYmxlOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldE9wdGlvbihuKSB7CiAgICAgIHRoaXMub3B0aW9uID0gbjsKICAgICAgdGhpcy5pc05vdGVPcHRpb25zID0gZmFsc2U7CiAgICAgIC8vc2hvdyBhbGwgbm90ZXMKICAgICAgaWYgKG4gPT0gMSkgewogICAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgICB0aGlzLmlzQWN0aXZlUmVtaW5kZXIgPSBmYWxzZTsKICAgICAgICB0aGlzLmlzVXBjb21pbmdSZW1pbmRlciA9IGZhbHNlOwogICAgICB9CiAgICAgIC8vc2hvdyBub3RlcyB3aXRoIHJlbWluZGVycwogICAgICBpZiAobiA9PSAyKSB7CiAgICAgICAgdGhpcy5sb2FkQWN0aXZlUmVtaW5kZXJzKCk7CiAgICAgICAgdGhpcy5pc0FjdGl2ZVJlbWluZGVyID0gdHJ1ZTsKICAgICAgICB0aGlzLmlzVGFnU2VhcmNoID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBhZGROZXcoKSB7CiAgICAgIHRoaXMuZW5hYmxlQWRkID0gdHJ1ZTsKICAgICAgdGhpcy5pc1RhZ1NlYXJjaCA9IGZhbHNlOwogICAgICB0aGlzLmlzTm90ZU9wdGlvbnMgPSBmYWxzZTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5uZXdOb3RlSW5wdXQuZm9jdXMoKTsKICAgICAgfSwgMjAwKTsKICAgIH0sCiAgICBjbG9zZUFkZCgpIHsKICAgICAgdGhpcy5lbmFibGVBZGQgPSBmYWxzZTsKICAgICAgdGhpcy5sYWJlbHMgPSBbXTsKICAgICAgdGhpcy5yZW1pbmRlckRhdGUgPSBudWxsOwogICAgICB0aGlzLnJlbWluZGVyVGltZSA9IG51bGw7CiAgICAgIHRoaXMudGltZU51bGwgPSBmYWxzZTsKICAgICAgdGhpcy5kYXRlTnVsbCA9IGZhbHNlOwogICAgICB0aGlzLmRpc3BsYXlEYXRlVGltZSA9ICcnOwogICAgfSwKICAgIHRvZ2dsZUxhYmVsKCkgewogICAgICB0aGlzLmVuYWJsZWRMYWJlbCA9ICF0aGlzLmVuYWJsZWRMYWJlbDsKICAgICAgaWYgKHRoaXMuZW5hYmxlZExhYmVsKSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRfbGFiZWwnKS5mb2N1cygpOwogICAgICAgIH0sIDEwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5lbmFibGVBZGQpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5uZXdOb3RlSW5wdXQuZm9jdXMoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9lZGl0JykuZm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9LCAxMDApOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlTm90aWZpY2F0aW9uKCkgewogICAgICB0aGlzLmVuYWJsZWROb3RpZmljYXRpb24gPSAhdGhpcy5lbmFibGVkTm90aWZpY2F0aW9uOwoKICAgICAgLy9jYW5jZWwgaXMgY2xpY2tlZAogICAgICBpZiAoIXRoaXMuZW5hYmxlZE5vdGlmaWNhdGlvbiAmJiB0aGlzLmRpc3BsYXlEYXRlVGltZSA9PSAnJykgewogICAgICAgIHRoaXMucmVtaW5kZXJEYXRlID0gbnVsbDsKICAgICAgICB0aGlzLnJlbWluZGVyVGltZSA9IG51bGw7CiAgICAgICAgdGhpcy50aW1lTnVsbCA9IGZhbHNlOwogICAgICAgIHRoaXMuZGF0ZU51bGwgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFkZExhYmVsKCkgewogICAgICB0aGlzLmxhYmVsVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9sYWJlbCcpLnZhbHVlLnRyaW0oKTsKICAgICAgdGhpcy5sYWJlbENvbG91ciA9IHRoaXMuY29sb3VyOwogICAgICAvLyBsZXQgbmV3TGFiZWw9e2xhYmVsVGV4dDpsYWJlbFRleHQsY29sb3VyOmxhYmVsQ29sb3VyfTsKCiAgICAgIC8vIGlmKGxhYmVsVGV4dC50cmltKCkhPScnKXsKICAgICAgLy8gICAgIHRoaXMubGFiZWxzLnB1c2gobmV3TGFiZWwpOwogICAgICAvLyAgICAgdGhpcy50b2dnbGVMYWJlbCgpOwogICAgICAvLyAgICAgfQoKICAgICAgaWYgKHRoaXMubGFiZWxUZXh0ICE9ICcnKSB7CiAgICAgICAgLy8gdGhpcy5sYWJlbHMuc3BsaWNlKDAsMSxuZXdMYWJlbCk7CiAgICAgICAgdGhpcy50b2dnbGVMYWJlbCgpOwogICAgICB9CiAgICB9LAogICAgYWRkUmVtaW5kZXIoKSB7CiAgICAgIC8vIHRoaXMudG9nZ2xlTm90aWZpY2F0aW9uKCk7ICAgICAgCiAgICAgIGlmICh0aGlzLnJlbWluZGVyRGF0ZSAhPSBudWxsICYmIHRoaXMucmVtaW5kZXJUaW1lICE9IG51bGwpIHsKICAgICAgICB0aGlzLmRhdGVOdWxsID0gZmFsc2U7CiAgICAgICAgdGhpcy50aW1lTnVsbCA9IGZhbHNlOwogICAgICAgIHRoaXMuZW5hYmxlZE5vdGlmaWNhdGlvbiA9ICF0aGlzLmVuYWJsZWROb3RpZmljYXRpb247CgogICAgICAgIC8vcmVmb3JtYXQgZGF0ZQogICAgICAgIGxldCBmRGF0ZSA9IHRoaXMucmVtaW5kZXJEYXRlLnRvRGF0ZVN0cmluZygpOwogICAgICAgIGZEYXRlID0gZkRhdGUuc3BsaXQoJyAnKTsKICAgICAgICBmRGF0ZSA9IGZEYXRlWzJdICsgJyAnICsgZkRhdGVbMV0gKyAnICcgKyBmRGF0ZVszXTsKICAgICAgICBsZXQgZGlzcGxheURhdGUgPSBmRGF0ZTsKCiAgICAgICAgLy9yZWZvcm1hdCB0aW1lICAgICAgICAKICAgICAgICBsZXQgZlRpbWUgPSB0aGlzLnJlbWluZGVyVGltZS50b1N0cmluZygpOwogICAgICAgIGZUaW1lID0gZlRpbWUuc3BsaXQoJyAnKTsKICAgICAgICBmVGltZSA9IGZUaW1lWzRdOwogICAgICAgIGZUaW1lID0gZlRpbWUuc3BsaXQoJzonKTsKICAgICAgICBmVGltZSA9IGZUaW1lWzBdICsgJzonICsgZlRpbWVbMV07CiAgICAgICAgbGV0IGRpc3BsYXlUaW1lID0gZlRpbWU7CiAgICAgICAgdGhpcy5kaXNwbGF5RGF0ZVRpbWUgPSBkaXNwbGF5RGF0ZSArICcgJyArIGRpc3BsYXlUaW1lOwogICAgICB9CiAgICAgIGlmICh0aGlzLnJlbWluZGVyRGF0ZSA9PSBudWxsKSB7CiAgICAgICAgdGhpcy5kYXRlTnVsbCA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucmVtaW5kZXJUaW1lID09IG51bGwpIHsKICAgICAgICB0aGlzLnRpbWVOdWxsID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIHNhdmVOZXcoKSB7CiAgICAgIGxldCBuZXdOb3RlVGV4dCA9IHRoaXMuJHJlZnMubmV3Tm90ZUlucHV0LnZhbHVlOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmxhYmVscyk7CiAgICAgIGxldCBuZXdOb3RlOwogICAgICBuZXdOb3RlID0gewogICAgICAgIHRleHQ6IG5ld05vdGVUZXh0LAogICAgICAgIHJlbWluZGVyRGF0ZTogdGhpcy5yZW1pbmRlckRhdGUsCiAgICAgICAgcmVtaW5kZXJUaW1lOiB0aGlzLnJlbWluZGVyVGltZSwKICAgICAgICBkaXNwbGF5RGF0ZVRpbWU6IHRoaXMuZGlzcGxheURhdGVUaW1lLAogICAgICAgIGxhYmVsVGV4dDogdGhpcy5sYWJlbFRleHQsCiAgICAgICAgbGFiZWxDb2xvdXI6IHRoaXMubGFiZWxDb2xvdXIsCiAgICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlCiAgICAgIH07CiAgICAgIGxldCBzZWxmID0gdGhpczsKCiAgICAgIC8vaW5kZXhlZERCCiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fCB3aW5kb3cud2Via2l0SW5kZXhlZERCIHx8IHdpbmRvdy5tc0luZGV4ZWREQiB8fCB3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgY29uc29sZS5sb2coaW5kZXhlZERCKTsKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCd0b2RvRGF0YWJhc2UnLCAxKTsKCiAgICAgIC8vb25lcnJvcgogICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zb2xlLmxvZyhldmVudCk7CiAgICAgIH07CgogICAgICAvL29udXBncmFkZW5lZWRlZAogICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGxldCBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgbGV0IG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoJ25vdGVzJywgewogICAgICAgICAga2V5UGF0aDogImlkIiwKICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsICdub3RlLmxhYmVsVGV4dCcsIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbm90ZUluZGV4JywgWydub3RlLnRleHQnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdkYXRlSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJEYXRlJ10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JywgWydub3RlLnJlbWluZGVyVGltZSddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coIk9iamVjdCBzdG9yZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4uLiIpOwogICAgICB9OwoKICAgICAgLy9vbnN1Y2Nlc3MKICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIGNvbnNvbGUubG9nKGRiKTsKICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiLCAicmVhZHdyaXRlIik7CiAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoIm5vdGVzIik7CiAgICAgICAgaWYgKG5ld05vdGVUZXh0LnRyaW0oKSAhPSAnJykgewogICAgICAgICAgb2JqZWN0U3RvcmUuYWRkKHsKICAgICAgICAgICAgbm90ZTogbmV3Tm90ZQogICAgICAgICAgfSk7CiAgICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgICAgc2VsZi5lbmFibGVBZGQgPSBmYWxzZTsKICAgICAgICAgIHNlbGYubGFiZWxUZXh0ID0gJycsIHNlbGYubGFiZWxDb2xvdXIgPSAnJzsKICAgICAgICAgIHNlbGYucmVtaW5kZXJEYXRlID0gbnVsbDsKICAgICAgICAgIHNlbGYucmVtaW5kZXJUaW1lID0gbnVsbDsKICAgICAgICAgIHNlbGYuZGlzcGxheURhdGVUaW1lID0gJyc7CiAgICAgICAgfQogICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzZWxmLmxhYmVscyA9IFtdOwogICAgICAgICAgc2VsZi5zZWxlY3RlZExhYmVsID0gJ0FsbCBub3Rlcyc7CiAgICAgICAgICBzZWxmLmxvYWREYXRhKCk7CiAgICAgICAgICBzZWxmLmxvYWROb3RpZmljYXRpb25zKCk7CiAgICAgICAgfTsKICAgICAgfTsKICAgIH0sCiAgICB0b2dnbGVOb3RlT3B0aW9ucyhuLCBpZCkgewogICAgICB0aGlzLnNlbGVjdGVkTm90ZSA9IFtdOwogICAgICAvL2dldCBzZWxlY3RlZCBub3RlJ3MgaWQKICAgICAgdGhpcy5ub3RlSWQgPSBpZDsKCiAgICAgIC8vc2V0IGdldCBzZWxlY3RlZCBub3RlCiAgICAgIGZvciAobGV0IG4gb2YgdGhpcy5ub3RlcykgewogICAgICAgIGNvbnNvbGUubG9nKG4uaWQpOwogICAgICAgIGlmIChuLmlkID09IGlkKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkTm90ZS5wdXNoKG4pOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zb2xlLmxvZyh0aGlzLm5vdGVzKTsKICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZE5vdGUpOwogICAgICB0aGlzLm5vdGVJbmRleCA9IG47CiAgICAgIHRoaXMuaXNOb3RlT3B0aW9ucyA9ICF0aGlzLmlzTm90ZU9wdGlvbnM7CiAgICB9LAogICAgZGVsZXRlTm90ZShpZCwgY29tcGxldGUpIHsKICAgICAgLy8gIHRoaXMubm90ZXMuc3BsaWNlKG4sMSk7CiAgICAgIC8vICB0aGlzLmlzTm90ZU9wdGlvbnM9IXRoaXMuaXNOb3RlT3B0aW9uczsKCiAgICAgIC8vZGVsZXRlIG5vdGUgZnJvbSBkYgoKICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICBjb25zdCBpbmRleGVkREIgPSB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy5tb3pJbmRleGVkREIgfHwgd2luZG93LndlYmtpdEluZGV4ZWREQiB8fCB3aW5kb3cubXNJbmRleGVkREIgfHwgd2luZG93LnNoaW1JbmRleGVkREI7CiAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigidG9kb0RhdGFiYXNlIiwgMSk7CiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygicmVxdWVzdCBlcnJvciBkZWxldGVOb3RlIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLCB7CiAgICAgICAgICBrZXlQYXRoOiAiaWQiLAogICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JywgJ25vdGUubGFiZWxUZXh0JywgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLCBbJ25vdGUudGV4dCddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsIFsnbm90ZS5yZW1pbmRlckRhdGUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJUaW1lJ10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiT2JqZWN0IHN0b3JlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5Li4uIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbignbm90ZXMnLCAncmVhZHdyaXRlJyk7CiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKICAgICAgICBjb25zdCBkZWxldGVOb3RlID0gb2JqZWN0U3RvcmUuZGVsZXRlKGlkKTsKICAgICAgICBkZWxldGVOb3RlLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdub3RlIGlkOiAnICsgaWQgKyAnIGRlbGV0ZWQnKTsKICAgICAgICB9OwogICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoc2VsZi5vcHRpb24gPT0gMSkgewogICAgICAgICAgICBpZiAoc2VsZi5pc1RhZ1NlYXJjaCkgewogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRMYWJlbCA9ICdBbGwgbm90ZXMnOwogICAgICAgICAgICAgIHNlbGYubG9hZFRhZ3MoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzZWxmLmxvYWREYXRhKCk7CiAgICAgICAgICAgICAgc2VsZi5sYWJlbHMgPSBbXTsKICAgICAgICAgICAgICBzZWxmLnJlbWluZGVyID0gW107CiAgICAgICAgICAgICAgc2VsZi5yZW1pbmRlckRhdGUgPSBudWxsOwogICAgICAgICAgICAgIHNlbGYucmVtaW5kZXJUaW1lID0gbnVsbDsKICAgICAgICAgICAgICBzZWxmLmRpc3BsYXlEYXRlVGltZSA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYub3B0aW9uID09IDIpIHsKICAgICAgICAgICAgaWYgKHNlbGYuaXNBY3RpdmVSZW1pbmRlcikgewogICAgICAgICAgICAgIHNlbGYubG9hZEFjdGl2ZVJlbWluZGVycygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNlbGYubG9hZFVwY29taW5nUmVtaW5kZXJzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChjb21wbGV0ZSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuaXNOb3RlT3B0aW9ucyA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VsZi5pc05vdGVPcHRpb25zID0gIXNlbGYuaXNOb3RlT3B0aW9uczsKICAgICAgICAgIH0KICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgICBzZWxmLmxvYWROb3RpZmljYXRpb25zKCk7CiAgICAgICAgfTsKICAgICAgfTsKICAgIH0sCiAgICB0b2dnbGVFZGl0KCkgewogICAgICB0aGlzLmlzRWRpdCA9ICF0aGlzLmlzRWRpdDsKICAgICAgdGhpcy5pc05vdGVPcHRpb25zID0gIXRoaXMuaXNOb3RlT3B0aW9uczsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRfZWRpdCcpLmZvY3VzKCk7CiAgICAgICAgICB0aGlzLmxhYmVsVGV4dCA9IHRoaXMubm90ZXNbdGhpcy5ub3RlSW5kZXhdLmxhYmVsVGV4dDsKICAgICAgICAgIHRoaXMubGFiZWxDb2xvdXIgPSB0aGlzLm5vdGVzW3RoaXMubm90ZUluZGV4XS5sYWJlbENvbG91cjsKICAgICAgICAgIHRoaXMucmVtaW5kZXJEYXRlID0gbnVsbDsKICAgICAgICAgIHRoaXMucmVtaW5kZXJUaW1lID0gbnVsbDsKICAgICAgICAgIHRoaXMucmVtaW5kZXJEYXRlID0gdGhpcy5ub3Rlc1t0aGlzLm5vdGVJbmRleF0ucmVtaW5kZXJEYXRlOwogICAgICAgICAgdGhpcy5yZW1pbmRlclRpbWUgPSB0aGlzLm5vdGVzW3RoaXMubm90ZUluZGV4XS5yZW1pbmRlclRpbWU7CiAgICAgICAgICB0aGlzLmRpc3BsYXlEYXRlVGltZSA9IHRoaXMubm90ZXNbdGhpcy5ub3RlSW5kZXhdLmRpc3BsYXlEYXRlVGltZTsKICAgICAgICB9CiAgICAgIH0sIDEwMCk7CiAgICB9LAogICAgc2F2ZUVkaXQoKSB7CiAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRfZWRpdCcpLnZhbHVlLnRyaW0oKSAhPSAnJykgewogICAgICAgIC8vdXBkYXRlZCBmaWVsZCB2YWx1ZXMKICAgICAgICBsZXQgdGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9lZGl0JykudmFsdWUudHJpbSgpOwogICAgICAgIGxldCBsYWJlbFRleHQgPSB0aGlzLmxhYmVsVGV4dDsKICAgICAgICBsZXQgbGFiZWxDb2xvdXIgPSB0aGlzLmxhYmVsQ29sb3VyOwogICAgICAgIGxldCByZW1pbmRlckRhdGUgPSB0aGlzLnJlbWluZGVyRGF0ZTsKICAgICAgICBsZXQgcmVtaW5kZXJUaW1lID0gdGhpcy5yZW1pbmRlclRpbWU7CiAgICAgICAgbGV0IGRpc3BsYXlEYXRlVGltZSA9IHRoaXMuZGlzcGxheURhdGVUaW1lOwoKICAgICAgICAvL3NhdmUgY2hhbmdlcyB0byBpbmRleGVkREIKICAgICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8IHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHwgd2luZG93Lm1zSW5kZXhlZERCIHx8IHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigidG9kb0RhdGFiYXNlIiwgMSk7CiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coInJlcXVlc3QgZXJyb3IgLSBzYXZlRWRpdCIpOwogICAgICAgIH07CiAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLCB7CiAgICAgICAgICAgIGtleVBhdGg6ICJpZCIsCiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2xhYmVsSW5kZXgnLCBbJ25vdGUubGFiZWxUZXh0J10sIHsKICAgICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbm90ZUluZGV4JywgWydub3RlLnRleHQnXSwgewogICAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdkYXRlSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJEYXRlJ10sIHsKICAgICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JywgWydub3RlLnJlbWluZGVyVGltZSddLCB7CiAgICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2coIk9iamVjdCBzdG9yZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4uLiIpOwogICAgICAgIH07CiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiLCAicmVhZHdyaXRlIik7CiAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwoKICAgICAgICAgIC8vZ2V0IHJlY29yZCB0byBtb2RpZnkKICAgICAgICAgIGNvbnN0IHJlY29yZFJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXQoc2VsZi5ub3RlSWQpOwogICAgICAgICAgcmVjb3JkUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCByZWNvcmQgPSByZWNvcmRSZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVjb3JkKTsKICAgICAgICAgICAgcmVjb3JkLm5vdGUudGV4dCA9IHRleHQ7CiAgICAgICAgICAgIHJlY29yZC5ub3RlLnJlbWluZGVyRGF0ZSA9IHJlbWluZGVyRGF0ZTsKICAgICAgICAgICAgcmVjb3JkLm5vdGUucmVtaW5kZXJUaW1lID0gcmVtaW5kZXJUaW1lOwogICAgICAgICAgICByZWNvcmQubm90ZS5kaXNwbGF5RGF0ZVRpbWUgPSBkaXNwbGF5RGF0ZVRpbWU7CiAgICAgICAgICAgIHJlY29yZC5ub3RlLmxhYmVsVGV4dCA9IGxhYmVsVGV4dDsKICAgICAgICAgICAgcmVjb3JkLm5vdGUubGFiZWxDb2xvdXIgPSBsYWJlbENvbG91cjsKICAgICAgICAgICAgcmVjb3JkLm5vdGUuaXNDb21wbGV0ZWQgPSBmYWxzZTsKCiAgICAgICAgICAgIC8vc2F2ZSBuZXcgdmFsdWVzIHRvIGluZGV4ZWREQgogICAgICAgICAgICBjb25zdCB1cGRhdGVSZXF1ZXN0ID0gb2JqZWN0U3RvcmUucHV0KHJlY29yZCk7CiAgICAgICAgICAgIHVwZGF0ZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWNvcmQgdXBkYXRlZCcpOwogICAgICAgICAgICB9OwogICAgICAgICAgfTsKICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHNlbGYubGFiZWxUZXh0ID0gJyc7CiAgICAgICAgICAgIHNlbGYubGFiZWxDb2xvdXIgPSAnJzsKICAgICAgICAgICAgc2VsZi5yZW1pbmRlckRhdGUgPSBudWxsOwogICAgICAgICAgICBzZWxmLnJlbWluZGVyVGltZSA9IG51bGw7CiAgICAgICAgICAgIHNlbGYuZGlzcGxheURhdGVUaW1lID0gJyc7CgogICAgICAgICAgICAvL3Nob3cgYWxsIG5vdGVzIChmaWx0ZXJlZCBieSB0YWcgb3Igbm90KQogICAgICAgICAgICBpZiAoc2VsZi5vcHRpb24gPT0gMSkgewogICAgICAgICAgICAgIGlmIChzZWxmLmlzVGFnU2VhcmNoKSB7CiAgICAgICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZExhYmVsICE9ICdBbGwgbm90ZXMnKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRMYWJlbCA9IGxhYmVsVGV4dDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNlbGYubG9hZFRhZ3MoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2VsZi5sb2FkRGF0YSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL3Nob3cgbm90ZXMgd2l0aCByZW1pbmRlcnMKICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5vcHRpb24gPT0gMikgewogICAgICAgICAgICAgIGlmIChzZWxmLmlzQWN0aXZlUmVtaW5kZXIpIHsKICAgICAgICAgICAgICAgIHNlbGYubG9hZEFjdGl2ZVJlbWluZGVycygpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZWxmLmxvYWRVcGNvbWluZ1JlbWluZGVycygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxmLmxvYWROb3RpZmljYXRpb25zKCk7CiAgICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgICB9OwogICAgICAgIH07CiAgICAgIH0KICAgICAgdGhpcy5pc0VkaXQgPSAhdGhpcy5pc0VkaXQ7CiAgICB9LAogICAgZGVsZXRlTGFiZWwoKSB7CiAgICAgIHRoaXMubGFiZWxUZXh0ID0gJyc7CiAgICAgIHRoaXMubGFiZWxDb2xvdXIgPSAnJzsKICAgIH0sCiAgICBkZWxldGVSZW1pbmRlcigpIHsKICAgICAgdGhpcy5yZW1pbmRlckRhdGUgPSBudWxsOwogICAgICB0aGlzLnJlbWluZGVyVGltZSA9IG51bGw7CiAgICAgIHRoaXMuZGlzcGxheURhdGVUaW1lID0gJyc7CiAgICAgIGlmICh0aGlzLm5vdGVzICE9ICcnKSB7CiAgICAgICAgdGhpcy5ub3Rlc1t0aGlzLm5vdGVJbmRleF0ucmVtaW5kZXIucmVtaW5kZXJEYXRlID0gbnVsbDsKICAgICAgICB0aGlzLm5vdGVzW3RoaXMubm90ZUluZGV4XS5yZW1pbmRlci5yZW1pbmRlclRpbWUgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlVGltZVBhbmVsKCkgewogICAgICB0aGlzLnNob3dUaW1lUGFuZWwgPSAhdGhpcy5zaG93VGltZVBhbmVsOwogICAgfSwKICAgIGxvYWREYXRhKCkgewogICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fCB3aW5kb3cud2Via2l0SW5kZXhlZERCIHx8IHdpbmRvdy5tc0luZGV4ZWREQiB8fCB3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLCAxKTsKICAgICAgbGV0IGZvdW5kTm90ZXMgPSBbXTsKICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJkYXRhYmFzZSB0ZXN0IGNyZWF0aW9uIGVycm9yIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLCB7CiAgICAgICAgICBrZXlQYXRoOiAiaWQiLAogICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JywgJ25vdGUubGFiZWxUZXh0JywgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLCBbJ25vdGUudGV4dCddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsIFsnbm90ZS5yZW1pbmRlckRhdGUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJUaW1lJ10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiT2JqZWN0IHN0b3JlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5Li4uIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiKTsKICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwoKICAgICAgICAvLyByZWFkIHRocm91Z2ggdGFibGUKICAgICAgICBvYmplY3RTdG9yZS5vcGVuQ3Vyc29yKCkub25zdWNjZXNzID0gZXZlbnQgPT4gewogICAgICAgICAgdmFyIGN1cnNvciA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICBpZiAoY3Vyc29yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpcyBjdXJzb3InKTsKICAgICAgICAgICAgbGV0IHJlY29yZDsKICAgICAgICAgICAgcmVjb3JkID0gewogICAgICAgICAgICAgIGlkOiBjdXJzb3IudmFsdWUuaWQsCiAgICAgICAgICAgICAgdGV4dDogY3Vyc29yLnZhbHVlLm5vdGUudGV4dCwKICAgICAgICAgICAgICBsYWJlbFRleHQ6IGN1cnNvci52YWx1ZS5ub3RlLmxhYmVsVGV4dCwKICAgICAgICAgICAgICBsYWJlbENvbG91cjogY3Vyc29yLnZhbHVlLm5vdGUubGFiZWxDb2xvdXIsCiAgICAgICAgICAgICAgcmVtaW5kZXJEYXRlOiBjdXJzb3IudmFsdWUubm90ZS5yZW1pbmRlckRhdGUsCiAgICAgICAgICAgICAgcmVtaW5kZXJUaW1lOiBjdXJzb3IudmFsdWUubm90ZS5yZW1pbmRlclRpbWUsCiAgICAgICAgICAgICAgZGlzcGxheURhdGVUaW1lOiBjdXJzb3IudmFsdWUubm90ZS5kaXNwbGF5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgaXNDb21wbGV0ZWQ6IGN1cnNvci52YWx1ZS5ub3RlLmlzQ29tcGxldGVkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlY29yZCk7CiAgICAgICAgICAgIGZvdW5kTm90ZXMucHVzaChyZWNvcmQpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJzb3IudmFsdWUpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiaWQ6ICIgKyBjdXJzb3IudmFsdWUuaWQpOwogICAgICAgICAgICBjb25zb2xlLmxvZygidGV4dDogIiArIGN1cnNvci52YWx1ZS5ub3RlLnRleHQpOwogICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmQgb2YgdGFibGUnKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhmb3VuZE5vdGVzKTsKICAgICAgICAgIHNlbGYubm90ZXMgPSBbXTsKICAgICAgICAgIGZvciAobGV0IG4gb2YgZm91bmROb3RlcykgewogICAgICAgICAgICBzZWxmLm5vdGVzLnB1c2gobik7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLm5vdGVzKTsKICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgfTsKICAgICAgfTsKICAgIH0sCiAgICBkZWxldGVEQigpIHsKICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8IHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHwgd2luZG93Lm1zSW5kZXhlZERCIHx8IHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoInRvZG9EYXRhYmFzZSIpOwogICAgfSwKICAgIHJlc29ydCgpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICB0aGlzLmRlbGV0ZURCKCk7CiAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigidG9kb0RhdGFiYXNlIiwgMSk7CiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgbGV0IGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICBsZXQgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgnbm90ZXMnLCB7CiAgICAgICAgICBrZXlQYXRoOiAiaWQiLAogICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JywgWydub3RlLmxhYmVsVGV4dCddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsIFsnbm90ZS50ZXh0J10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JywgWydub3RlLnJlbWluZGVyRGF0ZSddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVJbmRleCcsIFsnbm90ZS5yZW1pbmRlclRpbWUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgfTsKICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCJub3RlcyIsICJyZWFkd3JpdGUiKTsKICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwogICAgICAgIGNvbnNvbGUubG9nKG9iamVjdFN0b3JlKTsKICAgICAgICBzZWxmLm5vdGVzLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIGxldCBuZXdOb3RlID0gewogICAgICAgICAgICB0ZXh0OiBuLnRleHQsCiAgICAgICAgICAgIGxhYmVsVGV4dDogbi5sYWJlbFRleHQsCiAgICAgICAgICAgIGxhYmVsQ29sb3VyOiBuLmxhYmVsQ29sb3VyLAogICAgICAgICAgICByZW1pbmRlckRhdGU6IG4ucmVtaW5kZXJEYXRlLAogICAgICAgICAgICByZW1pbmRlclRpbWU6IG4ucmVtaW5kZXJUaW1lLAogICAgICAgICAgICBkaXNwbGF5RGF0ZVRpbWU6IG4uZGlzcGxheURhdGVUaW1lLAogICAgICAgICAgICBpc0NvbXBsZXRlZDogbi5pc0NvbXBsZXRlZAogICAgICAgICAgfTsKICAgICAgICAgIG9iamVjdFN0b3JlLmFkZCh7CiAgICAgICAgICAgIG5vdGU6IG5ld05vdGUKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2cobi50ZXh0ICsgJy0nICsgbi5pZCk7CiAgICAgICAgICAvLyBvYmplY3RTdG9yZS5wdXQoe2lkOiBuLCBuYW1lOiAiZGVldmFuYSIsYnJhbmNoOiAiQ1NFIn0pOwogICAgICAgIH0pOwoKICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coJ3Jlc29ydGluZyB1cGRhdGVkJyk7CiAgICAgICAgICBzZWxmLmxvYWREYXRhKCk7CiAgICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgIH07CiAgICAgIH07CiAgICB9LAogICAgdG9nZ2xlVGFnU2VhcmNoKCkgewogICAgICB0aGlzLmlzVGFnU2VhcmNoID0gIXRoaXMuaXNUYWdTZWFyY2g7CiAgICAgIHRoaXMuZW5hYmxlQWRkID0gZmFsc2U7CiAgICAgIHRoaXMuaXNOb3RlT3B0aW9ucyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5pc1RhZ1NlYXJjaCkgewogICAgICAgIHRoaXMubG9hZFRhZ3MoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVubG9hZFRhZ3MoKTsKICAgICAgfQogICAgfSwKICAgIGxvYWRMYWJlbHMoKSB7CiAgICAgIC8vcG9wdWxhdGUgbGFiZWxzW10gd2l0aCBsYWJlbFRleHQgdmFsdWVzCgogICAgICB0aGlzLmxhYmVscyA9IFtdOwogICAgICB0aGlzLmxhYmVscy5wdXNoKCdBbGwgbm90ZXMnKTsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICBjb25zdCBpbmRleGVkREIgPSB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy5tb3pJbmRleGVkREIgfHwgd2luZG93LndlYmtpdEluZGV4ZWREQiB8fCB3aW5kb3cubXNJbmRleGVkREIgfHwgd2luZG93LnNoaW1JbmRleGVkREI7CiAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigidG9kb0RhdGFiYXNlIiwgMSk7CiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygiZGF0YWJhc2UgdGVzdCBjcmVhdGlvbiBlcnJvciIpOwogICAgICB9OwogICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoIm5vdGVzIiwgewogICAgICAgICAga2V5UGF0aDogImlkIiwKICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsICdub3RlLmxhYmVsVGV4dCcsIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbm90ZUluZGV4JywgWydub3RlLnRleHQnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdkYXRlSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJEYXRlJ10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JywgWydub3RlLnJlbWluZGVyVGltZSddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coIk9iamVjdCBzdG9yZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4uLiIpOwogICAgICB9OwogICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oIm5vdGVzIik7CiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKICAgICAgICBsZXQgbGFiZWxJbmRleCA9IG9iamVjdFN0b3JlLmluZGV4KCJsYWJlbEluZGV4Iik7CiAgICAgICAgbGV0IHJlcXVlc3QgPSBsYWJlbEluZGV4LmdldEFsbCgpOwogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3QucmVzdWx0KTsKICAgICAgICAgIGxldCByZXN1bHRzID0gcmVxdWVzdC5yZXN1bHQ7CiAgICAgICAgICBmb3IgKGxldCByIG9mIHJlc3VsdHMpIHsKICAgICAgICAgICAgbGV0IGV4aXN0cyA9IGZhbHNlOwogICAgICAgICAgICBzZWxmLmxhYmVscy5mb3JFYWNoKGwgPT4gewogICAgICAgICAgICAgIGlmIChyLm5vdGUubGFiZWxUZXh0ID09IGwpIHsKICAgICAgICAgICAgICAgIGV4aXN0cyA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGV4aXN0cyA9PSBmYWxzZSkgewogICAgICAgICAgICAgIHNlbGYubGFiZWxzLnB1c2goci5ub3RlLmxhYmVsVGV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgIH07CiAgICAgIH07CiAgICB9LAogICAgbG9hZFRhZ3MoKSB7CiAgICAgIHRoaXMuZW5hYmxlQWRkID0gZmFsc2U7CiAgICAgIHRoaXMubm90ZXMgPSBbXTsKICAgICAgdGhpcy5sb2FkTGFiZWxzKCk7CiAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8IHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHwgd2luZG93Lm1zSW5kZXhlZERCIHx8IHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oInRvZG9EYXRhYmFzZSIsIDEpOwogICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coImRhdGFiYXNlIHRlc3QgY3JlYXRpb24gZXJyb3IiKTsKICAgICAgfTsKICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCJub3RlcyIsIHsKICAgICAgICAgIGtleVBhdGg6ICJpZCIsCiAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2xhYmVsSW5kZXgnLCAnbm90ZS5sYWJlbFRleHQnLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsIFsnbm90ZS50ZXh0J10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JywgWydub3RlLnJlbWluZGVyRGF0ZSddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVJbmRleCcsIFsnbm90ZS5yZW1pbmRlclRpbWUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgfTsKICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCJub3RlcyIpOwogICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoIm5vdGVzIik7CiAgICAgICAgbGV0IGxhYmVsSW5kZXggPSBvYmplY3RTdG9yZS5pbmRleCgibGFiZWxJbmRleCIpOwogICAgICAgIGxldCByZXF1ZXN0ID0gJyc7CiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWRMYWJlbCA9PSAnQWxsIG5vdGVzJykgewogICAgICAgICAgcmVxdWVzdCA9IGxhYmVsSW5kZXguZ2V0QWxsKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlcXVlc3QgPSBsYWJlbEluZGV4LmdldEFsbChzZWxmLnNlbGVjdGVkTGFiZWwpOwogICAgICAgIH0KICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXF1ZXN0LnJlc3VsdCk7CiAgICAgICAgICBsZXQgcmVzdWx0cyA9IHJlcXVlc3QucmVzdWx0OwogICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7CiAgICAgICAgICBmb3IgKGxldCByIG9mIHJlc3VsdHMpIHsKICAgICAgICAgICAgbGV0IHJlc3VsdE5vdGUgPSB7CiAgICAgICAgICAgICAgaWQ6IHIuaWQsCiAgICAgICAgICAgICAgdGV4dDogci5ub3RlLnRleHQsCiAgICAgICAgICAgICAgbGFiZWxUZXh0OiByLm5vdGUubGFiZWxUZXh0LAogICAgICAgICAgICAgIGxhYmVsQ29sb3VyOiByLm5vdGUubGFiZWxDb2xvdXIsCiAgICAgICAgICAgICAgcmVtaW5kZXJEYXRlOiByLm5vdGUucmVtaW5kZXJEYXRlLAogICAgICAgICAgICAgIHJlbWluZGVyVGltZTogci5ub3RlLnJlbWluZGVyVGltZSwKICAgICAgICAgICAgICBkaXNwbGF5RGF0ZVRpbWU6IHIubm90ZS5kaXNwbGF5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgaXNDb21wbGV0ZWQ6IHIubm90ZS5pc0NvbXBsZXRlZAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy9wdXNoIG5vdGUgaW50byBub3Rlc1tdCiAgICAgICAgICAgIHNlbGYubm90ZXMucHVzaChyZXN1bHROb3RlKTsKICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5ub3Rlcyk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGIuY2xvc2UoKTsKICAgICAgICB9OwogICAgICB9OwogICAgICBjb25zb2xlLmxvZygnVEFHUycpOwogICAgfSwKICAgIHVubG9hZFRhZ3MoKSB7CiAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgdGhpcy5sYWJlbHMgPSBbXTsKICAgICAgdGhpcy5zZWxlY3RlZExhYmVsID0gJ0FsbCBub3Rlcyc7CiAgICB9LAogICAgLy9jb3VudHMgaG93IG1hbnkgcmVtaW5kZXJzIGV4cGlyZWQKICAgIGxvYWROb3RpZmljYXRpb25zKCkgewogICAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSAwOwogICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fCB3aW5kb3cud2Via2l0SW5kZXhlZERCIHx8IHdpbmRvdy5tc0luZGV4ZWREQiB8fCB3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLCAxKTsKICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJkYXRhYmFzZSB0ZXN0IGNyZWF0aW9uIGVycm9yIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLCB7CiAgICAgICAgICBrZXlQYXRoOiAiaWQiLAogICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JywgJ25vdGUubGFiZWxUZXh0JywgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLCBbJ25vdGUudGV4dCddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsIFsnbm90ZS5yZW1pbmRlckRhdGUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJUaW1lJ10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiT2JqZWN0IHN0b3JlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5Li4uIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiKTsKICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwogICAgICAgIGxldCBkYXRlSW5kZXggPSBvYmplY3RTdG9yZS5pbmRleCgiZGF0ZUluZGV4Iik7CiAgICAgICAgbGV0IHJlcXVlc3QgPSAnJzsKICAgICAgICByZXF1ZXN0ID0gZGF0ZUluZGV4LmdldEFsbCgpOwogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3QucmVzdWx0KTsKICAgICAgICAgIGxldCByZXN1bHRzID0gcmVxdWVzdC5yZXN1bHQ7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRzKTsKICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgbm93ID0gbm93LmdldFRpbWUoKTsKICAgICAgICAgIGZvciAobGV0IHIgb2YgcmVzdWx0cykgewogICAgICAgICAgICAvL3JlY29uc3RydWN0IGRhdGUgYW5kIHRpbWUgdG8gY29tcGFyZSBpdCB3aXRoIGN1cnJlbnQgZGF0ZSBhbmQgdGltZSAgIAogICAgICAgICAgICBsZXQgZGF0ZVRvU3RyaW5nID0gci5ub3RlLnJlbWluZGVyRGF0ZS50b1N0cmluZygpOwogICAgICAgICAgICBsZXQgYWN0dWFsRGF0ZTEgPSBkYXRlVG9TdHJpbmcuc3BsaXQoJyAnKTsKICAgICAgICAgICAgYWN0dWFsRGF0ZTEgPSBhY3R1YWxEYXRlMVswXSArICcgJyArIGFjdHVhbERhdGUxWzFdICsgJyAnICsgYWN0dWFsRGF0ZTFbMl0gKyAnICcgKyBhY3R1YWxEYXRlMVszXTsKICAgICAgICAgICAgbGV0IHRpbWVUb1N0cmluZyA9IHIubm90ZS5yZW1pbmRlclRpbWUudG9TdHJpbmcoKTsKICAgICAgICAgICAgbGV0IGFjdHVhbFRpbWUxID0gdGltZVRvU3RyaW5nLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIGFjdHVhbFRpbWUxID0gYWN0dWFsVGltZTFbNF0gKyAnICcgKyBhY3R1YWxUaW1lMVs1XSArICcgJyArIGFjdHVhbFRpbWUxWzZdOwogICAgICAgICAgICBsZXQgYWN0dWFsRGF0ZVRpbWUgPSBhY3R1YWxEYXRlMSArICcgJyArIGFjdHVhbFRpbWUxOwogICAgICAgICAgICBjb25zb2xlLmxvZyhhY3R1YWxEYXRlVGltZSk7CgogICAgICAgICAgICAvL3JlY29udmVydCB0byBEYXRlIGZvcm1hdAogICAgICAgICAgICBhY3R1YWxEYXRlVGltZSA9IG5ldyBEYXRlKGFjdHVhbERhdGVUaW1lKTsKCiAgICAgICAgICAgIC8vY29tcGFyZSB3aXRoIGN1cnJlbnQgRGF0ZSBhbmQgVGltZQogICAgICAgICAgICAvL2lmIHJlbWluZGVyIGhhcyBub3QgZXhwaXJlZCwgcHVzaCBub3RlIGludG8gbm90ZXNbXQogICAgICAgICAgICBpZiAoYWN0dWFsRGF0ZVRpbWUuZ2V0VGltZSgpIDwgbm93KSB7CiAgICAgICAgICAgICAgc2VsZi5ub3RpZmljYXRpb25zKys7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgIH07CiAgICAgIH07CiAgICB9LAogICAgbG9hZEFjdGl2ZVJlbWluZGVycygpIHsKICAgICAgdGhpcy5hY3RpdmVSZW1pbmRlcnMgPSAwOwogICAgICB0aGlzLnVwY29taW5nUmVtaW5kZXJzID0gMDsKICAgICAgdGhpcy5ub3RlcyA9IFtdOwogICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fCB3aW5kb3cud2Via2l0SW5kZXhlZERCIHx8IHdpbmRvdy5tc0luZGV4ZWREQiB8fCB3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLCAxKTsKICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJkYXRhYmFzZSB0ZXN0IGNyZWF0aW9uIGVycm9yIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLCB7CiAgICAgICAgICBrZXlQYXRoOiAiaWQiLAogICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JywgJ25vdGUubGFiZWxUZXh0JywgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLCBbJ25vdGUudGV4dCddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsIFsnbm90ZS5yZW1pbmRlckRhdGUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJUaW1lJ10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiT2JqZWN0IHN0b3JlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5Li4uIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiKTsKICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwogICAgICAgIGxldCBkYXRlSW5kZXggPSBvYmplY3RTdG9yZS5pbmRleCgiZGF0ZUluZGV4Iik7CiAgICAgICAgbGV0IHJlcXVlc3QgPSAnJzsKICAgICAgICByZXF1ZXN0ID0gZGF0ZUluZGV4LmdldEFsbCgpOwogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3QucmVzdWx0KTsKICAgICAgICAgIGxldCByZXN1bHRzID0gcmVxdWVzdC5yZXN1bHQ7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRzKTsKICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgbm93ID0gbm93LmdldFRpbWUoKTsKICAgICAgICAgIGZvciAobGV0IHIgb2YgcmVzdWx0cykgewogICAgICAgICAgICAvL3JlY29uc3RydWN0IGRhdGUgYW5kIHRpbWUgdG8gY29tcGFyZSBpdCB3aXRoIGN1cnJlbnQgZGF0ZSBhbmQgdGltZSAgIAogICAgICAgICAgICBsZXQgZGF0ZVRvU3RyaW5nID0gci5ub3RlLnJlbWluZGVyRGF0ZS50b1N0cmluZygpOwogICAgICAgICAgICBsZXQgYWN0dWFsRGF0ZTEgPSBkYXRlVG9TdHJpbmcuc3BsaXQoJyAnKTsKICAgICAgICAgICAgYWN0dWFsRGF0ZTEgPSBhY3R1YWxEYXRlMVswXSArICcgJyArIGFjdHVhbERhdGUxWzFdICsgJyAnICsgYWN0dWFsRGF0ZTFbMl0gKyAnICcgKyBhY3R1YWxEYXRlMVszXTsKICAgICAgICAgICAgbGV0IHRpbWVUb1N0cmluZyA9IHIubm90ZS5yZW1pbmRlclRpbWUudG9TdHJpbmcoKTsKICAgICAgICAgICAgbGV0IGFjdHVhbFRpbWUxID0gdGltZVRvU3RyaW5nLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIGFjdHVhbFRpbWUxID0gYWN0dWFsVGltZTFbNF0gKyAnICcgKyBhY3R1YWxUaW1lMVs1XSArICcgJyArIGFjdHVhbFRpbWUxWzZdOwogICAgICAgICAgICBsZXQgYWN0dWFsRGF0ZVRpbWUgPSBhY3R1YWxEYXRlMSArICcgJyArIGFjdHVhbFRpbWUxOwogICAgICAgICAgICBjb25zb2xlLmxvZyhhY3R1YWxEYXRlVGltZSk7CgogICAgICAgICAgICAvL3JlY29udmVydCB0byBEYXRlIGZvcm1hdAogICAgICAgICAgICBhY3R1YWxEYXRlVGltZSA9IG5ldyBEYXRlKGFjdHVhbERhdGVUaW1lKTsKICAgICAgICAgICAgbGV0IHJlc3VsdE5vdGUgPSB7CiAgICAgICAgICAgICAgaWQ6IHIuaWQsCiAgICAgICAgICAgICAgdGV4dDogci5ub3RlLnRleHQsCiAgICAgICAgICAgICAgbGFiZWxUZXh0OiByLm5vdGUubGFiZWxUZXh0LAogICAgICAgICAgICAgIGxhYmVsQ29sb3VyOiByLm5vdGUubGFiZWxDb2xvdXIsCiAgICAgICAgICAgICAgcmVtaW5kZXJEYXRlOiByLm5vdGUucmVtaW5kZXJEYXRlLAogICAgICAgICAgICAgIHJlbWluZGVyVGltZTogci5ub3RlLnJlbWluZGVyVGltZSwKICAgICAgICAgICAgICBkaXNwbGF5RGF0ZVRpbWU6IHIubm90ZS5kaXNwbGF5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgaXNDb21wbGV0ZWQ6IHIubm90ZS5pc0NvbXBsZXRlZAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy9jb21wYXJlIHdpdGggY3VycmVudCBEYXRlIGFuZCBUaW1lCiAgICAgICAgICAgIC8vaWYgcmVtaW5kZXIgaGFzIG5vdCBleHBpcmVkLCBwdXNoIG5vdGUgaW50byBub3Rlc1tdCiAgICAgICAgICAgIGlmIChhY3R1YWxEYXRlVGltZS5nZXRUaW1lKCkgPCBub3cpIHsKICAgICAgICAgICAgICBzZWxmLm5vdGVzLnB1c2gocmVzdWx0Tm90ZSk7CiAgICAgICAgICAgICAgc2VsZi5hY3RpdmVSZW1pbmRlcnMrKzsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLm5vdGVzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzZWxmLnVwY29taW5nUmVtaW5kZXJzKys7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgIH07CiAgICAgIH07CiAgICB9LAogICAgbG9hZFVwY29taW5nUmVtaW5kZXJzKCkgewogICAgICB0aGlzLm5vdGVzID0gW107CiAgICAgIHRoaXMudXBjb21pbmdSZW1pbmRlcnMgPSAwOwogICAgICB0aGlzLmFjdGl2ZVJlbWluZGVycyA9IDA7CiAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8IHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHwgd2luZG93Lm1zSW5kZXhlZERCIHx8IHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oInRvZG9EYXRhYmFzZSIsIDEpOwogICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coImRhdGFiYXNlIHRlc3QgY3JlYXRpb24gZXJyb3IiKTsKICAgICAgfTsKICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCJub3RlcyIsIHsKICAgICAgICAgIGtleVBhdGg6ICJpZCIsCiAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2xhYmVsSW5kZXgnLCAnbm90ZS5sYWJlbFRleHQnLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsIFsnbm90ZS50ZXh0J10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JywgWydub3RlLnJlbWluZGVyRGF0ZSddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVJbmRleCcsIFsnbm90ZS5yZW1pbmRlclRpbWUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgfTsKICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCJub3RlcyIpOwogICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoIm5vdGVzIik7CiAgICAgICAgbGV0IGRhdGVJbmRleCA9IG9iamVjdFN0b3JlLmluZGV4KCJkYXRlSW5kZXgiKTsKICAgICAgICBsZXQgcmVxdWVzdCA9ICcnOwogICAgICAgIHJlcXVlc3QgPSBkYXRlSW5kZXguZ2V0QWxsKCk7CiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycpOwogICAgICAgICAgY29uc29sZS5sb2cocmVxdWVzdC5yZXN1bHQpOwogICAgICAgICAgbGV0IHJlc3VsdHMgPSByZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMpOwogICAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgICBub3cgPSBub3cuZ2V0VGltZSgpOwogICAgICAgICAgZm9yIChsZXQgciBvZiByZXN1bHRzKSB7CiAgICAgICAgICAgIC8vcmVjb25zdHJ1Y3QgZGF0ZSBhbmQgdGltZSB0byBjb21wYXJlIGl0IHdpdGggY3VycmVudCBkYXRlIGFuZCB0aW1lICAgCiAgICAgICAgICAgIGxldCBkYXRlVG9TdHJpbmcgPSByLm5vdGUucmVtaW5kZXJEYXRlLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIGxldCBhY3R1YWxEYXRlMSA9IGRhdGVUb1N0cmluZy5zcGxpdCgnICcpOwogICAgICAgICAgICBhY3R1YWxEYXRlMSA9IGFjdHVhbERhdGUxWzBdICsgJyAnICsgYWN0dWFsRGF0ZTFbMV0gKyAnICcgKyBhY3R1YWxEYXRlMVsyXSArICcgJyArIGFjdHVhbERhdGUxWzNdOwogICAgICAgICAgICBsZXQgdGltZVRvU3RyaW5nID0gci5ub3RlLnJlbWluZGVyVGltZS50b1N0cmluZygpOwogICAgICAgICAgICBsZXQgYWN0dWFsVGltZTEgPSB0aW1lVG9TdHJpbmcuc3BsaXQoJyAnKTsKICAgICAgICAgICAgYWN0dWFsVGltZTEgPSBhY3R1YWxUaW1lMVs0XSArICcgJyArIGFjdHVhbFRpbWUxWzVdICsgJyAnICsgYWN0dWFsVGltZTFbNl07CiAgICAgICAgICAgIGxldCBhY3R1YWxEYXRlVGltZSA9IGFjdHVhbERhdGUxICsgJyAnICsgYWN0dWFsVGltZTE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFjdHVhbERhdGVUaW1lKTsKCiAgICAgICAgICAgIC8vcmVjb252ZXJ0IHRvIERhdGUgZm9ybWF0CiAgICAgICAgICAgIGFjdHVhbERhdGVUaW1lID0gbmV3IERhdGUoYWN0dWFsRGF0ZVRpbWUpOwogICAgICAgICAgICBsZXQgcmVzdWx0Tm90ZSA9IHsKICAgICAgICAgICAgICBpZDogci5pZCwKICAgICAgICAgICAgICB0ZXh0OiByLm5vdGUudGV4dCwKICAgICAgICAgICAgICBsYWJlbFRleHQ6IHIubm90ZS5sYWJlbFRleHQsCiAgICAgICAgICAgICAgbGFiZWxDb2xvdXI6IHIubm90ZS5sYWJlbENvbG91ciwKICAgICAgICAgICAgICByZW1pbmRlckRhdGU6IHIubm90ZS5yZW1pbmRlckRhdGUsCiAgICAgICAgICAgICAgcmVtaW5kZXJUaW1lOiByLm5vdGUucmVtaW5kZXJUaW1lLAogICAgICAgICAgICAgIGRpc3BsYXlEYXRlVGltZTogci5ub3RlLmRpc3BsYXlEYXRlVGltZSwKICAgICAgICAgICAgICBpc0NvbXBsZXRlZDogci5ub3RlLmlzQ29tcGxldGVkCiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvL2NvbXBhcmUgd2l0aCBjdXJyZW50IERhdGUgYW5kIFRpbWUKICAgICAgICAgICAgLy9pZiByZW1pbmRlciBoYXMgZXhwaXJlZCwgcHVzaCBub3RlIGludG8gbm90ZXNbXQogICAgICAgICAgICBpZiAoYWN0dWFsRGF0ZVRpbWUuZ2V0VGltZSgpID4gbm93KSB7CiAgICAgICAgICAgICAgc2VsZi5ub3Rlcy5wdXNoKHJlc3VsdE5vdGUpOwogICAgICAgICAgICAgIHNlbGYudXBjb21pbmdSZW1pbmRlcnMrKzsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLm5vdGVzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzZWxmLmFjdGl2ZVJlbWluZGVycysrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGIuY2xvc2UoKTsKICAgICAgICB9OwogICAgICB9OwogICAgICAvLwogICAgfSwKCiAgICB0b2dnbGVSZW1pbmRlcnMobikgewogICAgICBpZiAobiA9PSAxKSB7CiAgICAgICAgdGhpcy5pc0FjdGl2ZVJlbWluZGVyID0gdHJ1ZTsKICAgICAgICB0aGlzLmlzVXBjb21pbmdSZW1pbmRlciA9IGZhbHNlOwogICAgICAgIHRoaXMubG9hZEFjdGl2ZVJlbWluZGVycygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNBY3RpdmVSZW1pbmRlciA9IGZhbHNlOwogICAgICAgIHRoaXMuaXNVcGNvbWluZ1JlbWluZGVyID0gdHJ1ZTsKICAgICAgICB0aGlzLmxvYWRVcGNvbWluZ1JlbWluZGVycygpOwogICAgICB9CiAgICB9LAogICAgLy9tYXJrcyBub3RlIGFzIGNvbXBsZXRlZAogICAgbWFya0NvbXBsZXRlZChub3RlSWQpIHsKICAgICAgLy8KCiAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8IHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHwgd2luZG93Lm1zSW5kZXhlZERCIHx8IHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oInRvZG9EYXRhYmFzZSIsIDEpOwogICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coInJlcXVlc3QgZXJyb3IgLSBtYXJrQ29tcGxldGVkIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLCB7CiAgICAgICAgICBrZXlQYXRoOiAiaWQiLAogICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JywgWydub3RlLmxhYmVsVGV4dCddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsIFsnbm90ZS50ZXh0J10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JywgWydub3RlLnJlbWluZGVyRGF0ZSddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVJbmRleCcsIFsnbm90ZS5yZW1pbmRlclRpbWUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgfTsKICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCJub3RlcyIsICJyZWFkd3JpdGUiKTsKICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwoKICAgICAgICAvL2dldCByZWNvcmQgdG8gbW9kaWZ5CiAgICAgICAgY29uc3QgcmVjb3JkUmVxdWVzdCA9IG9iamVjdFN0b3JlLmdldChub3RlSWQpOwogICAgICAgIHJlY29yZFJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgbGV0IHJlY29yZCA9IHJlY29yZFJlcXVlc3QucmVzdWx0OwogICAgICAgICAgY29uc29sZS5sb2cocmVjb3JkKTsKCiAgICAgICAgICAvLyByZWNvcmQubm90ZS50ZXh0ID0gdGV4dDsKICAgICAgICAgIC8vIHJlY29yZC5ub3RlLnJlbWluZGVyRGF0ZT1yZW1pbmRlckRhdGU7CiAgICAgICAgICAvLyByZWNvcmQubm90ZS5yZW1pbmRlclRpbWU9cmVtaW5kZXJUaW1lOwogICAgICAgICAgLy8gcmVjb3JkLm5vdGUuZGlzcGxheURhdGVUaW1lPWRpc3BsYXlEYXRlVGltZTsgICAgICAgICAgICAKICAgICAgICAgIC8vIHJlY29yZC5ub3RlLmxhYmVsVGV4dD1sYWJlbFRleHQ7CiAgICAgICAgICAvLyByZWNvcmQubm90ZS5sYWJlbENvbG91cj1sYWJlbENvbG91cjsKICAgICAgICAgIHJlY29yZC5ub3RlLmlzQ29tcGxldGVkID0gdHJ1ZTsKCiAgICAgICAgICAvL3NhdmUgbmV3IHZhbHVlcyB0byBpbmRleGVkREIKICAgICAgICAgIGNvbnN0IHVwZGF0ZVJlcXVlc3QgPSBvYmplY3RTdG9yZS5wdXQocmVjb3JkKTsKICAgICAgICAgIHVwZGF0ZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygncmVjb3JkIHVwZGF0ZWQnKTsKICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgLy9zaG93IGFsbCBub3RlcyAoZmlsdGVyZWQgYnkgdGFnIG9yIG5vdCkKICAgICAgICAgIGlmIChzZWxmLm9wdGlvbiA9PSAxKSB7CiAgICAgICAgICAgIGlmIChzZWxmLmlzVGFnU2VhcmNoKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWRMYWJlbCAhPSAnQWxsIG5vdGVzJykgewogICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZExhYmVsID0gc2VsZi5zZWxlY3RlZE5vdGVbMF0ubGFiZWxUZXh0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZWxmLmxvYWRUYWdzKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2VsZi5sb2FkRGF0YSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvL3Nob3cgbm90ZXMgd2l0aCByZW1pbmRlcnMKICAgICAgICAgIGVsc2UgaWYgKHNlbGYub3B0aW9uID09IDIpIHsKICAgICAgICAgICAgaWYgKHNlbGYuaXNBY3RpdmVSZW1pbmRlcikgewogICAgICAgICAgICAgIHNlbGYubG9hZEFjdGl2ZVJlbWluZGVycygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNlbGYubG9hZFVwY29taW5nUmVtaW5kZXJzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgICBzZWxmLmlzTm90ZU9wdGlvbnMgPSBmYWxzZTsKICAgICAgICB9OwogICAgICB9OwogICAgfSwKICAgIG1hcmtJbmNvbXBsZXRlKG5vdGVJZCkgewogICAgICAvLwogICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fCB3aW5kb3cud2Via2l0SW5kZXhlZERCIHx8IHdpbmRvdy5tc0luZGV4ZWREQiB8fCB3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLCAxKTsKICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJyZXF1ZXN0IGVycm9yIC0gbWFya0NvbXBsZXRlZCIpOwogICAgICB9OwogICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoIm5vdGVzIiwgewogICAgICAgICAga2V5UGF0aDogImlkIiwKICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUKICAgICAgICB9KTsKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsIFsnbm90ZS5sYWJlbFRleHQnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLCBbJ25vdGUudGV4dCddLCB7CiAgICAgICAgICB1bmlxdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsIFsnbm90ZS5yZW1pbmRlckRhdGUnXSwgewogICAgICAgICAgdW5pcXVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLCBbJ25vdGUucmVtaW5kZXJUaW1lJ10sIHsKICAgICAgICAgIHVuaXF1ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiT2JqZWN0IHN0b3JlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5Li4uIik7CiAgICAgIH07CiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiLCAicmVhZHdyaXRlIik7CiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKCiAgICAgICAgLy9nZXQgcmVjb3JkIHRvIG1vZGlmeQogICAgICAgIGNvbnN0IHJlY29yZFJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXQobm90ZUlkKTsKICAgICAgICByZWNvcmRSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxldCByZWNvcmQgPSByZWNvcmRSZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlY29yZCk7CiAgICAgICAgICByZWNvcmQubm90ZS5pc0NvbXBsZXRlZCA9IGZhbHNlOwoKICAgICAgICAgIC8vc2F2ZSBuZXcgdmFsdWVzIHRvIGluZGV4ZWREQgogICAgICAgICAgY29uc3QgdXBkYXRlUmVxdWVzdCA9IG9iamVjdFN0b3JlLnB1dChyZWNvcmQpOwogICAgICAgICAgdXBkYXRlUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWNvcmQgdXBkYXRlZCcpOwogICAgICAgICAgfTsKICAgICAgICB9OwogICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvL3Nob3cgYWxsIG5vdGVzIChmaWx0ZXJlZCBieSB0YWcgb3Igbm90KQogICAgICAgICAgaWYgKHNlbGYub3B0aW9uID09IDEpIHsKICAgICAgICAgICAgaWYgKHNlbGYuaXNUYWdTZWFyY2gpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLnNlbGVjdGVkTGFiZWwpOwogICAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkTGFiZWwgIT0gJ0FsbCBub3RlcycpIHsKICAgICAgICAgICAgICAgIC8vIHNlbGYuc2VsZWN0ZWRMYWJlbD1zZWxmLmxhYmVsVGV4dDsgCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxmLnNlbGVjdGVkTGFiZWwpOyAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZWxmLmxvYWRUYWdzKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2VsZi5sb2FkRGF0YSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvL3Nob3cgbm90ZXMgd2l0aCByZW1pbmRlcnMKICAgICAgICAgIGVsc2UgaWYgKHNlbGYub3B0aW9uID09IDIpIHsKICAgICAgICAgICAgaWYgKHNlbGYuaXNBY3RpdmVSZW1pbmRlcikgewogICAgICAgICAgICAgIHNlbGYubG9hZEFjdGl2ZVJlbWluZGVycygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNlbGYubG9hZFVwY29taW5nUmVtaW5kZXJzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgICBzZWxmLmlzTm90ZU9wdGlvbnMgPSBmYWxzZTsKICAgICAgICB9OwogICAgICB9OwogICAgfSwKICAgIHRvZ2dsZURyYWdnYWJsZSgpIHsKICAgICAgdGhpcy5pc0RyYWdnYWJsZSA9ICF0aGlzLmlzRHJhZ2dhYmxlOwogICAgfQogIH0KfTs="},{"version":3,"names":["VSwatches","DatePicker","draggable","name","props","title","String","components","mounted","loadData","loadNotifications","data","option","notes","notesNoLabel","enableAdd","enabledLabel","enabledNotification","colour","labelText","labelColour","labels","selectedLabel","isNoteOptions","noteIndex","noteId","selectedNote","reminderDate","reminderTime","displayDateTime","dateNull","timeNull","isEdit","isTagSearch","isActiveReminder","isUpcomingReminder","activeReminders","upcomingReminders","notifications","isDraggable","methods","setOption","n","loadActiveReminders","addNew","setTimeout","$refs","newNoteInput","focus","closeAdd","toggleLabel","document","getElementById","toggleNotification","addLabel","value","trim","addReminder","fDate","toDateString","split","displayDate","fTime","toString","displayTime","saveNew","newNoteText","console","log","newNote","text","isCompleted","self","indexedDB","window","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","request","open","onerror","event","onupgradeneeded","db","target","result","objectStore","createObjectStore","keyPath","autoIncrement","createIndex","unique","onsuccess","transaction","add","note","close","oncomplete","toggleNoteOptions","id","push","deleteNote","complete","delete","loadTags","reminder","loadUpcomingReminders","toggleEdit","saveEdit","recordRequest","get","record","updateRequest","put","deleteLabel","deleteReminder","toggleTimePanel","showTimePanel","foundNotes","openCursor","cursor","continue","deleteDB","deleteDatabase","resort","forEach","toggleTagSearch","unloadTags","loadLabels","labelIndex","index","getAll","results","r","exists","l","resultNote","dateIndex","now","Date","getTime","dateToString","actualDate1","timeToString","actualTime1","actualDateTime","toggleReminders","markCompleted","markIncomplete","toggleDraggable"],"sources":["src/components/Main.vue"],"sourcesContent":["\n\n\n\n<template>\n  <div class='container'>\n    <div class='container'>\n      <div class=\"row shadow top2\" id=\"header\">\n        <a href=\"/\"><img  class=\"logo\" src=\"../assets/logo.png\" alt=\"logo\">      </a>\n      </div>\n\n      \n      <h1 class=\"row\"><span class='section-title'></span></h1>\n  \n      <div class=\"row top2 mainContainer background-whitesmoke  py-0 py-md-2\" id=\"topmenu\">\n          <button v-if='option==1' class=\"col-6 col-md-1 m-md-1 btn btn-primary rounded-0\" @click='setOption(1)'><i class=\"far fa-sticky-note\"></i></button>\n          <button v-if='option!=1' class=\"col-6 col-md-1 m-md-1 btn btn-light rounded-0\" @click='setOption(1)'><i class=\"far fa-sticky-note\"></i></button>\n\n          <button v-if='option==2 && notifications==0' class=\"col-6 col-md-1 m-md-1  btn btn-primary rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"></i></button>\n          <button v-if='option!=2 && notifications==0' class=\"col-6 col-md-1 m-md-1 btn btn-light rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"></i></button>\n  \n          <button v-if='option==2 && notifications>0' class=\"col-6 col-md-1 m-md-1 btn btn-primary rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"> </i> <small class='notification left1'> <b>({{notifications}})</b></small></button> \n          <button v-if='option!=2 && notifications>0' class=\"col-6 col-md-1 m-md-1 btn btn-light rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"> </i> <small class='notification left1'> <b>({{notifications}})</b></small></button>  \n          \n      </div>\n  \n  \n     <div v-if=\"option==1\"  class=\"row top2 mainContainer\">\n        <button class=\"btn btn-primary2 fas fa-plus \" @click='addNew'></button>         \n        <button v-if=\"isTagSearch==false\"  class=\"left1 btn black \" @click=\"toggleTagSearch\"><i class=\"fas fa-tag\"></i> group</button>         \n        <button v-if=\"isTagSearch\"  class=\"left1 btn btn-primary2   rounded-0 \" @click=\"toggleTagSearch\"><i class=\"fas fa-tag\"></i> group</button>                               \n     </div> \n\n     <div class=\"row\">\n        <button v-if=\"isDraggable && !isTagSearch\" @click=\"toggleDraggable\" class=\"btn  left1  primary\"><i class=\"fas fa-sort\"></i></button> \n        <button v-if=\"!isDraggable && !isTagSearch\" @click=\"toggleDraggable\" class=\"btn left1  btn  disabled\"><i class=\"fas fa-sort\"></i></button>  \n      </div> \n  \n     \n  \n     <div v-if=\"option==1 && enableAdd\"  class=\"row top1 mainContainer\">\n        <input v-if='enableAdd' class=\"col-md-10 col-12 black\"  maxlength=\"70\" type=\"text\" ref=\"newNoteInput\">  \n    \n        <button v-if=\"!enabledLabel\" class=\"col-12 col-md btn \" @click='toggleLabel' ><i class=\"fas fa-tag\"></i></button>              \n        <button v-if=\"!enabledNotification\" class=\"col-12 col-md btn \" @click='toggleNotification' ><i class=\"fas fa-bell\"></i></button>\n        \n        <transition>\n          <div v-if='enabledLabel' class=\"modalContainer centre\">\n            <div  class=\"col-12 modal1 \">\n  \n              <h2 class=\"col-12 black\"><i class=\"fas fa-tag\"></i> </h2>  \n              \n              <div class=\"col-12 top1 black\"><small><b>Add label</b></small></div>\n              <input class=\"col-10 top1\" type=\"text\" id=\"input_label\"\n              :style=\"{ color: this.colour}\"\n              >   \n              <v-swatches class=\"top1\"\n              v-model=\"colour\"                              \n              shapes=\"circles\"\n                >\n              </v-swatches>\n              <button class=\"col-10 top1 btn btn-light\" @click='addLabel'>ok</button>\n              <button class=\"col-10 top1  btn black \" @click='toggleLabel'>cancel</button>\n                         \n            </div>\n          </div>\n        </transition>\n  \n        <div class=\"col-12 top1\">                  \n            <button v-if=\"labelText!=''\" class=\"btn btn-light fas fa-tag\" :style=\"{color: labelColour}\" @click='deleteLabel()'><small> {{labelText}} -</small></button>\n            <button v-if=\"reminderDate!=null\" class=\"btn darkcyan left1\" @click=\"deleteReminder\" :title=displayDateTime> <i class=\"fas fa-bell\"><small> {{displayDateTime}}  <i class=\"fas fa-trash-alt\"></i></small></i></button>          \n            \n        </div>\n  \n        \n  \n         <transition>\n            <div v-if='enabledNotification' class=\"modalContainer\">\n              <div  class=\"col-12 centre modal1\">\n                <h2 class=\"col-12 black\"><i class=\"fas fa-bell\"></i> </h2> \n                <div class=\"col-12 black\"><small><b>Add Reminder</b></small></div>\n  \n                \n                  <div class=\"col\">\n                    <date-picker id=\"datePicker\"\n                      v-model=\"reminderDate\"\n                      type=\"date\"\n                      format='DD-MM-YYYY'\n                      placeholder=\"Reminder date\"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      >\n                        \n                    </date-picker>\n                  </div>\n  \n                  <div v-if=\"reminderDate!=null\" class=\"col top2\" >\n  \n                    <!-- time picker -->\n                    <date-picker id=\"timePicker\"\n                      v-model=\"reminderTime\"\n                      type=\"time\"\n                      format='HH:mm'\n                      placeholder=\"Reminder time \"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      :clearable=true\n    \n                      :time-picker-options=\"{\n                        start: '00:00',\n                        step: '00:30',\n                        end: '23:30',\n                      }\"\n                      >    \n                    </date-picker>\n  \n                    <!-- no time selected -->\n                    \n                  </div>   \n  \n                  <div class=\"col-12 top1  red\" v-if=\"timeNull\"><small>Please select reminder time</small></div>                       \n  \n                <button class=\"col-10 top1 btn btn-light primary\" @click='addReminder'>add</button>\n                <button class=\"col-10 top1  btn black\" @click='toggleNotification'>cancel</button>\n              </div>  \n            </div>  \n         </transition>\n        \n        <button v-if=\"!this.enabledLabel && !this.enabledNotification\" class=\"col-12 top2 btn btn-primary\" @click='saveNew'>add</button>\n        <button v-if=\"!this.enabledLabel && !this.enabledNotification\"  class=\"col-12 top2 btn btn-primary2 black\" @click='closeAdd'>cancel</button>\n     </div> \n  \n     <div v-if=\"option==1 && !enableAdd\" id=\"notesContainer\" class=\"container top1\" >\n        \n        <!-- filter by labels is off -->\n\n        \n        <span v-if=\"!isNoteOptions && !isEdit && !isTagSearch\">\n\n        \n\n          <draggable v-model=\"notes\" v-if=\"isDraggable\"\n          \n          @end=\"resort\"    \n          >\n            <div class=\"row  shadow-sm  button rounded-0  black my-2\" v-for=\"(n,index) in notes\" :key=\"index\">\n                    \n              \n              <template v-if=\"n.isCompleted==false\">                                \n                <button class=\"button_display_text btn background-primary-light left col-11 rounded-0\" >{{n.text}}  </button>\n                <button class=\"btn rounded-0 col-1 background-primary-light left text-md-right fas fa-sort\"></button>\n                            \n                <div class=\"col-12 \">\n                  <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                </div>                   \n              </template>            \n            </div>   \n         </draggable> \n        \n          <template v-if=\"!isDraggable\">\n            <div  class=\"row  shadow-sm  button rounded-0  black my-2\" v-for=\"(n,index) in notes\" :key=\"index\">\n                    \n              \n              <template v-if=\"n.isCompleted==false\">                                \n                <button class=\"button_display_text btn background-primary-light left col-11 rounded-0\" slot=\"header\" @click='toggleNoteOptions(index, n.id)' >{{n.text}}  </button>\n                <button class=\"btn rounded-0 col-1 background-primary-light text-left text-md-right fas fa-ellipsis-v\"   @click='toggleNoteOptions(index, n.id)'></button>\n                            \n                <div class=\"col-12 \">\n                  <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                </div>                   \n              </template>\n    \n              <!-- if task is completed -->\n              <template v-if=\"n.isCompleted==true\">            \n                <button class=\"button_display_text btn background-primary-light left col system rounded-0\">{{n.text}}  </button>             \n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>\n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button>              \n              </template>\n    \n    \n            </div>  \n          </template>          \n         \n        <!-- END Draggable -->\n\n         <div v-if=\"notes==''\"  class=\"row  top1\">          \n              <p class=\"left1  primary2\">No notes found</p>\n         </div> \n        </span>\n  \n  \n        <!-- filter by labels is on -->\n         <div v-if=\"!isNoteOptions && !isEdit && isTagSearch\"> \n\n          <!-- select          -->\n          <div v-if=\"notes!=''\" class=\"row sticky-top membrane2 top1\">                        \n            <i class=\"fas fa-caret-down margin-v-auto\"></i>             \n            <select v-model=\"selectedLabel\" class=\"left1\"  name=\"tagFilter\"  id=\"tagFilter\" @change=\"loadTags()\">\n               \n              <option class=\"primary\" v-for=\"(l,index) in labels\" :value=\"l\" :key=\"index\">                  \n  \n                <template v-if=\"l==''\">\n                  No label    \n                </template>\n  \n                <template v-if=\"l!=''\">\n                  {{ l }}    \n                </template>\n                 \n              </option>        \n            </select>                        \n          </div> \n  \n                 \n            <div class=\"row  shadow-sm button  black my-2 \" v-for=\"(n,index) in notes\" :key=\"index\">          \n              <template v-if=\"n.isCompleted==false\">       \n                <button class=\"col-11 button_display_text btn background-primary-light left  rounded-0\" @click='toggleNoteOptions(index, n.id)' >{{n.text}}</button>\n                <button class=\"col-1 btn rounded-0 background-primary-light text-left text-md-right fas fa-ellipsis-v\" @click='toggleNoteOptions(index, n.id)'></button>\n                <div class=\"col-12 \">\n                  <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                </div>                 \n              </template>\n\n              <template v-if=\"n.isCompleted==true\">                   \n                <button class=\"button_display_text btn background-primary-light left col system rounded-0\">{{n.text}}  </button>             \n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>\n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button>            \n              </template >  \n            </div>  \n\n            <div v-if=\"notes==''\"  class=\"row top1   button  black top1\">          \n              <p class=\" primary2\">No notes found</p>                         \n            </div> \n\n         </div>\n        \n  \n         <span v-if=\"isNoteOptions\">\n            <div class=\"row  shadow  button  black top1\">\n              <!-- <button class=\"btn background-primary-light left col-12 black noteTextButton\" @click='toggleNoteOptions(noteIndex,noteId)'> {{notes[noteIndex].text}}</button> -->\n              <button class=\"btn col-12 text-right  fas fa-ellipsis-v\" @click='toggleNoteOptions(noteIndex,noteId)'></button>\n\n              <button class=\"btn green background-green rounded-0 col-12   top1\" @click='markCompleted(noteId)' ><i class=\"fas fa-check-double\"></i></button>\n              <button class=\"btn primary background-light rounded-0 col-12  black\" @click='toggleEdit' ><i class=\"far fa-edit\"></i></button>            \n              <button class=\"btn rounded-0 col-12\" @click='deleteNote(noteId)' ><i class=\"fa fa-trash\"></i></button>                                        \n            </div>  \n          </span> \n  \n          <span v-if=\"isEdit\">\n            <div class=\"row  button  black top1\">\n              <input  class=\"col-10 black\" id=\"input_edit\" type=\"text\" :value='notes[noteIndex].text'>             \n  \n               <button v-if=\"!enabledLabel\" class=\"col-12 col-md btn \" @click=\"toggleLabel\" ><i class=\"fas fa-tag\"></i></button>            \n               <button v-if=\"!enabledNotification\" class=\"col-12 col-md btn \" @click=\"toggleNotification\" ><i class=\"fas fa-bell\"></i></button>\n            </div>  \n  \n            <div class=\"row top1\">    \n              \n              <button v-if=\"labelText!=''\" class=\"btn btn-light fas fa-tag\" :style=\"{color: labelColour}\" @click='deleteLabel()'><small> {{labelText}} -</small></button>\n              <button v-if='reminderDate!=null' class=\"btn darkcyan left left1\" @click='deleteReminder()' ><i class=\"fas fa-bell\" :title=displayDateTime><small> {{displayDateTime}} <i class=\"fas fa-trash-alt\"></i></small> </i> </button>\n              \n            </div>  \n\n            <div class=\"row\">\n              <button class=\"btn btn-primary2  top1 col-md-2\" @click='saveEdit' >ok</button>            \n              <button class=\"btn btn primary top1 col-md-2  m-md-1\" @click='toggleEdit'>cancel</button>            \n            </div>\n          </span> \n  \n          <transition>\n  \n          <div v-if='enabledLabel' class=\"modalContainer centre\">\n            <div  class=\"col-12 modal1 \">\n  \n              <h2 class=\"col-12 black\"><i class=\"fas fa-tag\"></i> </h2>  \n              \n              <div class=\"col-12 top1 black\"><small><b>Add label</b></small></div>\n              <input class=\"col-10 top1\" type=\"text\" id=\"input_label\"\n              :style=\"{ color: this.colour}\"\n              >   \n              <v-swatches class=\"top1\"\n              v-model=\"colour\"                              \n              shapes=\"circles\"\n                >\n              </v-swatches>\n              <button class=\"col-10 top1 btn btn-light\" @click='addLabel'>ok</button>\n              <button class=\"col-10 top1  btn black \" @click='toggleLabel'>cancel</button>\n              <!-- <button class=\"btn col\">cancel</button> -->             \n            </div>\n          </div>\n        </transition>\n  \n         <transition>\n            <div v-if='enabledNotification' class=\"modalContainer\">\n              <div  class=\"col-12 centre modal1\">\n                <h2 class=\"col-12 black\"><i class=\"fas fa-bell\"></i> </h2> \n                <div class=\"col-12 black\"><small><b>Add Reminder</b></small></div>\n  \n                \n                  <div class=\"col\">\n                    <date-picker\n                      v-model=\"reminderDate\"\n                      type=\"date\"\n                      format='DD-MM-YYYY'\n                      placeholder=\"Reminder date\"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      >\n                        \n                    </date-picker>\n  \n                    \n                  </div>\n  \n                  \n                  <div  class=\"col top2\">\n                    <date-picker \n                      v-model=\"reminderTime\"\n                      type=\"time\"\n                      format='HH:mm'\n                      placeholder=\"Reminder time \"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      :clearable=true\n    \n                      :time-picker-options=\"{\n                        start: '00:00',\n                        step: '00:30',\n                        end: '23:30',\n                      }\"\n                      >\n                        \n                    </date-picker>\n\n                  </div>        \n\n                  <div class=\"col-12 top1  red\" v-if=\"timeNull\"><small>Please select reminder time</small></div>\n\n                <button class=\"col-10 top1 btn btn-light primary\" @click='addReminder'>add</button>\n                <button class=\"col-10 top1  btn black\" @click='toggleNotification'>cancel</button>\n                \n              </div>  \n            </div>  \n         </transition>\n     </div> \n  \n    \n    <!-- Display notes with reminder -->\n     <div v-if=\"option==2\"  class=\" top1\">      \n        <div class=\"row  sticky-top mainContainer membrane2  \">\n          <button v-if='isActiveReminder' class=\"btn  d-md-none col-6\" @click='toggleReminders(1)' ><b>| Expired</b> <small v-if=\"activeReminders>0\" class=\"primary notification\"><b> &nbsp;({{activeReminders}})</b></small></button> \n          <button v-if='!isActiveReminder' class=\"btn d-md-none col-6\" @click='toggleReminders(1)'>Expired <small v-if=\"activeReminders>0\" class=\"primary notification\"><b> &nbsp;({{activeReminders}})</b></small> </button> \n  \n          <button v-if='isUpcomingReminder' class=\"btn d-md-none col-6\" @click='toggleReminders(2)'><b>| Upcoming</b> <small v-if=\"upcomingReminders>0\" class=\"primary notification\"><b> &nbsp;({{upcomingReminders}})</b></small></button>          \n          <button v-if='!isUpcomingReminder' class=\"btn d-md-none col-6\" @click='toggleReminders(2)'>Upcoming <small v-if=\"upcomingReminders>0\" class=\"notification\" ><b> &nbsp;({{upcomingReminders}})</b></small></button>\n\n          <button v-if='isActiveReminder' class=\"btn  d-none d-md-block  text-md-left\" style=\"width:120px\" @click='toggleReminders(1)' ><b>| Expired</b> <small v-if=\"activeReminders>0\" class=\"primary notification\"><b>  &nbsp;({{activeReminders}})</b></small></button> \n          <button v-if='!isActiveReminder' class=\"btn d-none d-md-block  text-md-left\" style=\"width:120px\" @click='toggleReminders(1)'>Expired <small v-if=\"activeReminders>0\" class=\"primary notification\"><b> &nbsp;({{activeReminders}})</b></small> </button> \n  \n          <button v-if='isUpcomingReminder' class=\"btn d-none d-md-block  text-md-left\" style=\"width:120px\" @click='toggleReminders(2)'><b>| Upcoming</b> <small v-if=\"upcomingReminders>0\" class=\"primary notification\"><b> &nbsp;({{upcomingReminders}})</b></small> </button>          \n          <button v-if='!isUpcomingReminder' class=\"btn d-none  d-md-block text-md-left\" style=\"width:120px\" @click='toggleReminders(2)'>Upcoming  <small v-if=\"upcomingReminders>0\" class=\"notification\" ><b>&nbsp;({{upcomingReminders}})</b></small></button>          \n        </div>\n  \n        <div v-if=\"notes==''\"  class=\"row   top1\">          \n            <p class=\"col left1 text-center text-md-left primary2\">No notes found</p>\n        </div>\n         \n        <template  v-if=\"!isNoteOptions && !isEdit\">\n          <div class=\"notesContainer\">\n            <div  class=\"row button  black top1\" v-for=\"(n,index) in notes\" :key=\"index\">          \n                <template v-if=\"n.isCompleted==false\">\n                  <!-- <button class=\"button_display_text btn background-primary-light left col black\" @click='toggleNoteOptions(index, n.id)'>{{n.text}}  </button>                \n                  <button v-if=\"n.labelText!=''\" class=\" btn btn-light2 left\" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button v-if=\"n.labelText==''\" class=\" btn btn-light2 left\"  :title=n.labelText></button>\n                  <button  v-if='n.reminderDate!=null' class=\" btn btn-light2 darkcyan\" :title=n.displayDateTime ><i class=\"fas fa-bell\"></i> <small>{{n.displayDateTime}}</small>  </button>\n                  <button  v-if='n.reminderDate==null' class=\" btn btn-light2 darkcyan\" ><i class=\"fas fa-bell invisible\" ></i></button>                                          -->\n\n                  <button class=\"button_display_text btn background-primary-light left col-11 rounded-0\" @click='toggleNoteOptions(index, n.id)' >{{n.text}}  </button>\n                  <button class=\"btn rounded-0 col-1 background-primary-light text-left text-md-right fas fa-ellipsis-v\" @click='toggleNoteOptions(index, n.id)'></button>\n\n                  <div class=\"col-12 \">\n                    <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                    <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                  </div>  \n\n                </template>\n          \n                <template v-if=\"n.isCompleted==true\">\n                  <!-- <button class=\"button_display_text btn btn-light2 left col system\">{{n.text}}  </button>                \n                  <button v-if=\"n.labelText!=''\" class=\" btn btn-light2 left system\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button v-if=\"n.labelText==''\" class=\" btn btn-light2 left\"  :title=n.labelText></button>\n                  <button  v-if='n.reminderDate!=null' class=\" btn btn-light2 system\" :title=n.displayDateTime ><i class=\"fas fa-bell\"></i> <small>{{n.displayDateTime}}</small>  </button>\n                  <button  v-if='n.reminderDate==null' class=\" btn btn-light2 system\" ><i class=\"fas fa-bell invisible\" ></i></button>                                                       \n                  <button class=\"btn btn-light2 left col-1 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>                  \n                  <button class=\"btn btn-light2 col-1  black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button> -->\n\n                  <button class=\"button_display_text btn background-primary-light left col system rounded-0\">{{n.text}}  </button>             \n                  <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>\n                  <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button>            \n                </template>\n            </div>\n    \n           \n          </div>           \n        </template>  \n         \n           \n        <span v-if=\"isNoteOptions\">\n        <!-- <div class=\"row  shadow  button  black top1\">\n          <button class=\"button_display_text btn background-primary-light left col black\" @click='toggleNoteOptions(noteIndex,noteId)'> {{notes[noteIndex].text}}</button>\n          <button class=\"btn green background-green rounded-0 col-12 col-md-1  my-1 my-md-0\" @click='markCompleted(noteId)' ><i class=\"fas fa-check-double\"></i></button>\n          <button class=\"btn primary background-light rounded-0 col-12 col-md-1 my-1 my-md-0 black\" @click='toggleEdit' ><i class=\"far fa-edit\"></i></button>            \n          <button class=\"btn rounded-0 col-12 col-md-1  my-1 my-md-0\" @click='deleteNote(noteId)' ><i class=\"fa fa-trash\"></i></button>            \n        </div>   -->\n          <div class=\"row  shadow  button  black top1\">\n              <!-- <button class=\"btn background-primary-light left col-12 black noteTextButton\" @click='toggleNoteOptions(noteIndex,noteId)'> {{notes[noteIndex].text}}</button> -->\n              <button class=\"btn col-12 text-right fas fa-ellipsis-v\" @click='toggleNoteOptions(noteIndex,noteId)'></button>\n\n              <button class=\"btn green background-green rounded-0 col-12   top1\" @click='markCompleted(noteId)' ><i class=\"fas fa-check-double\"></i></button>\n              <button class=\"btn primary background-light rounded-0 col-12  black\" @click='toggleEdit' ><i class=\"far fa-edit\"></i></button>            \n              <button class=\"btn rounded-0 col-12\" @click='deleteNote(noteId)' ><i class=\"fa fa-trash\"></i></button>                                        \n          </div> \n        </span> \n  \n        <span v-if=\"isEdit\">\n          <div class=\"row  button  black top1\">\n            <input  class=\"col-12 col-md-10 black\" id=\"input_edit\" type=\"text\"  maxlength=\"70\" :value='notes[noteIndex].text'>             \n  \n              <button v-if=\"!enabledLabel\" class=\"col-12 col-md btn \" @click=\"toggleLabel\" ><i class=\"fas fa-tag\"></i></button>            \n              <button v-if=\"!enabledNotification\" class=\"col-12 col-md btn \" @click=\"toggleNotification\" ><i class=\"fas fa-bell\"></i></button>\n          </div>  \n  \n          <div class=\"row top1\">    \n            \n            <button v-if=\"labelText!=''\" class=\"btn btn-light fas fa-tag\" :style=\"{color: labelColour}\" @click='deleteLabel()'><small> {{labelText}} -</small></button>\n            <button v-if='reminderDate!=null' class=\"btn darkcyan left left1\" @click='deleteReminder()' ><i class=\"fas fa-bell\" :title=displayDateTime><small> {{displayDateTime}} <i class=\"fas fa-trash-alt\"></i> </small> </i> </button>\n            \n          </div>  \n                      \n          <div class=\"row\">\n            <button class=\"btn btn-primary2  top1 col-md-2\" @click='saveEdit' >ok</button>            \n            <button class=\"btn btn primary top1 col-md-2  m-md-1\" @click='toggleEdit'>cancel</button>            \n          </div>\n        </span> \n  \n        <transition>\n  \n          <div v-if='enabledLabel' class=\"modalContainer centre\">\n            <div  class=\"col-12 modal1 \">\n  \n              <h2 class=\"col-12 black\"><i class=\"fas fa-tag\"></i> </h2>  \n              \n              <div class=\"col-12 top1 black\"><small><b>Add label</b></small></div>\n              <input class=\"col-10 top1\" type=\"text\" id=\"input_label\"\n              :style=\"{ color: this.colour}\"\n              >   \n              <v-swatches class=\"top1\"\n              v-model=\"colour\"                              \n              shapes=\"circles\"\n                >\n              </v-swatches>\n              <button class=\"col-10 top1 btn btn-light\" @click='addLabel'>ok</button>\n              <button class=\"col-10 top1  btn black \" @click='toggleLabel'>cancel</button>\n              <!-- <button class=\"btn col\">cancel</button> -->             \n            </div>\n          </div>\n        </transition>\n  \n        \n  \n        \n         <transition>\n            <div v-if='enabledNotification' class=\"modalContainer\">\n              <div  class=\"col-12 centre modal1\">\n                <h2 class=\"col-12 black\"><i class=\"fas fa-bell\"></i> </h2> \n                <div class=\"col-12 black\"><small><b>Add Reminder</b></small></div>\n  \n                \n                  <div class=\"col\">\n                    <date-picker\n                      v-model=\"reminderDate\"\n                      type=\"date\"\n                      format='DD-MM-YYYY'\n                      placeholder=\"Reminder date\"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      >\n                        \n                    </date-picker>\n  \n                    \n                  </div>\n  \n                  \n                  <div  class=\"col top2\">\n                    <date-picker \n                      v-model=\"reminderTime\"\n                      type=\"time\"\n                      format='HH:mm'\n                      placeholder=\"Reminder time \"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      :clearable=true\n    \n                      :time-picker-options=\"{\n                        start: '00:00',\n                        step: '00:30',\n                        end: '23:30',\n                      }\"\n                      >\n                        \n                    </date-picker>\n                  </div>     \n                  <div class=\"col-12 top1  red\" v-if=\"timeNull\"><small>Please select reminder time</small></div>\n\n                <button class=\"col-10 top1 btn btn-light primary\" @click='addReminder'>add</button>\n                <button class=\"col-10 top1  btn black\" @click='toggleNotification'>cancel</button>\n                \n              </div>  \n            </div>  \n         </transition>\n        \n     </div>  \n  \n     \n  <div v-if=\"notes.length>1\" class=\"row  top1\">\n      <small class=\"col lightgrey\">scroll to see all notes</small>  \n  </div>\n        \n    <!-- <button class=\"btn btn-danger\" @click='deleteDB'>Delete all notes</button>   -->\n  \n    <!-- <button class=\"btn\" @click='loadData'>read</button>   -->\n  \n  \n  \n  \n    \n  \n  \n    </div>\n  </div>\n</template>\n\n<script>\nimport VSwatches from 'vue-swatches'\nimport 'vue-swatches/dist/vue-swatches.css'\n\nimport DatePicker from 'vue2-datepicker';\nimport 'vue2-datepicker/index.css';\n  \nimport draggable from 'vuedraggable'\n  \n\nexport default {\n  name: 'Main',\n  props: {\n    title: String,\n  },\n  components: { VSwatches,DatePicker,draggable },\n\n    mounted(){\n      this.loadData();\n      this.loadNotifications();\n    },\n\n  data(){\n    return{\n      option:1,\n      notes:[],  \n      notesNoLabel:[],    \n      enableAdd:false,\n      enabledLabel:false,\n      enabledNotification:false,\n      colour:'#000000',\n      labelText:'',\n      labelColour:'',            \n      labels:[],\n      selectedLabel:'All notes',\n      isNoteOptions:false,\n      noteIndex:'',\n      noteId:'',\n      selectedNote:[],\n      reminderDate: null,      \n      reminderTime: null, \n      displayDateTime:'',             \n      dateNull:false,\n      timeNull:false,\n      isEdit:false ,\n\n      isTagSearch:false,\n      isActiveReminder:false,\n      isUpcomingReminder:false,\n      activeReminders:0,\n      upcomingReminders:0,\n      notifications:0,\n      isDraggable:false,\n      \n\n    }\n  },\n\n  methods:{\n    setOption(n){\n        this.option=n;       \n        this.isNoteOptions=false;\n        //show all notes\n        if(n==1){\n          this.loadData();\n          this.isActiveReminder=false;\n          this.isUpcomingReminder=false;\n        }\n        //show notes with reminders\n        if(n==2){\n          \n          this.loadActiveReminders();\n          \n          this.isActiveReminder=true;\n          this.isTagSearch=false;\n        }\n    },\n\n    addNew(){\n      \n      this.enableAdd=true;\n      this.isTagSearch=false;\n      this.isNoteOptions=false;\n      setTimeout(() => {\n        this.$refs.newNoteInput.focus();  \n      }, 200);      \n    },\n\n\n    closeAdd(){\n      this.enableAdd=false;\n      this.labels=[];\n      this.reminderDate= null;        \n      this.reminderTime= null; \n      this.timeNull=false;\n      this.dateNull=false;   \n      this.displayDateTime='';\n\n    },\n\n    toggleLabel(){      \n      this.enabledLabel=!this.enabledLabel;      \n      if(this.enabledLabel){\n        setTimeout(() => {\n        document.getElementById('input_label').focus();  \n        }, 100);\n      }\n      else{\n        setTimeout(() => {\n          if(this.enableAdd){\n            this.$refs.newNoteInput.focus();  \n          }\n          else{\n            document.getElementById('input_edit').focus();\n          }\n        \n        }, 100);\n      }\n    },\n\n    toggleNotification(){      \n      this.enabledNotification=!this.enabledNotification;\n\n      //cancel is clicked\n      if(!this.enabledNotification && this.displayDateTime==''){      \n                \n          this.reminderDate= null;        \n          this.reminderTime= null; \n          this.timeNull=false;\n          this.dateNull=false;   \n      }\n      \n\n    },\n\n    addLabel(){\n      this.labelText=document.getElementById('input_label').value.trim();\n      this.labelColour=this.colour;\n      // let newLabel={labelText:labelText,colour:labelColour};\n\n      // if(labelText.trim()!=''){\n      //     this.labels.push(newLabel);\n      //     this.toggleLabel();\n      //     }\n\n      if(this.labelText!=''){\n          // this.labels.splice(0,1,newLabel);\n          this.toggleLabel();\n          }\n\n      \n      \n    },\n\n    addReminder(){\n      // this.toggleNotification();      \n      if(this.reminderDate!=null && this.reminderTime!=null){\n        this.dateNull=false;\n        this.timeNull=false;\n        this.enabledNotification=!this.enabledNotification;\n\n        //reformat date\n        let fDate=this.reminderDate.toDateString();\n        fDate=fDate.split(' ');\n        fDate=fDate[2]+' '+fDate[1]+' '+fDate[3];\n        let displayDate=fDate;\n\n        //reformat time        \n        let fTime=this.reminderTime.toString();\n        fTime=fTime.split(' ');\n        fTime=fTime[4];\n        fTime=fTime.split(':');\n        fTime=fTime[0]+':'+fTime[1];\n        let displayTime=fTime;\n        this.displayDateTime=displayDate + ' '+displayTime        \n      }\n\n      if(this.reminderDate==null){\n        this.dateNull=true;\n      }\n\n      if(this.reminderTime==null){\n        this.timeNull=true;\n      }    \n    },\n\n    saveNew(){\n      let newNoteText=this.$refs.newNoteInput.value;\n      console.log(this.labels);\n\n      let newNote;\n      newNote={text:newNoteText,\n              reminderDate:this.reminderDate,\n              reminderTime:this.reminderTime,\n              displayDateTime:this.displayDateTime,\n              labelText:this.labelText,\n              labelColour:this.labelColour,\n              isCompleted:false\n              };\n    \n      let self = this;\n      \n      //indexedDB\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;      \n      console.log(indexedDB);      \n      const request= indexedDB.open('todoDatabase',1);\n      \n      //onerror\n      request.onerror=function(event){\n        console.log(event);\n      }\n\n      //onupgradeneeded\n      request.onupgradeneeded=function(event){\n        let db = event.target.result;\n        let objectStore=db.createObjectStore('notes', { keyPath: \"id\", autoIncrement: true });        \n        objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n        objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n        objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n        objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});           \n        console.log(\"Object store Created Successfully...\");\n      }\n\n      //onsuccess\n      request.onsuccess = function (event){       \n       var db = event.target.result;\n       console.log(db);\n       var transaction = db.transaction(\"notes\", \"readwrite\");\n       var objectStore = transaction.objectStore(\"notes\");     \n       \n       if(newNoteText.trim()!=''){\n       objectStore.add({ note: newNote});\n        db.close();\n        self.enableAdd=false;\n        self.labelText='',\n        self.labelColour=''\n        \n        self.reminderDate=null;\n        self.reminderTime=null;\n        self.displayDateTime='';\n\n      }\n       transaction.oncomplete = function () {   \n       self.labels=[];\n       self.selectedLabel='All notes';             \n       self.loadData();\n       self.loadNotifications();\n        };\n     }\n\n    },\n\n    toggleNoteOptions(n,id){      \n      \n      this.selectedNote=[];\n      //get selected note's id\n      this.noteId=id;\n\n\n      //set get selected note\n      for(let n of this.notes){\n\n        console.log(n.id);\n        if(n.id==id){\n          this.selectedNote.push(n);\n        }\n      }\n\n      console.log(this.notes);\n      console.log(this.selectedNote);\n      this.noteIndex=n;      \n      this.isNoteOptions=!this.isNoteOptions;\n    },\n\n    deleteNote(id,complete){      \n    //  this.notes.splice(n,1);\n    //  this.isNoteOptions=!this.isNoteOptions;\n\n\n    //delete note from db\n\n    let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n      \n        request.onerror = function(){\n            console.log(\"request error deleteNote\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});\n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});                \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction('notes','readwrite');\n          const objectStore = transaction.objectStore(\"notes\");\n\n          const deleteNote = objectStore.delete(id);\n          deleteNote.onsuccess = function(){\n          console.log('note id: '+id+ ' deleted');\n          \n         }  \n            \n          transaction.oncomplete = function () {     \n\n            if(self.option==1){\n              if(self.isTagSearch){                  \n                self.selectedLabel='All notes';          \n                self.loadTags();  \n              }\n              else{\n                self.loadData();  \n\n                self.labels=[];\n                  self.reminder=[];\n                  self.reminderDate=null;\n                  self.reminderTime=null;\n                  self.displayDateTime='';\n\n              }   \n            }\n            else if(self.option==2){\n\n              if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n\n            }\n\n            \n            \n            if(complete==true){\n              this.isNoteOptions=false;\n              \n            }\n            else{\n              self.isNoteOptions=!self.isNoteOptions;              \n            }\n            db.close();\n            self.loadNotifications();\n          };\n          \n        }\n\n    },\n\n    toggleEdit(){               \n      this.isEdit=!this.isEdit;\n      this.isNoteOptions=!this.isNoteOptions;\n       \n      setTimeout(() => {\n        if(this.isEdit){\n\n        document.getElementById('input_edit').focus();\n        \n        this.labelText= this.notes[this.noteIndex].labelText;\n        \n        this.labelColour= this.notes[this.noteIndex].labelColour;\n      \n        \n        this.reminderDate=null;\n        this.reminderTime=null;\n\n        this.reminderDate=this.notes[this.noteIndex].reminderDate;\n        this.reminderTime=this.notes[this.noteIndex].reminderTime;\n        this.displayDateTime=this.notes[this.noteIndex].displayDateTime;\n        \n      }\n      }, 100);\n      \n\n    },\n\n    saveEdit(){\n      if(document.getElementById('input_edit').value.trim()!=''){\n\n        //updated field values\n          let text= document.getElementById('input_edit').value.trim();\n          let labelText=this.labelText;\n          let labelColour=this.labelColour;\n          let reminderDate=this.reminderDate;\n          let reminderTime=this.reminderTime;\n          let displayDateTime = this.displayDateTime;\n          \n\n        //save changes to indexedDB\n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n                        \n        request.onerror = function(){\n            console.log(\"request error - saveEdit\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});   \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n\n        \n\n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\",\"readwrite\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n          //get record to modify\n          const recordRequest = objectStore.get(self.noteId);\n\n          \n\n          recordRequest.onsuccess=function(){\n\n            \n            let record = recordRequest.result;\n            console.log(record);    \n                    \n            record.note.text = text;\n            record.note.reminderDate=reminderDate;\n            record.note.reminderTime=reminderTime;\n            record.note.displayDateTime=displayDateTime;            \n            record.note.labelText=labelText;\n            record.note.labelColour=labelColour;\n            record.note.isCompleted=false;\n\n\n            //save new values to indexedDB\n            const updateRequest=objectStore.put(record);\n\n            updateRequest.onsuccess=function(){\n              console.log('record updated');\n            }\n            \n          }\n          transaction.oncomplete = function () {\n            self.labelText='';\n            self.labelColour='';            \n            self.reminderDate=null;\n            self.reminderTime=null;\n            self.displayDateTime='';\n\n            //show all notes (filtered by tag or not)\n            if(self.option==1){\n              if(self.isTagSearch){    \n                if(self.selectedLabel!='All notes'){\n                  self.selectedLabel=labelText;         \n                }  \n                            \n                 self.loadTags();  \n              }\n              else{\n                self.loadData();  \n              }\n            }\n            //show notes with reminders\n            else if (self.option==2){\n               if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n               \n            }\n            self.loadNotifications();                                                      \n            db.close();\n          };\n\n\n          };\n\n      }\n      \n      \n      this.isEdit=!this.isEdit;\n      \n     \n    },\n\n    deleteLabel(){            \n      this.labelText='';\n      this.labelColour='';\n    },\n\n    deleteReminder(){    \n            \n      this.reminderDate=null;\n      this.reminderTime=null;\n      this.displayDateTime='';\n      if(this.notes!=''){\n        this.notes[this.noteIndex].reminder.reminderDate=null;\n        this.notes[this.noteIndex].reminder.reminderTime=null;\n      }\n      \n    },\n\n     toggleTimePanel() {\n      this.showTimePanel = !this.showTimePanel;\n    },\n\n    loadData(){\n      \n        \n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n        \n        let foundNotes=[];\n        \n        request.onerror = function(){\n            console.log(\"database test creation error\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n            // read through table\n            objectStore.openCursor().onsuccess = event => { \n              var cursor = event.target.result; \n              if (cursor) { \n                console.log('is cursor')\n                  \n                  let record;\n                  \n                     record={id:cursor.value.id,\n                             text:cursor.value.note.text,\n                             labelText:cursor.value.note.labelText,\n                             labelColour:cursor.value.note.labelColour,\n                             reminderDate:cursor.value.note.reminderDate,\n                             reminderTime:cursor.value.note.reminderTime,\n                             displayDateTime:cursor.value.note.displayDateTime,\n                             isCompleted:cursor.value.note.isCompleted\n                             }\n                             \n                  \n                  \n                  console.log(record);\n                  foundNotes.push(record);              \n                  console.log(cursor.value);\n\n                  console.log(\"id: \"+ cursor.value.id);\n                  console.log(\"text: \"+ cursor.value.note.text);\n                  \n                  cursor.continue(); \n              } else { \n                  console.log('end of table');\n              } \n            };\n\n          \n            \n          transaction.oncomplete = function () {\n            console.log(foundNotes);\n            self.notes=[];\n            for(let n of foundNotes){\n              self.notes.push(n);          \n            }\n                                    \n             console.log(self.notes)\n             \n            db.close();\n          };\n\n          \n        }\n\n    \n\n    },\n\n    deleteDB(){\n\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n      \n      indexedDB.deleteDatabase(\"todoDatabase\");      \n      \n    },\n\n    resort(){\n\n      let self =this;\n      \n      this.deleteDB(); \n  \n      const request = indexedDB.open(\"todoDatabase\",1);\n\n      request.onupgradeneeded=function(event){\n        let db = event.target.result;\n        let objectStore=db.createObjectStore('notes', { keyPath: \"id\", autoIncrement: true });        \n        objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n        objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n        objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n        objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n        \n        console.log(\"Object store Created Successfully...\");\n      }\n\n       request.onsuccess = function (event){       \n       var db = event.target.result;\n       let transaction = db.transaction(\"notes\",\"readwrite\");\n       const objectStore = transaction.objectStore(\"notes\");\n        console.log(objectStore);\n\n      \n\n      self.notes.forEach(function (n) {     \n      let newNote={ \n                   text:n.text,\n                   labelText:n.labelText,\n                   labelColour:n.labelColour,\n                   reminderDate:n.reminderDate,\n                   reminderTime:n.reminderTime,\n                   displayDateTime:n.displayDateTime,\n                   isCompleted:n.isCompleted\n                   \n                   }\n      objectStore.add({ note: newNote});\n      \n      console.log(n.text+'-'+ n.id)          \n          // objectStore.put({id: n, name: \"deevana\",branch: \"CSE\"});\n      })\n \n      transaction.oncomplete = function () {        \n        console.log('resorting updated');\n        \n        self.loadData();\n        db.close();\n\n      };\n\n    \n          \n    }\n\n    },\n\n    toggleTagSearch(){\n      this.isTagSearch=!this.isTagSearch;\n      this.enableAdd=false;\n      this.isNoteOptions=false;\n      if(this.isTagSearch){\n        this.loadTags();\n        \n      }\n      else{\n        this.unloadTags();\n      }\n      \n    }, \n\n    loadLabels(){\n      //populate labels[] with labelText values\n\n      this.labels=[];\n      this.labels.push('All notes');\n\n\n\n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n              \n      request.onerror = function(){\n            console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let labelIndex = objectStore.index(\"labelIndex\");\n          \n\n          \n\n          let request  = labelIndex.getAll();\n          \n          \n                    \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            \n            for(let r of results){\n                            \n               let exists=false;\n                self.labels.forEach(l => {\n                 if(r.note.labelText==l){\n                  exists=true;\n                 } \n                });\n\n                if(exists==false){\n                  \n                  self.labels.push(r.note.labelText);\n                }   \n\n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }           \n    },\n\n    \n    loadTags(){\n        \n        this.enableAdd=false;\n        this.notes=[];\n        this.loadLabels();\n\n      \n        \n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n        \n        \n        \n        request.onerror = function(){\n            console.log(\"database test creation error\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let labelIndex = objectStore.index(\"labelIndex\");\n          \n\n          let request='';\n          if(self.selectedLabel=='All notes'){\n            request = labelIndex.getAll();\n\n          }\n          else{\n            request = labelIndex.getAll(self.selectedLabel);\n           \n          }\n                    \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            for(let r of results){\n              let resultNote={id:r.id,\n                              text:r.note.text,\n                              labelText:r.note.labelText,\n                              labelColour:r.note.labelColour,\n                              reminderDate:r.note.reminderDate,\n                              reminderTime:r.note.reminderTime,\n                              displayDateTime:r.note.displayDateTime,\n                              isCompleted:r.note.isCompleted\n                              }\n\n              \n              \n\n                                         \n                //push note into notes[]\n                self.notes.push(resultNote);\n                console.log(self.notes);\n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      console.log('TAGS');\n    },\n\n    unloadTags(){\n      this.loadData();\n      this.labels=[];\n      this.selectedLabel='All notes';\n    },\n\n    //counts how many reminders expired\n    loadNotifications(){\n      this.notifications=0;\n      \n      \n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n        \n      request.onerror = function(){\n          console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n          var db = event.target.result;\n          var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n          objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n          objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n          objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n\n          console.log(\"Object store Created Successfully...\");\n      };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let dateIndex = objectStore.index(\"dateIndex\");\n          let request='';\n          request = dateIndex.getAll();\n                      \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            \n            \n            let now = new Date();\n            now = now.getTime();\n            \n            \n            \n            for(let r of results){\n\n             //reconstruct date and time to compare it with current date and time   \n             let dateToString=r.note.reminderDate.toString();\n             let actualDate1=dateToString.split(' ');                \n             actualDate1=actualDate1[0]+' '+actualDate1[1]+' '+actualDate1[2]+' '+actualDate1[3];\n\n             let timeToString=r.note.reminderTime.toString();\n             let actualTime1=timeToString.split(' ');                \n             actualTime1=actualTime1[4]+' '+actualTime1[5]+' '+actualTime1[6];\n             \n             let actualDateTime=actualDate1+' '+actualTime1;\n             console.log(actualDateTime);\n\n             //reconvert to Date format\n             actualDateTime=new Date(actualDateTime);\n                                                        \n             //compare with current Date and Time\n             //if reminder has not expired, push note into notes[]\n             if(actualDateTime.getTime()<now){\n              self.notifications++;\n             }\n             \n                                            \n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      \n    },\n\n    loadActiveReminders(){\n      this.activeReminders=0;  \n      this.upcomingReminders=0;\n      this.notes=[];\n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n        \n      request.onerror = function(){\n          console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n          var db = event.target.result;\n          var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n          objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n          objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n          objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n\n          console.log(\"Object store Created Successfully...\");\n      };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let dateIndex = objectStore.index(\"dateIndex\");\n          let request='';\n          request = dateIndex.getAll();\n                      \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            \n            \n            let now = new Date();\n            now = now.getTime();\n            \n            \n            \n            for(let r of results){\n\n             //reconstruct date and time to compare it with current date and time   \n             let dateToString=r.note.reminderDate.toString();\n             let actualDate1=dateToString.split(' ');                \n             actualDate1=actualDate1[0]+' '+actualDate1[1]+' '+actualDate1[2]+' '+actualDate1[3];\n\n             let timeToString=r.note.reminderTime.toString();\n             let actualTime1=timeToString.split(' ');                \n             actualTime1=actualTime1[4]+' '+actualTime1[5]+' '+actualTime1[6];\n             \n             let actualDateTime=actualDate1+' '+actualTime1;\n             console.log(actualDateTime);\n\n             //reconvert to Date format\n             actualDateTime=new Date(actualDateTime);\n\n             \n\n              let resultNote={id:r.id,\n                              text:r.note.text,\n                              labelText:r.note.labelText,\n                              labelColour:r.note.labelColour,\n                              reminderDate:r.note.reminderDate,\n                              reminderTime:r.note.reminderTime,\n                              displayDateTime:r.note.displayDateTime,\n                              isCompleted:r.note.isCompleted\n                              }\n                            \n                \n             //compare with current Date and Time\n             //if reminder has not expired, push note into notes[]\n             if(actualDateTime.getTime()<now){\n              self.notes.push(resultNote);\n              self.activeReminders++;\n              console.log(self.notes);\n             }\n             else{\n              self.upcomingReminders++;\n             }\n                                            \n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      \n    },\n\n\n\n    loadUpcomingReminders(){\n\n      this.notes=[];\n      this.upcomingReminders=0;\n      this.activeReminders=0;  \n      \n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n        \n      request.onerror = function(){\n          console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n          var db = event.target.result;\n          var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n          objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n          objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n          objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n\n          console.log(\"Object store Created Successfully...\");\n      };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let dateIndex = objectStore.index(\"dateIndex\");\n          let request='';\n          request = dateIndex.getAll();\n                      \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            \n            \n            let now = new Date();\n            now = now.getTime();\n            \n            \n            \n            for(let r of results){\n\n             //reconstruct date and time to compare it with current date and time   \n             let dateToString=r.note.reminderDate.toString();\n             let actualDate1=dateToString.split(' ');                \n             actualDate1=actualDate1[0]+' '+actualDate1[1]+' '+actualDate1[2]+' '+actualDate1[3];\n\n             let timeToString=r.note.reminderTime.toString();\n             let actualTime1=timeToString.split(' ');                \n             actualTime1=actualTime1[4]+' '+actualTime1[5]+' '+actualTime1[6];\n             \n             let actualDateTime=actualDate1+' '+actualTime1;\n             console.log(actualDateTime);\n\n             //reconvert to Date format\n             actualDateTime=new Date(actualDateTime);\n\n             \n\n              let resultNote={id:r.id,\n                              text:r.note.text,\n                              labelText:r.note.labelText,\n                              labelColour:r.note.labelColour,\n                              reminderDate:r.note.reminderDate,\n                              reminderTime:r.note.reminderTime,\n                              displayDateTime:r.note.displayDateTime,\n                              isCompleted:r.note.isCompleted\n                              }\n                            \n                \n             //compare with current Date and Time\n             //if reminder has expired, push note into notes[]\n             if(actualDateTime.getTime()>now){\n              self.notes.push(resultNote);\n              self.upcomingReminders++;\n              console.log(self.notes);\n             }\n             else{\n              self.activeReminders++;\n             }\n                                            \n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      //\n    },\n\n    toggleReminders(n){\n      \n      if(n==1){\n        this.isActiveReminder=true;\n        this.isUpcomingReminder=false;\n        this.loadActiveReminders();\n      }\n      else{\n        this.isActiveReminder=false;\n        this.isUpcomingReminder=true;\n        this.loadUpcomingReminders();\n      }\n\n      \n\n    },\n\n    //marks note as completed\n    markCompleted(noteId){\n      //\n      \n\n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n                        \n        request.onerror = function(){\n            console.log(\"request error - markCompleted\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});   \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n      \n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\",\"readwrite\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n          //get record to modify\n          const recordRequest = objectStore.get(noteId);\n\n          recordRequest.onsuccess=function(){\n\n            let record = recordRequest.result;\n            console.log(record);    \n                    \n            // record.note.text = text;\n            // record.note.reminderDate=reminderDate;\n            // record.note.reminderTime=reminderTime;\n            // record.note.displayDateTime=displayDateTime;            \n            // record.note.labelText=labelText;\n            // record.note.labelColour=labelColour;\n            record.note.isCompleted=true;\n\n\n            //save new values to indexedDB\n            const updateRequest=objectStore.put(record);\n\n            updateRequest.onsuccess=function(){\n              console.log('record updated');\n            }\n            \n          }\n          transaction.oncomplete = function () {\n          \n            //show all notes (filtered by tag or not)\n            if(self.option==1){\n              if(self.isTagSearch){    \n                if(self.selectedLabel!='All notes'){\n                  self.selectedLabel=self.selectedNote[0].labelText;                           \n                }  \n                            \n                 self.loadTags();  \n              }\n              else{\n                self.loadData();  \n              }\n            }\n            //show notes with reminders\n            else if (self.option==2){\n               if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n               \n            }\n          \n                                                                  \n            db.close();\n            self.isNoteOptions=false;\n          };\n\n\n          };\n\n\n\n\n    },\n\n    markIncomplete(noteId){\n      //\n       let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n                        \n        request.onerror = function(){\n            console.log(\"request error - markCompleted\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});   \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n      \n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\",\"readwrite\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n          //get record to modify\n          const recordRequest = objectStore.get(noteId);\n\n          recordRequest.onsuccess=function(){\n\n            let record = recordRequest.result;\n            console.log(record);    \n                    \n            record.note.isCompleted=false;\n\n\n            //save new values to indexedDB\n            const updateRequest=objectStore.put(record);\n\n            updateRequest.onsuccess=function(){\n              console.log('record updated');\n            }\n            \n          }\n          transaction.oncomplete = function () {\n            \n\n            //show all notes (filtered by tag or not)\n            if(self.option==1){\n              if(self.isTagSearch){    \n                console.log(self.selectedLabel);      \n                if(self.selectedLabel!='All notes'){\n                  // self.selectedLabel=self.labelText; \n                  // console.log(self.selectedLabel);                     \n                }  \n                            \n                 self.loadTags();  \n              }\n              else{\n                self.loadData();  \n              }\n            }\n            //show notes with reminders\n            else if (self.option==2){\n               if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n               \n            }\n                                                                  \n            db.close();\n            self.isNoteOptions=false;\n          };\n\n\n          };\n    },\n\n    toggleDraggable(){\n      this.isDraggable=!this.isDraggable;\n    }\n\n\n  }\n\n}\n</script>\n\n\n"],"mappings":";AAyiBA,OAAAA,SAAA;AACA;AAEA,OAAAC,UAAA;AACA;AAEA,OAAAC,SAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACAC,KAAA,EAAAC;EACA;EACAC,UAAA;IAAAP,SAAA;IAAAC,UAAA;IAAAC;EAAA;EAEAM,QAAA;IACA,KAAAC,QAAA;IACA,KAAAC,iBAAA;EACA;EAEAC,KAAA;IACA;MACAC,MAAA;MACAC,KAAA;MACAC,YAAA;MACAC,SAAA;MACAC,YAAA;MACAC,mBAAA;MACAC,MAAA;MACAC,SAAA;MACAC,WAAA;MACAC,MAAA;MACAC,aAAA;MACAC,aAAA;MACAC,SAAA;MACAC,MAAA;MACAC,YAAA;MACAC,YAAA;MACAC,YAAA;MACAC,eAAA;MACAC,QAAA;MACAC,QAAA;MACAC,MAAA;MAEAC,WAAA;MACAC,gBAAA;MACAC,kBAAA;MACAC,eAAA;MACAC,iBAAA;MACAC,aAAA;MACAC,WAAA;IAGA;EACA;EAEAC,OAAA;IACAC,UAAAC,CAAA;MACA,KAAA9B,MAAA,GAAA8B,CAAA;MACA,KAAAnB,aAAA;MACA;MACA,IAAAmB,CAAA;QACA,KAAAjC,QAAA;QACA,KAAAyB,gBAAA;QACA,KAAAC,kBAAA;MACA;MACA;MACA,IAAAO,CAAA;QAEA,KAAAC,mBAAA;QAEA,KAAAT,gBAAA;QACA,KAAAD,WAAA;MACA;IACA;IAEAW,OAAA;MAEA,KAAA7B,SAAA;MACA,KAAAkB,WAAA;MACA,KAAAV,aAAA;MACAsB,UAAA;QACA,KAAAC,KAAA,CAAAC,YAAA,CAAAC,KAAA;MACA;IACA;IAGAC,SAAA;MACA,KAAAlC,SAAA;MACA,KAAAM,MAAA;MACA,KAAAM,YAAA;MACA,KAAAC,YAAA;MACA,KAAAG,QAAA;MACA,KAAAD,QAAA;MACA,KAAAD,eAAA;IAEA;IAEAqB,YAAA;MACA,KAAAlC,YAAA,SAAAA,YAAA;MACA,SAAAA,YAAA;QACA6B,UAAA;UACAM,QAAA,CAAAC,cAAA,gBAAAJ,KAAA;QACA;MACA,OACA;QACAH,UAAA;UACA,SAAA9B,SAAA;YACA,KAAA+B,KAAA,CAAAC,YAAA,CAAAC,KAAA;UACA,OACA;YACAG,QAAA,CAAAC,cAAA,eAAAJ,KAAA;UACA;QAEA;MACA;IACA;IAEAK,mBAAA;MACA,KAAApC,mBAAA,SAAAA,mBAAA;;MAEA;MACA,UAAAA,mBAAA,SAAAY,eAAA;QAEA,KAAAF,YAAA;QACA,KAAAC,YAAA;QACA,KAAAG,QAAA;QACA,KAAAD,QAAA;MACA;IAGA;IAEAwB,SAAA;MACA,KAAAnC,SAAA,GAAAgC,QAAA,CAAAC,cAAA,gBAAAG,KAAA,CAAAC,IAAA;MACA,KAAApC,WAAA,QAAAF,MAAA;MACA;;MAEA;MACA;MACA;MACA;;MAEA,SAAAC,SAAA;QACA;QACA,KAAA+B,WAAA;MACA;IAIA;IAEAO,YAAA;MACA;MACA,SAAA9B,YAAA,iBAAAC,YAAA;QACA,KAAAE,QAAA;QACA,KAAAC,QAAA;QACA,KAAAd,mBAAA,SAAAA,mBAAA;;QAEA;QACA,IAAAyC,KAAA,QAAA/B,YAAA,CAAAgC,YAAA;QACAD,KAAA,GAAAA,KAAA,CAAAE,KAAA;QACAF,KAAA,GAAAA,KAAA,YAAAA,KAAA,YAAAA,KAAA;QACA,IAAAG,WAAA,GAAAH,KAAA;;QAEA;QACA,IAAAI,KAAA,QAAAlC,YAAA,CAAAmC,QAAA;QACAD,KAAA,GAAAA,KAAA,CAAAF,KAAA;QACAE,KAAA,GAAAA,KAAA;QACAA,KAAA,GAAAA,KAAA,CAAAF,KAAA;QACAE,KAAA,GAAAA,KAAA,YAAAA,KAAA;QACA,IAAAE,WAAA,GAAAF,KAAA;QACA,KAAAjC,eAAA,GAAAgC,WAAA,SAAAG,WAAA;MACA;MAEA,SAAArC,YAAA;QACA,KAAAG,QAAA;MACA;MAEA,SAAAF,YAAA;QACA,KAAAG,QAAA;MACA;IACA;IAEAkC,QAAA;MACA,IAAAC,WAAA,QAAApB,KAAA,CAAAC,YAAA,CAAAQ,KAAA;MACAY,OAAA,CAAAC,GAAA,MAAA/C,MAAA;MAEA,IAAAgD,OAAA;MACAA,OAAA;QAAAC,IAAA,EAAAJ,WAAA;QACAvC,YAAA,OAAAA,YAAA;QACAC,YAAA,OAAAA,YAAA;QACAC,eAAA,OAAAA,eAAA;QACAV,SAAA,OAAAA,SAAA;QACAC,WAAA,OAAAA,WAAA;QACAmD,WAAA;MACA;MAEA,IAAAC,IAAA;;MAEA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MACAX,OAAA,CAAAC,GAAA,CAAAK,SAAA;MACA,MAAAM,OAAA,GAAAN,SAAA,CAAAO,IAAA;;MAEA;MACAD,OAAA,CAAAE,OAAA,aAAAC,KAAA;QACAf,OAAA,CAAAC,GAAA,CAAAc,KAAA;MACA;;MAEA;MACAH,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAzB,OAAA,CAAAC,GAAA;MACA;;MAEA;MACAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACAnB,OAAA,CAAAC,GAAA,CAAAgB,EAAA;QACA,IAAAU,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,IAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QAEA,IAAArB,WAAA,CAAAV,IAAA;UACA+B,WAAA,CAAAQ,GAAA;YAAAC,IAAA,EAAA3B;UAAA;UACAe,EAAA,CAAAa,KAAA;UACAzB,IAAA,CAAAzD,SAAA;UACAyD,IAAA,CAAArD,SAAA,OACAqD,IAAA,CAAApD,WAAA;UAEAoD,IAAA,CAAA7C,YAAA;UACA6C,IAAA,CAAA5C,YAAA;UACA4C,IAAA,CAAA3C,eAAA;QAEA;QACAiE,WAAA,CAAAI,UAAA;UACA1B,IAAA,CAAAnD,MAAA;UACAmD,IAAA,CAAAlD,aAAA;UACAkD,IAAA,CAAA/D,QAAA;UACA+D,IAAA,CAAA9D,iBAAA;QACA;MACA;IAEA;IAEAyF,kBAAAzD,CAAA,EAAA0D,EAAA;MAEA,KAAA1E,YAAA;MACA;MACA,KAAAD,MAAA,GAAA2E,EAAA;;MAGA;MACA,SAAA1D,CAAA,SAAA7B,KAAA;QAEAsD,OAAA,CAAAC,GAAA,CAAA1B,CAAA,CAAA0D,EAAA;QACA,IAAA1D,CAAA,CAAA0D,EAAA,IAAAA,EAAA;UACA,KAAA1E,YAAA,CAAA2E,IAAA,CAAA3D,CAAA;QACA;MACA;MAEAyB,OAAA,CAAAC,GAAA,MAAAvD,KAAA;MACAsD,OAAA,CAAAC,GAAA,MAAA1C,YAAA;MACA,KAAAF,SAAA,GAAAkB,CAAA;MACA,KAAAnB,aAAA,SAAAA,aAAA;IACA;IAEA+E,WAAAF,EAAA,EAAAG,QAAA;MACA;MACA;;MAGA;;MAEA,IAAA/B,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAzB,OAAA,CAAAC,GAAA;MACA;MAGAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QAEA,MAAAe,UAAA,GAAAf,WAAA,CAAAiB,MAAA,CAAAJ,EAAA;QACAE,UAAA,CAAAT,SAAA;UACA1B,OAAA,CAAAC,GAAA,eAAAgC,EAAA;QAEA;QAEAN,WAAA,CAAAI,UAAA;UAEA,IAAA1B,IAAA,CAAA5D,MAAA;YACA,IAAA4D,IAAA,CAAAvC,WAAA;cACAuC,IAAA,CAAAlD,aAAA;cACAkD,IAAA,CAAAiC,QAAA;YACA,OACA;cACAjC,IAAA,CAAA/D,QAAA;cAEA+D,IAAA,CAAAnD,MAAA;cACAmD,IAAA,CAAAkC,QAAA;cACAlC,IAAA,CAAA7C,YAAA;cACA6C,IAAA,CAAA5C,YAAA;cACA4C,IAAA,CAAA3C,eAAA;YAEA;UACA,OACA,IAAA2C,IAAA,CAAA5D,MAAA;YAEA,IAAA4D,IAAA,CAAAtC,gBAAA;cACAsC,IAAA,CAAA7B,mBAAA;YACA,OACA;cACA6B,IAAA,CAAAmC,qBAAA;YACA;UAEA;UAIA,IAAAJ,QAAA;YACA,KAAAhF,aAAA;UAEA,OACA;YACAiD,IAAA,CAAAjD,aAAA,IAAAiD,IAAA,CAAAjD,aAAA;UACA;UACA6D,EAAA,CAAAa,KAAA;UACAzB,IAAA,CAAA9D,iBAAA;QACA;MAEA;IAEA;IAEAkG,WAAA;MACA,KAAA5E,MAAA,SAAAA,MAAA;MACA,KAAAT,aAAA,SAAAA,aAAA;MAEAsB,UAAA;QACA,SAAAb,MAAA;UAEAmB,QAAA,CAAAC,cAAA,eAAAJ,KAAA;UAEA,KAAA7B,SAAA,QAAAN,KAAA,MAAAW,SAAA,EAAAL,SAAA;UAEA,KAAAC,WAAA,QAAAP,KAAA,MAAAW,SAAA,EAAAJ,WAAA;UAGA,KAAAO,YAAA;UACA,KAAAC,YAAA;UAEA,KAAAD,YAAA,QAAAd,KAAA,MAAAW,SAAA,EAAAG,YAAA;UACA,KAAAC,YAAA,QAAAf,KAAA,MAAAW,SAAA,EAAAI,YAAA;UACA,KAAAC,eAAA,QAAAhB,KAAA,MAAAW,SAAA,EAAAK,eAAA;QAEA;MACA;IAGA;IAEAgF,SAAA;MACA,IAAA1D,QAAA,CAAAC,cAAA,eAAAG,KAAA,CAAAC,IAAA;QAEA;QACA,IAAAc,IAAA,GAAAnB,QAAA,CAAAC,cAAA,eAAAG,KAAA,CAAAC,IAAA;QACA,IAAArC,SAAA,QAAAA,SAAA;QACA,IAAAC,WAAA,QAAAA,WAAA;QACA,IAAAO,YAAA,QAAAA,YAAA;QACA,IAAAC,YAAA,QAAAA,YAAA;QACA,IAAAC,eAAA,QAAAA,eAAA;;QAGA;QACA,IAAA2C,IAAA;QACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;QAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;QAEAD,OAAA,CAAAE,OAAA;UACAd,OAAA,CAAAC,GAAA;QACA;QAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;UACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;UACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;YAAAC,OAAA;YAAAC,aAAA;UAAA;UACAH,WAAA,CAAAI,WAAA;YAAAC,MAAA;UAAA;UACAL,WAAA,CAAAI,WAAA;YAAAC,MAAA;UAAA;UACAL,WAAA,CAAAI,WAAA;YAAAC,MAAA;UAAA;UACAL,WAAA,CAAAI,WAAA;YAAAC,MAAA;UAAA;UAEAzB,OAAA,CAAAC,GAAA;QACA;QAIAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;UACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;UACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;UACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;;UAEA;UACA,MAAAuB,aAAA,GAAAvB,WAAA,CAAAwB,GAAA,CAAAvC,IAAA,CAAA/C,MAAA;UAIAqF,aAAA,CAAAjB,SAAA;YAGA,IAAAmB,MAAA,GAAAF,aAAA,CAAAxB,MAAA;YACAnB,OAAA,CAAAC,GAAA,CAAA4C,MAAA;YAEAA,MAAA,CAAAhB,IAAA,CAAA1B,IAAA,GAAAA,IAAA;YACA0C,MAAA,CAAAhB,IAAA,CAAArE,YAAA,GAAAA,YAAA;YACAqF,MAAA,CAAAhB,IAAA,CAAApE,YAAA,GAAAA,YAAA;YACAoF,MAAA,CAAAhB,IAAA,CAAAnE,eAAA,GAAAA,eAAA;YACAmF,MAAA,CAAAhB,IAAA,CAAA7E,SAAA,GAAAA,SAAA;YACA6F,MAAA,CAAAhB,IAAA,CAAA5E,WAAA,GAAAA,WAAA;YACA4F,MAAA,CAAAhB,IAAA,CAAAzB,WAAA;;YAGA;YACA,MAAA0C,aAAA,GAAA1B,WAAA,CAAA2B,GAAA,CAAAF,MAAA;YAEAC,aAAA,CAAApB,SAAA;cACA1B,OAAA,CAAAC,GAAA;YACA;UAEA;UACA0B,WAAA,CAAAI,UAAA;YACA1B,IAAA,CAAArD,SAAA;YACAqD,IAAA,CAAApD,WAAA;YACAoD,IAAA,CAAA7C,YAAA;YACA6C,IAAA,CAAA5C,YAAA;YACA4C,IAAA,CAAA3C,eAAA;;YAEA;YACA,IAAA2C,IAAA,CAAA5D,MAAA;cACA,IAAA4D,IAAA,CAAAvC,WAAA;gBACA,IAAAuC,IAAA,CAAAlD,aAAA;kBACAkD,IAAA,CAAAlD,aAAA,GAAAH,SAAA;gBACA;gBAEAqD,IAAA,CAAAiC,QAAA;cACA,OACA;gBACAjC,IAAA,CAAA/D,QAAA;cACA;YACA;YACA;YAAA,KACA,IAAA+D,IAAA,CAAA5D,MAAA;cACA,IAAA4D,IAAA,CAAAtC,gBAAA;gBACAsC,IAAA,CAAA7B,mBAAA;cACA,OACA;gBACA6B,IAAA,CAAAmC,qBAAA;cACA;YAEA;YACAnC,IAAA,CAAA9D,iBAAA;YACA0E,EAAA,CAAAa,KAAA;UACA;QAGA;MAEA;MAGA,KAAAjE,MAAA,SAAAA,MAAA;IAGA;IAEAmF,YAAA;MACA,KAAAhG,SAAA;MACA,KAAAC,WAAA;IACA;IAEAgG,eAAA;MAEA,KAAAzF,YAAA;MACA,KAAAC,YAAA;MACA,KAAAC,eAAA;MACA,SAAAhB,KAAA;QACA,KAAAA,KAAA,MAAAW,SAAA,EAAAkF,QAAA,CAAA/E,YAAA;QACA,KAAAd,KAAA,MAAAW,SAAA,EAAAkF,QAAA,CAAA9E,YAAA;MACA;IAEA;IAEAyF,gBAAA;MACA,KAAAC,aAAA,SAAAA,aAAA;IACA;IAEA7G,SAAA;MAGA,IAAA+D,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEA,IAAAuC,UAAA;MAEAxC,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QAEAzB,OAAA,CAAAC,GAAA;MACA;MAGAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;;QAEA;QACAA,WAAA,CAAAiC,UAAA,GAAA3B,SAAA,GAAAX,KAAA;UACA,IAAAuC,MAAA,GAAAvC,KAAA,CAAAG,MAAA,CAAAC,MAAA;UACA,IAAAmC,MAAA;YACAtD,OAAA,CAAAC,GAAA;YAEA,IAAA4C,MAAA;YAEAA,MAAA;cAAAZ,EAAA,EAAAqB,MAAA,CAAAlE,KAAA,CAAA6C,EAAA;cACA9B,IAAA,EAAAmD,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAA1B,IAAA;cACAnD,SAAA,EAAAsG,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAA7E,SAAA;cACAC,WAAA,EAAAqG,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAA5E,WAAA;cACAO,YAAA,EAAA8F,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAArE,YAAA;cACAC,YAAA,EAAA6F,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAApE,YAAA;cACAC,eAAA,EAAA4F,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAAnE,eAAA;cACA0C,WAAA,EAAAkD,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAAzB;YACA;YAIAJ,OAAA,CAAAC,GAAA,CAAA4C,MAAA;YACAO,UAAA,CAAAlB,IAAA,CAAAW,MAAA;YACA7C,OAAA,CAAAC,GAAA,CAAAqD,MAAA,CAAAlE,KAAA;YAEAY,OAAA,CAAAC,GAAA,UAAAqD,MAAA,CAAAlE,KAAA,CAAA6C,EAAA;YACAjC,OAAA,CAAAC,GAAA,YAAAqD,MAAA,CAAAlE,KAAA,CAAAyC,IAAA,CAAA1B,IAAA;YAEAmD,MAAA,CAAAC,QAAA;UACA;YACAvD,OAAA,CAAAC,GAAA;UACA;QACA;QAIA0B,WAAA,CAAAI,UAAA;UACA/B,OAAA,CAAAC,GAAA,CAAAmD,UAAA;UACA/C,IAAA,CAAA3D,KAAA;UACA,SAAA6B,CAAA,IAAA6E,UAAA;YACA/C,IAAA,CAAA3D,KAAA,CAAAwF,IAAA,CAAA3D,CAAA;UACA;UAEAyB,OAAA,CAAAC,GAAA,CAAAI,IAAA,CAAA3D,KAAA;UAEAuE,EAAA,CAAAa,KAAA;QACA;MAGA;IAIA;IAEA0B,SAAA;MAEA,MAAAlD,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEAL,SAAA,CAAAmD,cAAA;IAEA;IAEAC,OAAA;MAEA,IAAArD,IAAA;MAEA,KAAAmD,QAAA;MAEA,MAAA5C,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QAEAzB,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QACApB,OAAA,CAAAC,GAAA,CAAAmB,WAAA;QAIAf,IAAA,CAAA3D,KAAA,CAAAiH,OAAA,WAAApF,CAAA;UACA,IAAA2B,OAAA;YACAC,IAAA,EAAA5B,CAAA,CAAA4B,IAAA;YACAnD,SAAA,EAAAuB,CAAA,CAAAvB,SAAA;YACAC,WAAA,EAAAsB,CAAA,CAAAtB,WAAA;YACAO,YAAA,EAAAe,CAAA,CAAAf,YAAA;YACAC,YAAA,EAAAc,CAAA,CAAAd,YAAA;YACAC,eAAA,EAAAa,CAAA,CAAAb,eAAA;YACA0C,WAAA,EAAA7B,CAAA,CAAA6B;UAEA;UACAgB,WAAA,CAAAQ,GAAA;YAAAC,IAAA,EAAA3B;UAAA;UAEAF,OAAA,CAAAC,GAAA,CAAA1B,CAAA,CAAA4B,IAAA,SAAA5B,CAAA,CAAA0D,EAAA;UACA;QACA;;QAEAN,WAAA,CAAAI,UAAA;UACA/B,OAAA,CAAAC,GAAA;UAEAI,IAAA,CAAA/D,QAAA;UACA2E,EAAA,CAAAa,KAAA;QAEA;MAIA;IAEA;IAEA8B,gBAAA;MACA,KAAA9F,WAAA,SAAAA,WAAA;MACA,KAAAlB,SAAA;MACA,KAAAQ,aAAA;MACA,SAAAU,WAAA;QACA,KAAAwE,QAAA;MAEA,OACA;QACA,KAAAuB,UAAA;MACA;IAEA;IAEAC,WAAA;MACA;;MAEA,KAAA5G,MAAA;MACA,KAAAA,MAAA,CAAAgF,IAAA;MAIA,IAAA7B,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAzB,OAAA,CAAAC,GAAA;MACA;MAGAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QAEA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QACA,IAAA2C,UAAA,GAAA3C,WAAA,CAAA4C,KAAA;QAKA,IAAApD,OAAA,GAAAmD,UAAA,CAAAE,MAAA;QAIArD,OAAA,CAAAc,SAAA;UACA1B,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,CAAAW,OAAA,CAAAO,MAAA;UACA,IAAA+C,OAAA,GAAAtD,OAAA,CAAAO,MAAA;UAEA,SAAAgD,CAAA,IAAAD,OAAA;YAEA,IAAAE,MAAA;YACA/D,IAAA,CAAAnD,MAAA,CAAAyG,OAAA,CAAAU,CAAA;cACA,IAAAF,CAAA,CAAAtC,IAAA,CAAA7E,SAAA,IAAAqH,CAAA;gBACAD,MAAA;cACA;YACA;YAEA,IAAAA,MAAA;cAEA/D,IAAA,CAAAnD,MAAA,CAAAgF,IAAA,CAAAiC,CAAA,CAAAtC,IAAA,CAAA7E,SAAA;YACA;UAEA;QAEA;QAEA2E,WAAA,CAAAI,UAAA;UACAd,EAAA,CAAAa,KAAA;QACA;MACA;IACA;IAGAQ,SAAA;MAEA,KAAA1F,SAAA;MACA,KAAAF,KAAA;MACA,KAAAoH,UAAA;MAIA,IAAAzD,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAIAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAzB,OAAA,CAAAC,GAAA;MACA;MAGAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QAEA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QACA,IAAA2C,UAAA,GAAA3C,WAAA,CAAA4C,KAAA;QAGA,IAAApD,OAAA;QACA,IAAAP,IAAA,CAAAlD,aAAA;UACAyD,OAAA,GAAAmD,UAAA,CAAAE,MAAA;QAEA,OACA;UACArD,OAAA,GAAAmD,UAAA,CAAAE,MAAA,CAAA5D,IAAA,CAAAlD,aAAA;QAEA;QAEAyD,OAAA,CAAAc,SAAA;UACA1B,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,CAAAW,OAAA,CAAAO,MAAA;UACA,IAAA+C,OAAA,GAAAtD,OAAA,CAAAO,MAAA;UACAnB,OAAA,CAAAC,GAAA,CAAAiE,OAAA;UACA,SAAAC,CAAA,IAAAD,OAAA;YACA,IAAAI,UAAA;cAAArC,EAAA,EAAAkC,CAAA,CAAAlC,EAAA;cACA9B,IAAA,EAAAgE,CAAA,CAAAtC,IAAA,CAAA1B,IAAA;cACAnD,SAAA,EAAAmH,CAAA,CAAAtC,IAAA,CAAA7E,SAAA;cACAC,WAAA,EAAAkH,CAAA,CAAAtC,IAAA,CAAA5E,WAAA;cACAO,YAAA,EAAA2G,CAAA,CAAAtC,IAAA,CAAArE,YAAA;cACAC,YAAA,EAAA0G,CAAA,CAAAtC,IAAA,CAAApE,YAAA;cACAC,eAAA,EAAAyG,CAAA,CAAAtC,IAAA,CAAAnE,eAAA;cACA0C,WAAA,EAAA+D,CAAA,CAAAtC,IAAA,CAAAzB;YACA;;YAMA;YACAC,IAAA,CAAA3D,KAAA,CAAAwF,IAAA,CAAAoC,UAAA;YACAtE,OAAA,CAAAC,GAAA,CAAAI,IAAA,CAAA3D,KAAA;UACA;QAEA;QAEAiF,WAAA,CAAAI,UAAA;UACAd,EAAA,CAAAa,KAAA;QACA;MACA;MACA9B,OAAA,CAAAC,GAAA;IACA;IAEA4D,WAAA;MACA,KAAAvH,QAAA;MACA,KAAAY,MAAA;MACA,KAAAC,aAAA;IACA;IAEA;IACAZ,kBAAA;MACA,KAAA4B,aAAA;MAGA,IAAAkC,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QAEAzB,OAAA,CAAAC,GAAA;MACA;MAGAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QAEA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QACA,IAAAmD,SAAA,GAAAnD,WAAA,CAAA4C,KAAA;QACA,IAAApD,OAAA;QACAA,OAAA,GAAA2D,SAAA,CAAAN,MAAA;QAEArD,OAAA,CAAAc,SAAA;UACA1B,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,CAAAW,OAAA,CAAAO,MAAA;UACA,IAAA+C,OAAA,GAAAtD,OAAA,CAAAO,MAAA;UACAnB,OAAA,CAAAC,GAAA,CAAAiE,OAAA;UAGA,IAAAM,GAAA,OAAAC,IAAA;UACAD,GAAA,GAAAA,GAAA,CAAAE,OAAA;UAIA,SAAAP,CAAA,IAAAD,OAAA;YAEA;YACA,IAAAS,YAAA,GAAAR,CAAA,CAAAtC,IAAA,CAAArE,YAAA,CAAAoC,QAAA;YACA,IAAAgF,WAAA,GAAAD,YAAA,CAAAlF,KAAA;YACAmF,WAAA,GAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA;YAEA,IAAAC,YAAA,GAAAV,CAAA,CAAAtC,IAAA,CAAApE,YAAA,CAAAmC,QAAA;YACA,IAAAkF,WAAA,GAAAD,YAAA,CAAApF,KAAA;YACAqF,WAAA,GAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA;YAEA,IAAAC,cAAA,GAAAH,WAAA,SAAAE,WAAA;YACA9E,OAAA,CAAAC,GAAA,CAAA8E,cAAA;;YAEA;YACAA,cAAA,OAAAN,IAAA,CAAAM,cAAA;;YAEA;YACA;YACA,IAAAA,cAAA,CAAAL,OAAA,KAAAF,GAAA;cACAnE,IAAA,CAAAlC,aAAA;YACA;UAGA;QAEA;QAEAwD,WAAA,CAAAI,UAAA;UACAd,EAAA,CAAAa,KAAA;QACA;MACA;IAEA;IAEAtD,oBAAA;MACA,KAAAP,eAAA;MACA,KAAAC,iBAAA;MACA,KAAAxB,KAAA;MACA,IAAA2D,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QAEAzB,OAAA,CAAAC,GAAA;MACA;MAGAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QAEA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QACA,IAAAmD,SAAA,GAAAnD,WAAA,CAAA4C,KAAA;QACA,IAAApD,OAAA;QACAA,OAAA,GAAA2D,SAAA,CAAAN,MAAA;QAEArD,OAAA,CAAAc,SAAA;UACA1B,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,CAAAW,OAAA,CAAAO,MAAA;UACA,IAAA+C,OAAA,GAAAtD,OAAA,CAAAO,MAAA;UACAnB,OAAA,CAAAC,GAAA,CAAAiE,OAAA;UAGA,IAAAM,GAAA,OAAAC,IAAA;UACAD,GAAA,GAAAA,GAAA,CAAAE,OAAA;UAIA,SAAAP,CAAA,IAAAD,OAAA;YAEA;YACA,IAAAS,YAAA,GAAAR,CAAA,CAAAtC,IAAA,CAAArE,YAAA,CAAAoC,QAAA;YACA,IAAAgF,WAAA,GAAAD,YAAA,CAAAlF,KAAA;YACAmF,WAAA,GAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA;YAEA,IAAAC,YAAA,GAAAV,CAAA,CAAAtC,IAAA,CAAApE,YAAA,CAAAmC,QAAA;YACA,IAAAkF,WAAA,GAAAD,YAAA,CAAApF,KAAA;YACAqF,WAAA,GAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA;YAEA,IAAAC,cAAA,GAAAH,WAAA,SAAAE,WAAA;YACA9E,OAAA,CAAAC,GAAA,CAAA8E,cAAA;;YAEA;YACAA,cAAA,OAAAN,IAAA,CAAAM,cAAA;YAIA,IAAAT,UAAA;cAAArC,EAAA,EAAAkC,CAAA,CAAAlC,EAAA;cACA9B,IAAA,EAAAgE,CAAA,CAAAtC,IAAA,CAAA1B,IAAA;cACAnD,SAAA,EAAAmH,CAAA,CAAAtC,IAAA,CAAA7E,SAAA;cACAC,WAAA,EAAAkH,CAAA,CAAAtC,IAAA,CAAA5E,WAAA;cACAO,YAAA,EAAA2G,CAAA,CAAAtC,IAAA,CAAArE,YAAA;cACAC,YAAA,EAAA0G,CAAA,CAAAtC,IAAA,CAAApE,YAAA;cACAC,eAAA,EAAAyG,CAAA,CAAAtC,IAAA,CAAAnE,eAAA;cACA0C,WAAA,EAAA+D,CAAA,CAAAtC,IAAA,CAAAzB;YACA;;YAGA;YACA;YACA,IAAA2E,cAAA,CAAAL,OAAA,KAAAF,GAAA;cACAnE,IAAA,CAAA3D,KAAA,CAAAwF,IAAA,CAAAoC,UAAA;cACAjE,IAAA,CAAApC,eAAA;cACA+B,OAAA,CAAAC,GAAA,CAAAI,IAAA,CAAA3D,KAAA;YACA,OACA;cACA2D,IAAA,CAAAnC,iBAAA;YACA;UAEA;QAEA;QAEAyD,WAAA,CAAAI,UAAA;UACAd,EAAA,CAAAa,KAAA;QACA;MACA;IAEA;IAIAU,sBAAA;MAEA,KAAA9F,KAAA;MACA,KAAAwB,iBAAA;MACA,KAAAD,eAAA;MAEA,IAAAoC,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QAEAzB,OAAA,CAAAC,GAAA;MACA;MAGAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QAEA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;QACA,IAAAmD,SAAA,GAAAnD,WAAA,CAAA4C,KAAA;QACA,IAAApD,OAAA;QACAA,OAAA,GAAA2D,SAAA,CAAAN,MAAA;QAEArD,OAAA,CAAAc,SAAA;UACA1B,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,CAAAW,OAAA,CAAAO,MAAA;UACA,IAAA+C,OAAA,GAAAtD,OAAA,CAAAO,MAAA;UACAnB,OAAA,CAAAC,GAAA,CAAAiE,OAAA;UAGA,IAAAM,GAAA,OAAAC,IAAA;UACAD,GAAA,GAAAA,GAAA,CAAAE,OAAA;UAIA,SAAAP,CAAA,IAAAD,OAAA;YAEA;YACA,IAAAS,YAAA,GAAAR,CAAA,CAAAtC,IAAA,CAAArE,YAAA,CAAAoC,QAAA;YACA,IAAAgF,WAAA,GAAAD,YAAA,CAAAlF,KAAA;YACAmF,WAAA,GAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA;YAEA,IAAAC,YAAA,GAAAV,CAAA,CAAAtC,IAAA,CAAApE,YAAA,CAAAmC,QAAA;YACA,IAAAkF,WAAA,GAAAD,YAAA,CAAApF,KAAA;YACAqF,WAAA,GAAAA,WAAA,YAAAA,WAAA,YAAAA,WAAA;YAEA,IAAAC,cAAA,GAAAH,WAAA,SAAAE,WAAA;YACA9E,OAAA,CAAAC,GAAA,CAAA8E,cAAA;;YAEA;YACAA,cAAA,OAAAN,IAAA,CAAAM,cAAA;YAIA,IAAAT,UAAA;cAAArC,EAAA,EAAAkC,CAAA,CAAAlC,EAAA;cACA9B,IAAA,EAAAgE,CAAA,CAAAtC,IAAA,CAAA1B,IAAA;cACAnD,SAAA,EAAAmH,CAAA,CAAAtC,IAAA,CAAA7E,SAAA;cACAC,WAAA,EAAAkH,CAAA,CAAAtC,IAAA,CAAA5E,WAAA;cACAO,YAAA,EAAA2G,CAAA,CAAAtC,IAAA,CAAArE,YAAA;cACAC,YAAA,EAAA0G,CAAA,CAAAtC,IAAA,CAAApE,YAAA;cACAC,eAAA,EAAAyG,CAAA,CAAAtC,IAAA,CAAAnE,eAAA;cACA0C,WAAA,EAAA+D,CAAA,CAAAtC,IAAA,CAAAzB;YACA;;YAGA;YACA;YACA,IAAA2E,cAAA,CAAAL,OAAA,KAAAF,GAAA;cACAnE,IAAA,CAAA3D,KAAA,CAAAwF,IAAA,CAAAoC,UAAA;cACAjE,IAAA,CAAAnC,iBAAA;cACA8B,OAAA,CAAAC,GAAA,CAAAI,IAAA,CAAA3D,KAAA;YACA,OACA;cACA2D,IAAA,CAAApC,eAAA;YACA;UAEA;QAEA;QAEA0D,WAAA,CAAAI,UAAA;UACAd,EAAA,CAAAa,KAAA;QACA;MACA;MACA;IACA;;IAEAkD,gBAAAzG,CAAA;MAEA,IAAAA,CAAA;QACA,KAAAR,gBAAA;QACA,KAAAC,kBAAA;QACA,KAAAQ,mBAAA;MACA,OACA;QACA,KAAAT,gBAAA;QACA,KAAAC,kBAAA;QACA,KAAAwE,qBAAA;MACA;IAIA;IAEA;IACAyC,cAAA3H,MAAA;MACA;;MAGA,IAAA+C,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QAEAzB,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;;QAEA;QACA,MAAAuB,aAAA,GAAAvB,WAAA,CAAAwB,GAAA,CAAAtF,MAAA;QAEAqF,aAAA,CAAAjB,SAAA;UAEA,IAAAmB,MAAA,GAAAF,aAAA,CAAAxB,MAAA;UACAnB,OAAA,CAAAC,GAAA,CAAA4C,MAAA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACAA,MAAA,CAAAhB,IAAA,CAAAzB,WAAA;;UAGA;UACA,MAAA0C,aAAA,GAAA1B,WAAA,CAAA2B,GAAA,CAAAF,MAAA;UAEAC,aAAA,CAAApB,SAAA;YACA1B,OAAA,CAAAC,GAAA;UACA;QAEA;QACA0B,WAAA,CAAAI,UAAA;UAEA;UACA,IAAA1B,IAAA,CAAA5D,MAAA;YACA,IAAA4D,IAAA,CAAAvC,WAAA;cACA,IAAAuC,IAAA,CAAAlD,aAAA;gBACAkD,IAAA,CAAAlD,aAAA,GAAAkD,IAAA,CAAA9C,YAAA,IAAAP,SAAA;cACA;cAEAqD,IAAA,CAAAiC,QAAA;YACA,OACA;cACAjC,IAAA,CAAA/D,QAAA;YACA;UACA;UACA;UAAA,KACA,IAAA+D,IAAA,CAAA5D,MAAA;YACA,IAAA4D,IAAA,CAAAtC,gBAAA;cACAsC,IAAA,CAAA7B,mBAAA;YACA,OACA;cACA6B,IAAA,CAAAmC,qBAAA;YACA;UAEA;UAGAvB,EAAA,CAAAa,KAAA;UACAzB,IAAA,CAAAjD,aAAA;QACA;MAGA;IAKA;IAEA8H,eAAA5H,MAAA;MACA;MACA,IAAA+C,IAAA;MACA,MAAAC,SAAA,GAAAC,MAAA,CAAAD,SAAA,IAAAC,MAAA,CAAAC,YAAA,IAAAD,MAAA,CAAAE,eAAA,IAAAF,MAAA,CAAAG,WAAA,IAAAH,MAAA,CAAAI,aAAA;MAEA,MAAAC,OAAA,GAAAN,SAAA,CAAAO,IAAA;MAEAD,OAAA,CAAAE,OAAA;QACAd,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAI,eAAA,aAAAD,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAC,WAAA,GAAAH,EAAA,CAAAI,iBAAA;UAAAC,OAAA;UAAAC,aAAA;QAAA;QACAH,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QACAL,WAAA,CAAAI,WAAA;UAAAC,MAAA;QAAA;QAEAzB,OAAA,CAAAC,GAAA;MACA;MAEAW,OAAA,CAAAc,SAAA,aAAAX,KAAA;QACA,IAAAE,EAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,MAAA;QACA,IAAAQ,WAAA,GAAAV,EAAA,CAAAU,WAAA;QACA,MAAAP,WAAA,GAAAO,WAAA,CAAAP,WAAA;;QAEA;QACA,MAAAuB,aAAA,GAAAvB,WAAA,CAAAwB,GAAA,CAAAtF,MAAA;QAEAqF,aAAA,CAAAjB,SAAA;UAEA,IAAAmB,MAAA,GAAAF,aAAA,CAAAxB,MAAA;UACAnB,OAAA,CAAAC,GAAA,CAAA4C,MAAA;UAEAA,MAAA,CAAAhB,IAAA,CAAAzB,WAAA;;UAGA;UACA,MAAA0C,aAAA,GAAA1B,WAAA,CAAA2B,GAAA,CAAAF,MAAA;UAEAC,aAAA,CAAApB,SAAA;YACA1B,OAAA,CAAAC,GAAA;UACA;QAEA;QACA0B,WAAA,CAAAI,UAAA;UAGA;UACA,IAAA1B,IAAA,CAAA5D,MAAA;YACA,IAAA4D,IAAA,CAAAvC,WAAA;cACAkC,OAAA,CAAAC,GAAA,CAAAI,IAAA,CAAAlD,aAAA;cACA,IAAAkD,IAAA,CAAAlD,aAAA;gBACA;gBACA;cAAA;cAGAkD,IAAA,CAAAiC,QAAA;YACA,OACA;cACAjC,IAAA,CAAA/D,QAAA;YACA;UACA;UACA;UAAA,KACA,IAAA+D,IAAA,CAAA5D,MAAA;YACA,IAAA4D,IAAA,CAAAtC,gBAAA;cACAsC,IAAA,CAAA7B,mBAAA;YACA,OACA;cACA6B,IAAA,CAAAmC,qBAAA;YACA;UAEA;UAEAvB,EAAA,CAAAa,KAAA;UACAzB,IAAA,CAAAjD,aAAA;QACA;MAGA;IACA;IAEA+H,gBAAA;MACA,KAAA/G,WAAA,SAAAA,WAAA;IACA;EAGA;AAEA"}]}