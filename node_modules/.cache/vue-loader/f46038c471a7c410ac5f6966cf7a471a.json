{"remainingRequest":"/Users/stavros/Documents/web/todo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/todo/src/components/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/todo/src/components/Main.vue","mtime":1705364585132},{"path":"/Users/stavros/Documents/web/todo/node_modules/cache-loader/dist/cjs.js","mtime":1694974234613},{"path":"/Users/stavros/Documents/web/todo/node_modules/babel-loader/lib/index.js","mtime":1694974236369},{"path":"/Users/stavros/Documents/web/todo/node_modules/cache-loader/dist/cjs.js","mtime":1694974234613},{"path":"/Users/stavros/Documents/web/todo/node_modules/vue-loader/lib/index.js","mtime":1694974238803}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWU3dhdGNoZXMgZnJvbSAndnVlLXN3YXRjaGVzJwppbXBvcnQgJ3Z1ZS1zd2F0Y2hlcy9kaXN0L3Z1ZS1zd2F0Y2hlcy5jc3MnCgppbXBvcnQgRGF0ZVBpY2tlciBmcm9tICd2dWUyLWRhdGVwaWNrZXInOwppbXBvcnQgJ3Z1ZTItZGF0ZXBpY2tlci9pbmRleC5jc3MnOwogIAppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScKICAKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWFpbicsCiAgcHJvcHM6IHsKICAgIHRpdGxlOiBTdHJpbmcsCiAgfSwKICBjb21wb25lbnRzOiB7IFZTd2F0Y2hlcyxEYXRlUGlja2VyLGRyYWdnYWJsZSB9LAoKICAgIG1vdW50ZWQoKXsKICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgICB0aGlzLmxvYWROb3RpZmljYXRpb25zKCk7CiAgICB9LAoKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIG9wdGlvbjoxLAogICAgICBub3RlczpbXSwgIAogICAgICBub3Rlc05vTGFiZWw6W10sICAgIAogICAgICBlbmFibGVBZGQ6ZmFsc2UsCiAgICAgIGVuYWJsZWRMYWJlbDpmYWxzZSwKICAgICAgZW5hYmxlZE5vdGlmaWNhdGlvbjpmYWxzZSwKICAgICAgY29sb3VyOicjMDAwMDAwJywKICAgICAgbGFiZWxUZXh0OicnLAogICAgICBsYWJlbENvbG91cjonJywgICAgICAgICAgICAKICAgICAgbGFiZWxzOltdLAogICAgICBzZWxlY3RlZExhYmVsOidBbGwgbm90ZXMnLAogICAgICBpc05vdGVPcHRpb25zOmZhbHNlLAogICAgICBub3RlSW5kZXg6JycsCiAgICAgIG5vdGVJZDonJywKICAgICAgc2VsZWN0ZWROb3RlOltdLAogICAgICByZW1pbmRlckRhdGU6IG51bGwsICAgICAgCiAgICAgIHJlbWluZGVyVGltZTogbnVsbCwgCiAgICAgIGRpc3BsYXlEYXRlVGltZTonJywgICAgICAgICAgICAgCiAgICAgIGRhdGVOdWxsOmZhbHNlLAogICAgICB0aW1lTnVsbDpmYWxzZSwKICAgICAgaXNFZGl0OmZhbHNlICwKCiAgICAgIGlzVGFnU2VhcmNoOmZhbHNlLAogICAgICBpc0FjdGl2ZVJlbWluZGVyOmZhbHNlLAogICAgICBpc1VwY29taW5nUmVtaW5kZXI6ZmFsc2UsCiAgICAgIGFjdGl2ZVJlbWluZGVyczowLAogICAgICB1cGNvbWluZ1JlbWluZGVyczowLAogICAgICBub3RpZmljYXRpb25zOjAsCiAgICAgIGlzRHJhZ2dhYmxlOmZhbHNlLAogICAgICAKCiAgICB9CiAgfSwKCiAgbWV0aG9kczp7CiAgICBzZXRPcHRpb24obil7CiAgICAgICAgdGhpcy5vcHRpb249bjsgICAgICAgCiAgICAgICAgdGhpcy5pc05vdGVPcHRpb25zPWZhbHNlOwogICAgICAgIC8vc2hvdyBhbGwgbm90ZXMKICAgICAgICBpZihuPT0xKXsKICAgICAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgICAgIHRoaXMuaXNBY3RpdmVSZW1pbmRlcj1mYWxzZTsKICAgICAgICAgIHRoaXMuaXNVcGNvbWluZ1JlbWluZGVyPWZhbHNlOwogICAgICAgIH0KICAgICAgICAvL3Nob3cgbm90ZXMgd2l0aCByZW1pbmRlcnMKICAgICAgICBpZihuPT0yKXsKICAgICAgICAgIAogICAgICAgICAgdGhpcy5sb2FkQWN0aXZlUmVtaW5kZXJzKCk7CiAgICAgICAgICAKICAgICAgICAgIHRoaXMuaXNBY3RpdmVSZW1pbmRlcj10cnVlOwogICAgICAgICAgdGhpcy5pc1RhZ1NlYXJjaD1mYWxzZTsKICAgICAgICB9CiAgICB9LAoKICAgIGFkZE5ldygpewogICAgICAKICAgICAgdGhpcy5lbmFibGVBZGQ9dHJ1ZTsKICAgICAgdGhpcy5pc1RhZ1NlYXJjaD1mYWxzZTsKICAgICAgdGhpcy5pc05vdGVPcHRpb25zPWZhbHNlOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLm5ld05vdGVJbnB1dC5mb2N1cygpOyAgCiAgICAgIH0sIDIwMCk7ICAgICAgCiAgICB9LAoKCiAgICBjbG9zZUFkZCgpewogICAgICB0aGlzLmVuYWJsZUFkZD1mYWxzZTsKICAgICAgdGhpcy5sYWJlbHM9W107CiAgICAgIHRoaXMucmVtaW5kZXJEYXRlPSBudWxsOyAgICAgICAgCiAgICAgIHRoaXMucmVtaW5kZXJUaW1lPSBudWxsOyAKICAgICAgdGhpcy50aW1lTnVsbD1mYWxzZTsKICAgICAgdGhpcy5kYXRlTnVsbD1mYWxzZTsgICAKICAgICAgdGhpcy5kaXNwbGF5RGF0ZVRpbWU9Jyc7CgogICAgfSwKCiAgICB0b2dnbGVMYWJlbCgpeyAgICAgIAogICAgICB0aGlzLmVuYWJsZWRMYWJlbD0hdGhpcy5lbmFibGVkTGFiZWw7ICAgICAgCiAgICAgIGlmKHRoaXMuZW5hYmxlZExhYmVsKXsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRfbGFiZWwnKS5mb2N1cygpOyAgCiAgICAgICAgfSwgMTAwKTsKICAgICAgfQogICAgICBlbHNlewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgaWYodGhpcy5lbmFibGVBZGQpewogICAgICAgICAgICB0aGlzLiRyZWZzLm5ld05vdGVJbnB1dC5mb2N1cygpOyAgCiAgICAgICAgICB9CiAgICAgICAgICBlbHNlewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRfZWRpdCcpLmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgfSwgMTAwKTsKICAgICAgfQogICAgfSwKCiAgICB0b2dnbGVOb3RpZmljYXRpb24oKXsgICAgICAKICAgICAgdGhpcy5lbmFibGVkTm90aWZpY2F0aW9uPSF0aGlzLmVuYWJsZWROb3RpZmljYXRpb247CgogICAgICAvL2NhbmNlbCBpcyBjbGlja2VkCiAgICAgIGlmKCF0aGlzLmVuYWJsZWROb3RpZmljYXRpb24gJiYgdGhpcy5kaXNwbGF5RGF0ZVRpbWU9PScnKXsgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgdGhpcy5yZW1pbmRlckRhdGU9IG51bGw7ICAgICAgICAKICAgICAgICAgIHRoaXMucmVtaW5kZXJUaW1lPSBudWxsOyAKICAgICAgICAgIHRoaXMudGltZU51bGw9ZmFsc2U7CiAgICAgICAgICB0aGlzLmRhdGVOdWxsPWZhbHNlOyAgIAogICAgICB9CiAgICAgIAoKICAgIH0sCgogICAgYWRkTGFiZWwoKXsKICAgICAgdGhpcy5sYWJlbFRleHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0X2xhYmVsJykudmFsdWUudHJpbSgpOwogICAgICB0aGlzLmxhYmVsQ29sb3VyPXRoaXMuY29sb3VyOwogICAgICAvLyBsZXQgbmV3TGFiZWw9e2xhYmVsVGV4dDpsYWJlbFRleHQsY29sb3VyOmxhYmVsQ29sb3VyfTsKCiAgICAgIC8vIGlmKGxhYmVsVGV4dC50cmltKCkhPScnKXsKICAgICAgLy8gICAgIHRoaXMubGFiZWxzLnB1c2gobmV3TGFiZWwpOwogICAgICAvLyAgICAgdGhpcy50b2dnbGVMYWJlbCgpOwogICAgICAvLyAgICAgfQoKICAgICAgaWYodGhpcy5sYWJlbFRleHQhPScnKXsKICAgICAgICAgIC8vIHRoaXMubGFiZWxzLnNwbGljZSgwLDEsbmV3TGFiZWwpOwogICAgICAgICAgdGhpcy50b2dnbGVMYWJlbCgpOwogICAgICAgICAgfQoKICAgICAgCiAgICAgIAogICAgfSwKCiAgICBhZGRSZW1pbmRlcigpewogICAgICAvLyB0aGlzLnRvZ2dsZU5vdGlmaWNhdGlvbigpOyAgICAgIAogICAgICBpZih0aGlzLnJlbWluZGVyRGF0ZSE9bnVsbCAmJiB0aGlzLnJlbWluZGVyVGltZSE9bnVsbCl7CiAgICAgICAgdGhpcy5kYXRlTnVsbD1mYWxzZTsKICAgICAgICB0aGlzLnRpbWVOdWxsPWZhbHNlOwogICAgICAgIHRoaXMuZW5hYmxlZE5vdGlmaWNhdGlvbj0hdGhpcy5lbmFibGVkTm90aWZpY2F0aW9uOwoKICAgICAgICAvL3JlZm9ybWF0IGRhdGUKICAgICAgICBsZXQgZkRhdGU9dGhpcy5yZW1pbmRlckRhdGUudG9EYXRlU3RyaW5nKCk7CiAgICAgICAgZkRhdGU9ZkRhdGUuc3BsaXQoJyAnKTsKICAgICAgICBmRGF0ZT1mRGF0ZVsyXSsnICcrZkRhdGVbMV0rJyAnK2ZEYXRlWzNdOwogICAgICAgIGxldCBkaXNwbGF5RGF0ZT1mRGF0ZTsKCiAgICAgICAgLy9yZWZvcm1hdCB0aW1lICAgICAgICAKICAgICAgICBsZXQgZlRpbWU9dGhpcy5yZW1pbmRlclRpbWUudG9TdHJpbmcoKTsKICAgICAgICBmVGltZT1mVGltZS5zcGxpdCgnICcpOwogICAgICAgIGZUaW1lPWZUaW1lWzRdOwogICAgICAgIGZUaW1lPWZUaW1lLnNwbGl0KCc6Jyk7CiAgICAgICAgZlRpbWU9ZlRpbWVbMF0rJzonK2ZUaW1lWzFdOwogICAgICAgIGxldCBkaXNwbGF5VGltZT1mVGltZTsKICAgICAgICB0aGlzLmRpc3BsYXlEYXRlVGltZT1kaXNwbGF5RGF0ZSArICcgJytkaXNwbGF5VGltZSAgICAgICAgCiAgICAgIH0KCiAgICAgIGlmKHRoaXMucmVtaW5kZXJEYXRlPT1udWxsKXsKICAgICAgICB0aGlzLmRhdGVOdWxsPXRydWU7CiAgICAgIH0KCiAgICAgIGlmKHRoaXMucmVtaW5kZXJUaW1lPT1udWxsKXsKICAgICAgICB0aGlzLnRpbWVOdWxsPXRydWU7CiAgICAgIH0gICAgCiAgICB9LAoKICAgIHNhdmVOZXcoKXsKICAgICAgbGV0IG5ld05vdGVUZXh0PXRoaXMuJHJlZnMubmV3Tm90ZUlucHV0LnZhbHVlOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmxhYmVscyk7CgogICAgICBsZXQgbmV3Tm90ZTsKICAgICAgbmV3Tm90ZT17dGV4dDpuZXdOb3RlVGV4dCwKICAgICAgICAgICAgICByZW1pbmRlckRhdGU6dGhpcy5yZW1pbmRlckRhdGUsCiAgICAgICAgICAgICAgcmVtaW5kZXJUaW1lOnRoaXMucmVtaW5kZXJUaW1lLAogICAgICAgICAgICAgIGRpc3BsYXlEYXRlVGltZTp0aGlzLmRpc3BsYXlEYXRlVGltZSwKICAgICAgICAgICAgICBsYWJlbFRleHQ6dGhpcy5sYWJlbFRleHQsCiAgICAgICAgICAgICAgbGFiZWxDb2xvdXI6dGhpcy5sYWJlbENvbG91ciwKICAgICAgICAgICAgICBpc0NvbXBsZXRlZDpmYWxzZQogICAgICAgICAgICAgIH07CiAgICAKICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICAKICAgICAgLy9pbmRleGVkREIKICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8d2luZG93LndlYmtpdEluZGV4ZWREQiB8fHdpbmRvdy5tc0luZGV4ZWREQiB8fHdpbmRvdy5zaGltSW5kZXhlZERCOyAgICAgIAogICAgICBjb25zb2xlLmxvZyhpbmRleGVkREIpOyAgICAgIAogICAgICBjb25zdCByZXF1ZXN0PSBpbmRleGVkREIub3BlbigndG9kb0RhdGFiYXNlJywxKTsKICAgICAgCiAgICAgIC8vb25lcnJvcgogICAgICByZXF1ZXN0Lm9uZXJyb3I9ZnVuY3Rpb24oZXZlbnQpewogICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTsKICAgICAgfQoKICAgICAgLy9vbnVwZ3JhZGVuZWVkZWQKICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24oZXZlbnQpewogICAgICAgIGxldCBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgbGV0IG9iamVjdFN0b3JlPWRiLmNyZWF0ZU9iamVjdFN0b3JlKCdub3RlcycsIHsga2V5UGF0aDogImlkIiwgYXV0b0luY3JlbWVudDogdHJ1ZSB9KTsgICAgICAgIAogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4Jywnbm90ZS5sYWJlbFRleHQnLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLFsnbm90ZS50ZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JyxbJ25vdGUucmVtaW5kZXJEYXRlJ10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVJbmRleCcsWydub3RlLnJlbWluZGVyVGltZSddLHt1bmlxdWU6ZmFsc2V9KTsgICAgICAgICAgIAogICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgfQoKICAgICAgLy9vbnN1Y2Nlc3MKICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpeyAgICAgICAKICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICBjb25zb2xlLmxvZyhkYik7CiAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiLCAicmVhZHdyaXRlIik7CiAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsgICAgIAogICAgICAgCiAgICAgICBpZihuZXdOb3RlVGV4dC50cmltKCkhPScnKXsKICAgICAgIG9iamVjdFN0b3JlLmFkZCh7IG5vdGU6IG5ld05vdGV9KTsKICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgIHNlbGYuZW5hYmxlQWRkPWZhbHNlOwogICAgICAgIHNlbGYubGFiZWxUZXh0PScnLAogICAgICAgIHNlbGYubGFiZWxDb2xvdXI9JycKICAgICAgICAKICAgICAgICBzZWxmLnJlbWluZGVyRGF0ZT1udWxsOwogICAgICAgIHNlbGYucmVtaW5kZXJUaW1lPW51bGw7CiAgICAgICAgc2VsZi5kaXNwbGF5RGF0ZVRpbWU9Jyc7CgogICAgICB9CiAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyAgIAogICAgICAgc2VsZi5sYWJlbHM9W107CiAgICAgICBzZWxmLnNlbGVjdGVkTGFiZWw9J0FsbCBub3Rlcyc7ICAgICAgICAgICAgIAogICAgICAgc2VsZi5sb2FkRGF0YSgpOwogICAgICAgc2VsZi5sb2FkTm90aWZpY2F0aW9ucygpOwogICAgICAgIH07CiAgICAgfQoKICAgIH0sCgogICAgdG9nZ2xlTm90ZU9wdGlvbnMobixpZCl7ICAgICAgCiAgICAgIAogICAgICB0aGlzLnNlbGVjdGVkTm90ZT1bXTsKICAgICAgLy9nZXQgc2VsZWN0ZWQgbm90ZSdzIGlkCiAgICAgIHRoaXMubm90ZUlkPWlkOwoKCiAgICAgIC8vc2V0IGdldCBzZWxlY3RlZCBub3RlCiAgICAgIGZvcihsZXQgbiBvZiB0aGlzLm5vdGVzKXsKCiAgICAgICAgY29uc29sZS5sb2cobi5pZCk7CiAgICAgICAgaWYobi5pZD09aWQpewogICAgICAgICAgdGhpcy5zZWxlY3RlZE5vdGUucHVzaChuKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHRoaXMubm90ZXMpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkTm90ZSk7CiAgICAgIHRoaXMubm90ZUluZGV4PW47ICAgICAgCiAgICAgIHRoaXMuaXNOb3RlT3B0aW9ucz0hdGhpcy5pc05vdGVPcHRpb25zOwogICAgfSwKCiAgICBkZWxldGVOb3RlKGlkLGNvbXBsZXRlKXsgICAgICAKICAgIC8vICB0aGlzLm5vdGVzLnNwbGljZShuLDEpOwogICAgLy8gIHRoaXMuaXNOb3RlT3B0aW9ucz0hdGhpcy5pc05vdGVPcHRpb25zOwoKCiAgICAvL2RlbGV0ZSBub3RlIGZyb20gZGIKCiAgICBsZXQgc2VsZj10aGlzOwogICAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHx3aW5kb3cubXNJbmRleGVkREIgfHx3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgICAKICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oInRvZG9EYXRhYmFzZSIsIDEpOwogICAgICAKICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpewogICAgICAgICAgICBjb25zb2xlLmxvZygicmVxdWVzdCBlcnJvciBkZWxldGVOb3RlIik7CiAgICAgICAgfQoKICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCJub3RlcyIse2tleVBhdGggOiJpZCIsICBhdXRvSW5jcmVtZW50OnRydWV9KTsKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2xhYmVsSW5kZXgnLCdub3RlLmxhYmVsVGV4dCcse3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLFsnbm90ZS50ZXh0J10se3VuaXF1ZTpmYWxzZX0pOwogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JyxbJ25vdGUucmVtaW5kZXJEYXRlJ10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLFsnbm90ZS5yZW1pbmRlclRpbWUnXSx7dW5pcXVlOmZhbHNlfSk7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICBjb25zb2xlLmxvZygiT2JqZWN0IHN0b3JlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5Li4uIik7CiAgICAgICAgfTsKCgogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KXsgICAgICAgCiAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oJ25vdGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwoKICAgICAgICAgIGNvbnN0IGRlbGV0ZU5vdGUgPSBvYmplY3RTdG9yZS5kZWxldGUoaWQpOwogICAgICAgICAgZGVsZXRlTm90ZS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpewogICAgICAgICAgY29uc29sZS5sb2coJ25vdGUgaWQ6ICcraWQrICcgZGVsZXRlZCcpOwogICAgICAgICAgCiAgICAgICAgIH0gIAogICAgICAgICAgICAKICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7ICAgICAKCiAgICAgICAgICAgIGlmKHNlbGYub3B0aW9uPT0xKXsKICAgICAgICAgICAgICBpZihzZWxmLmlzVGFnU2VhcmNoKXsgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRMYWJlbD0nQWxsIG5vdGVzJzsgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZWxmLmxvYWRUYWdzKCk7ICAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHNlbGYubG9hZERhdGEoKTsgIAoKICAgICAgICAgICAgICAgIHNlbGYubGFiZWxzPVtdOwogICAgICAgICAgICAgICAgICBzZWxmLnJlbWluZGVyPVtdOwogICAgICAgICAgICAgICAgICBzZWxmLnJlbWluZGVyRGF0ZT1udWxsOwogICAgICAgICAgICAgICAgICBzZWxmLnJlbWluZGVyVGltZT1udWxsOwogICAgICAgICAgICAgICAgICBzZWxmLmRpc3BsYXlEYXRlVGltZT0nJzsKCiAgICAgICAgICAgICAgfSAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYoc2VsZi5vcHRpb249PTIpewoKICAgICAgICAgICAgICBpZihzZWxmLmlzQWN0aXZlUmVtaW5kZXIpewogICAgICAgICAgICAgICAgc2VsZi5sb2FkQWN0aXZlUmVtaW5kZXJzKCk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHNlbGYubG9hZFVwY29taW5nUmVtaW5kZXJzKCk7CiAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgaWYoY29tcGxldGU9PXRydWUpewogICAgICAgICAgICAgIHRoaXMuaXNOb3RlT3B0aW9ucz1mYWxzZTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgIHNlbGYuaXNOb3RlT3B0aW9ucz0hc2VsZi5pc05vdGVPcHRpb25zOyAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGIuY2xvc2UoKTsKICAgICAgICAgICAgc2VsZi5sb2FkTm90aWZpY2F0aW9ucygpOwogICAgICAgICAgfTsKICAgICAgICAgIAogICAgICAgIH0KCiAgICB9LAoKICAgIHRvZ2dsZUVkaXQoKXsgICAgICAgICAgICAgICAKICAgICAgdGhpcy5pc0VkaXQ9IXRoaXMuaXNFZGl0OwogICAgICB0aGlzLmlzTm90ZU9wdGlvbnM9IXRoaXMuaXNOb3RlT3B0aW9uczsKICAgICAgIAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZih0aGlzLmlzRWRpdCl7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9lZGl0JykuZm9jdXMoKTsKICAgICAgICAKICAgICAgICB0aGlzLmxhYmVsVGV4dD0gdGhpcy5ub3Rlc1t0aGlzLm5vdGVJbmRleF0ubGFiZWxUZXh0OwogICAgICAgIAogICAgICAgIHRoaXMubGFiZWxDb2xvdXI9IHRoaXMubm90ZXNbdGhpcy5ub3RlSW5kZXhdLmxhYmVsQ29sb3VyOwogICAgICAKICAgICAgICAKICAgICAgICB0aGlzLnJlbWluZGVyRGF0ZT1udWxsOwogICAgICAgIHRoaXMucmVtaW5kZXJUaW1lPW51bGw7CgogICAgICAgIHRoaXMucmVtaW5kZXJEYXRlPXRoaXMubm90ZXNbdGhpcy5ub3RlSW5kZXhdLnJlbWluZGVyRGF0ZTsKICAgICAgICB0aGlzLnJlbWluZGVyVGltZT10aGlzLm5vdGVzW3RoaXMubm90ZUluZGV4XS5yZW1pbmRlclRpbWU7CiAgICAgICAgdGhpcy5kaXNwbGF5RGF0ZVRpbWU9dGhpcy5ub3Rlc1t0aGlzLm5vdGVJbmRleF0uZGlzcGxheURhdGVUaW1lOwogICAgICAgIAogICAgICB9CiAgICAgIH0sIDEwMCk7CiAgICAgIAoKICAgIH0sCgogICAgc2F2ZUVkaXQoKXsKICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0X2VkaXQnKS52YWx1ZS50cmltKCkhPScnKXsKCiAgICAgICAgLy91cGRhdGVkIGZpZWxkIHZhbHVlcwogICAgICAgICAgbGV0IHRleHQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9lZGl0JykudmFsdWUudHJpbSgpOwogICAgICAgICAgbGV0IGxhYmVsVGV4dD10aGlzLmxhYmVsVGV4dDsKICAgICAgICAgIGxldCBsYWJlbENvbG91cj10aGlzLmxhYmVsQ29sb3VyOwogICAgICAgICAgbGV0IHJlbWluZGVyRGF0ZT10aGlzLnJlbWluZGVyRGF0ZTsKICAgICAgICAgIGxldCByZW1pbmRlclRpbWU9dGhpcy5yZW1pbmRlclRpbWU7CiAgICAgICAgICBsZXQgZGlzcGxheURhdGVUaW1lID0gdGhpcy5kaXNwbGF5RGF0ZVRpbWU7CiAgICAgICAgICAKCiAgICAgICAgLy9zYXZlIGNoYW5nZXMgdG8gaW5kZXhlZERCCiAgICAgICAgbGV0IHNlbGY9dGhpczsKICAgICAgICBjb25zdCBpbmRleGVkREIgPSB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy5tb3pJbmRleGVkREIgfHx3aW5kb3cud2Via2l0SW5kZXhlZERCIHx8d2luZG93Lm1zSW5kZXhlZERCIHx8d2luZG93LnNoaW1JbmRleGVkREI7CiAgICAgICAgCiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgY29uc29sZS5sb2coInJlcXVlc3QgZXJyb3IgLSBzYXZlRWRpdCIpOwogICAgICAgIH0KCiAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLHtrZXlQYXRoIDoiaWQiLCAgYXV0b0luY3JlbWVudDp0cnVlfSk7CiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JyxbJ25vdGUubGFiZWxUZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLFsnbm90ZS50ZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsWydub3RlLnJlbWluZGVyRGF0ZSddLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JyxbJ25vdGUucmVtaW5kZXJUaW1lJ10se3VuaXF1ZTpmYWxzZX0pOyAgIAogICAgICAgICAgICAKICAgICAgICAgICAgY29uc29sZS5sb2coIk9iamVjdCBzdG9yZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4uLiIpOwogICAgICAgIH07CgogICAgICAgIAoKICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCl7ICAgICAgIAogICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCJub3RlcyIsInJlYWR3cml0ZSIpOwogICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKCiAgICAgICAgICAvL2dldCByZWNvcmQgdG8gbW9kaWZ5CiAgICAgICAgICBjb25zdCByZWNvcmRSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZ2V0KHNlbGYubm90ZUlkKTsKCiAgICAgICAgICAKCiAgICAgICAgICByZWNvcmRSZXF1ZXN0Lm9uc3VjY2Vzcz1mdW5jdGlvbigpewoKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCByZWNvcmQgPSByZWNvcmRSZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVjb3JkKTsgICAgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJlY29yZC5ub3RlLnRleHQgPSB0ZXh0OwogICAgICAgICAgICByZWNvcmQubm90ZS5yZW1pbmRlckRhdGU9cmVtaW5kZXJEYXRlOwogICAgICAgICAgICByZWNvcmQubm90ZS5yZW1pbmRlclRpbWU9cmVtaW5kZXJUaW1lOwogICAgICAgICAgICByZWNvcmQubm90ZS5kaXNwbGF5RGF0ZVRpbWU9ZGlzcGxheURhdGVUaW1lOyAgICAgICAgICAgIAogICAgICAgICAgICByZWNvcmQubm90ZS5sYWJlbFRleHQ9bGFiZWxUZXh0OwogICAgICAgICAgICByZWNvcmQubm90ZS5sYWJlbENvbG91cj1sYWJlbENvbG91cjsKICAgICAgICAgICAgcmVjb3JkLm5vdGUuaXNDb21wbGV0ZWQ9ZmFsc2U7CgoKICAgICAgICAgICAgLy9zYXZlIG5ldyB2YWx1ZXMgdG8gaW5kZXhlZERCCiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJlcXVlc3Q9b2JqZWN0U3RvcmUucHV0KHJlY29yZCk7CgogICAgICAgICAgICB1cGRhdGVSZXF1ZXN0Lm9uc3VjY2Vzcz1mdW5jdGlvbigpewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWNvcmQgdXBkYXRlZCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgfQogICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5sYWJlbFRleHQ9Jyc7CiAgICAgICAgICAgIHNlbGYubGFiZWxDb2xvdXI9Jyc7ICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYucmVtaW5kZXJEYXRlPW51bGw7CiAgICAgICAgICAgIHNlbGYucmVtaW5kZXJUaW1lPW51bGw7CiAgICAgICAgICAgIHNlbGYuZGlzcGxheURhdGVUaW1lPScnOwoKICAgICAgICAgICAgLy9zaG93IGFsbCBub3RlcyAoZmlsdGVyZWQgYnkgdGFnIG9yIG5vdCkKICAgICAgICAgICAgaWYoc2VsZi5vcHRpb249PTEpewogICAgICAgICAgICAgIGlmKHNlbGYuaXNUYWdTZWFyY2gpeyAgICAKICAgICAgICAgICAgICAgIGlmKHNlbGYuc2VsZWN0ZWRMYWJlbCE9J0FsbCBub3RlcycpewogICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkTGFiZWw9bGFiZWxUZXh0OyAgICAgICAgIAogICAgICAgICAgICAgICAgfSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICBzZWxmLmxvYWRUYWdzKCk7ICAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHNlbGYubG9hZERhdGEoKTsgIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL3Nob3cgbm90ZXMgd2l0aCByZW1pbmRlcnMKICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5vcHRpb249PTIpewogICAgICAgICAgICAgICBpZihzZWxmLmlzQWN0aXZlUmVtaW5kZXIpewogICAgICAgICAgICAgICAgc2VsZi5sb2FkQWN0aXZlUmVtaW5kZXJzKCk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHNlbGYubG9hZFVwY29taW5nUmVtaW5kZXJzKCk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VsZi5sb2FkTm90aWZpY2F0aW9ucygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgICAgfTsKCgogICAgICAgICAgfTsKCiAgICAgIH0KICAgICAgCiAgICAgIAogICAgICB0aGlzLmlzRWRpdD0hdGhpcy5pc0VkaXQ7CiAgICAgIAogICAgIAogICAgfSwKCiAgICBkZWxldGVMYWJlbCgpeyAgICAgICAgICAgIAogICAgICB0aGlzLmxhYmVsVGV4dD0nJzsKICAgICAgdGhpcy5sYWJlbENvbG91cj0nJzsKICAgIH0sCgogICAgZGVsZXRlUmVtaW5kZXIoKXsgICAgCiAgICAgICAgICAgIAogICAgICB0aGlzLnJlbWluZGVyRGF0ZT1udWxsOwogICAgICB0aGlzLnJlbWluZGVyVGltZT1udWxsOwogICAgICB0aGlzLmRpc3BsYXlEYXRlVGltZT0nJzsKICAgICAgaWYodGhpcy5ub3RlcyE9JycpewogICAgICAgIHRoaXMubm90ZXNbdGhpcy5ub3RlSW5kZXhdLnJlbWluZGVyLnJlbWluZGVyRGF0ZT1udWxsOwogICAgICAgIHRoaXMubm90ZXNbdGhpcy5ub3RlSW5kZXhdLnJlbWluZGVyLnJlbWluZGVyVGltZT1udWxsOwogICAgICB9CiAgICAgIAogICAgfSwKCiAgICAgdG9nZ2xlVGltZVBhbmVsKCkgewogICAgICB0aGlzLnNob3dUaW1lUGFuZWwgPSAhdGhpcy5zaG93VGltZVBhbmVsOwogICAgfSwKCiAgICBsb2FkRGF0YSgpewogICAgICAKICAgICAgICAKICAgICAgICBsZXQgc2VsZj10aGlzOwogICAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHx3aW5kb3cubXNJbmRleGVkREIgfHx3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgICAKICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oInRvZG9EYXRhYmFzZSIsIDEpOwogICAgICAgIAogICAgICAgIGxldCBmb3VuZE5vdGVzPVtdOwogICAgICAgIAogICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRhYmFzZSB0ZXN0IGNyZWF0aW9uIGVycm9yIik7CiAgICAgICAgfQoKICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCJub3RlcyIse2tleVBhdGggOiJpZCIsICBhdXRvSW5jcmVtZW50OnRydWV9KTsKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2xhYmVsSW5kZXgnLCdub3RlLmxhYmVsVGV4dCcse3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLFsnbm90ZS50ZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdkYXRlSW5kZXgnLFsnbm90ZS5yZW1pbmRlckRhdGUnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLFsnbm90ZS5yZW1pbmRlclRpbWUnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgICB9OwoKCiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpeyAgICAgICAKICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiKTsKICAgICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoIm5vdGVzIik7CgogICAgICAgICAgICAvLyByZWFkIHRocm91Z2ggdGFibGUKICAgICAgICAgICAgb2JqZWN0U3RvcmUub3BlbkN1cnNvcigpLm9uc3VjY2VzcyA9IGV2ZW50ID0+IHsgCiAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7IAogICAgICAgICAgICAgIGlmIChjdXJzb3IpIHsgCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaXMgY3Vyc29yJykKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIGxldCByZWNvcmQ7CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICByZWNvcmQ9e2lkOmN1cnNvci52YWx1ZS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OmN1cnNvci52YWx1ZS5ub3RlLnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0OmN1cnNvci52YWx1ZS5ub3RlLmxhYmVsVGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbENvbG91cjpjdXJzb3IudmFsdWUubm90ZS5sYWJlbENvbG91ciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1pbmRlckRhdGU6Y3Vyc29yLnZhbHVlLm5vdGUucmVtaW5kZXJEYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbWluZGVyVGltZTpjdXJzb3IudmFsdWUubm90ZS5yZW1pbmRlclRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheURhdGVUaW1lOmN1cnNvci52YWx1ZS5ub3RlLmRpc3BsYXlEYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBsZXRlZDpjdXJzb3IudmFsdWUubm90ZS5pc0NvbXBsZXRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWNvcmQpOwogICAgICAgICAgICAgICAgICBmb3VuZE5vdGVzLnB1c2gocmVjb3JkKTsgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJzb3IudmFsdWUpOwoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImlkOiAiKyBjdXJzb3IudmFsdWUuaWQpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGV4dDogIisgY3Vyc29yLnZhbHVlLm5vdGUudGV4dCk7CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTsgCiAgICAgICAgICAgICAgfSBlbHNlIHsgCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbmQgb2YgdGFibGUnKTsKICAgICAgICAgICAgICB9IAogICAgICAgICAgICB9OwoKICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvdW5kTm90ZXMpOwogICAgICAgICAgICBzZWxmLm5vdGVzPVtdOwogICAgICAgICAgICBmb3IobGV0IG4gb2YgZm91bmROb3Rlcyl7CiAgICAgICAgICAgICAgc2VsZi5ub3Rlcy5wdXNoKG4pOyAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYubm90ZXMpCiAgICAgICAgICAgICAKICAgICAgICAgICAgZGIuY2xvc2UoKTsKICAgICAgICAgIH07CgogICAgICAgICAgCiAgICAgICAgfQoKICAgIAoKICAgIH0sCgogICAgZGVsZXRlREIoKXsKCiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHx3aW5kb3cubXNJbmRleGVkREIgfHx3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgCiAgICAgIGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZSgidG9kb0RhdGFiYXNlIik7ICAgICAgCiAgICAgIAogICAgfSwKCiAgICByZXNvcnQoKXsKCiAgICAgIGxldCBzZWxmID10aGlzOwogICAgICAKICAgICAgdGhpcy5kZWxldGVEQigpOyAKICAKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLDEpOwoKICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24oZXZlbnQpewogICAgICAgIGxldCBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgbGV0IG9iamVjdFN0b3JlPWRiLmNyZWF0ZU9iamVjdFN0b3JlKCdub3RlcycsIHsga2V5UGF0aDogImlkIiwgYXV0b0luY3JlbWVudDogdHJ1ZSB9KTsgICAgICAgIAogICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JyxbJ25vdGUubGFiZWxUZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsWydub3RlLnRleHQnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JyxbJ25vdGUucmVtaW5kZXJEYXRlJ10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVJbmRleCcsWydub3RlLnJlbWluZGVyVGltZSddLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgIAogICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgfQoKICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KXsgICAgICAgCiAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oIm5vdGVzIiwicmVhZHdyaXRlIik7CiAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwogICAgICAgIGNvbnNvbGUubG9nKG9iamVjdFN0b3JlKTsKCiAgICAgIAoKICAgICAgc2VsZi5ub3Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7ICAgICAKICAgICAgbGV0IG5ld05vdGU9eyAKICAgICAgICAgICAgICAgICAgIHRleHQ6bi50ZXh0LAogICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0Om4ubGFiZWxUZXh0LAogICAgICAgICAgICAgICAgICAgbGFiZWxDb2xvdXI6bi5sYWJlbENvbG91ciwKICAgICAgICAgICAgICAgICAgIHJlbWluZGVyRGF0ZTpuLnJlbWluZGVyRGF0ZSwKICAgICAgICAgICAgICAgICAgIHJlbWluZGVyVGltZTpuLnJlbWluZGVyVGltZSwKICAgICAgICAgICAgICAgICAgIGRpc3BsYXlEYXRlVGltZTpuLmRpc3BsYXlEYXRlVGltZSwKICAgICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkOm4uaXNDb21wbGV0ZWQKICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgfQogICAgICBvYmplY3RTdG9yZS5hZGQoeyBub3RlOiBuZXdOb3RlfSk7CiAgICAgIAogICAgICBjb25zb2xlLmxvZyhuLnRleHQrJy0nKyBuLmlkKSAgICAgICAgICAKICAgICAgICAgIC8vIG9iamVjdFN0b3JlLnB1dCh7aWQ6IG4sIG5hbWU6ICJkZWV2YW5hIixicmFuY2g6ICJDU0UifSk7CiAgICAgIH0pCiAKICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgICAgICAgIAogICAgICAgIGNvbnNvbGUubG9nKCdyZXNvcnRpbmcgdXBkYXRlZCcpOwogICAgICAgIAogICAgICAgIHNlbGYubG9hZERhdGEoKTsKICAgICAgICBkYi5jbG9zZSgpOwoKICAgICAgfTsKCiAgICAKICAgICAgICAgIAogICAgfQoKICAgIH0sCgogICAgdG9nZ2xlVGFnU2VhcmNoKCl7CiAgICAgIHRoaXMuaXNUYWdTZWFyY2g9IXRoaXMuaXNUYWdTZWFyY2g7CiAgICAgIHRoaXMuZW5hYmxlQWRkPWZhbHNlOwogICAgICB0aGlzLmlzTm90ZU9wdGlvbnM9ZmFsc2U7CiAgICAgIGlmKHRoaXMuaXNUYWdTZWFyY2gpewogICAgICAgIHRoaXMubG9hZFRhZ3MoKTsKICAgICAgICAKICAgICAgfQogICAgICBlbHNlewogICAgICAgIHRoaXMudW5sb2FkVGFncygpOwogICAgICB9CiAgICAgIAogICAgfSwgCgogICAgbG9hZExhYmVscygpewogICAgICAvL3BvcHVsYXRlIGxhYmVsc1tdIHdpdGggbGFiZWxUZXh0IHZhbHVlcwoKICAgICAgdGhpcy5sYWJlbHM9W107CiAgICAgIHRoaXMubGFiZWxzLnB1c2goJ0FsbCBub3RlcycpOwoKCgogICAgICBsZXQgc2VsZj10aGlzOwogICAgICBjb25zdCBpbmRleGVkREIgPSB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy5tb3pJbmRleGVkREIgfHx3aW5kb3cud2Via2l0SW5kZXhlZERCIHx8d2luZG93Lm1zSW5kZXhlZERCIHx8d2luZG93LnNoaW1JbmRleGVkREI7CiAgICAgICAgCiAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigidG9kb0RhdGFiYXNlIiwgMSk7CiAgICAgICAgICAgICAgCiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRhYmFzZSB0ZXN0IGNyZWF0aW9uIGVycm9yIik7CiAgICAgIH0KCiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoIm5vdGVzIix7a2V5UGF0aCA6ImlkIiwgIGF1dG9JbmNyZW1lbnQ6dHJ1ZX0pOwogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsJ25vdGUubGFiZWxUZXh0Jyx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsWydub3RlLnRleHQnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsWydub3RlLnJlbWluZGVyRGF0ZSddLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JyxbJ25vdGUucmVtaW5kZXJUaW1lJ10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgICB9OwoKCiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpeyAgIAogICAgICAgICAgCiAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oIm5vdGVzIik7ICAgICAgICAgIAogICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKICAgICAgICAgIGxldCBsYWJlbEluZGV4ID0gb2JqZWN0U3RvcmUuaW5kZXgoImxhYmVsSW5kZXgiKTsKICAgICAgICAgIAoKICAgICAgICAgIAoKICAgICAgICAgIGxldCByZXF1ZXN0ICA9IGxhYmVsSW5kZXguZ2V0QWxsKCk7CiAgICAgICAgICAKICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpewogICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXF1ZXN0LnJlc3VsdCk7CiAgICAgICAgICAgIGxldCByZXN1bHRzPSByZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvcihsZXQgciBvZiByZXN1bHRzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICBsZXQgZXhpc3RzPWZhbHNlOwogICAgICAgICAgICAgICAgc2VsZi5sYWJlbHMuZm9yRWFjaChsID0+IHsKICAgICAgICAgICAgICAgICBpZihyLm5vdGUubGFiZWxUZXh0PT1sKXsKICAgICAgICAgICAgICAgICAgZXhpc3RzPXRydWU7CiAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmKGV4aXN0cz09ZmFsc2UpewogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgc2VsZi5sYWJlbHMucHVzaChyLm5vdGUubGFiZWxUZXh0KTsKICAgICAgICAgICAgICAgIH0gICAKCiAgICAgICAgICAgIH0gICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgIH07CgogICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgICB9OwogICAgICAgIH0gICAgICAgICAgIAogICAgfSwKCiAgICAKICAgIGxvYWRUYWdzKCl7CiAgICAgICAgCiAgICAgICAgdGhpcy5lbmFibGVBZGQ9ZmFsc2U7CiAgICAgICAgdGhpcy5ub3Rlcz1bXTsKICAgICAgICB0aGlzLmxvYWRMYWJlbHMoKTsKCiAgICAgIAogICAgICAgIAogICAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8d2luZG93LndlYmtpdEluZGV4ZWREQiB8fHdpbmRvdy5tc0luZGV4ZWREQiB8fHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICAgIAogICAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigidG9kb0RhdGFiYXNlIiwgMSk7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgY29uc29sZS5sb2coImRhdGFiYXNlIHRlc3QgY3JlYXRpb24gZXJyb3IiKTsKICAgICAgICB9CgogICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoIm5vdGVzIix7a2V5UGF0aCA6ImlkIiwgIGF1dG9JbmNyZW1lbnQ6dHJ1ZX0pOwogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsJ25vdGUubGFiZWxUZXh0Jyx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsWydub3RlLnRleHQnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsWydub3RlLnJlbWluZGVyRGF0ZSddLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JyxbJ25vdGUucmVtaW5kZXJUaW1lJ10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgICB9OwoKCiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpeyAgIAogICAgICAgICAgCiAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oIm5vdGVzIik7ICAgICAgICAgIAogICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKICAgICAgICAgIGxldCBsYWJlbEluZGV4ID0gb2JqZWN0U3RvcmUuaW5kZXgoImxhYmVsSW5kZXgiKTsKICAgICAgICAgIAoKICAgICAgICAgIGxldCByZXF1ZXN0PScnOwogICAgICAgICAgaWYoc2VsZi5zZWxlY3RlZExhYmVsPT0nQWxsIG5vdGVzJyl7CiAgICAgICAgICAgIHJlcXVlc3QgPSBsYWJlbEluZGV4LmdldEFsbCgpOwoKICAgICAgICAgIH0KICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgIHJlcXVlc3QgPSBsYWJlbEluZGV4LmdldEFsbChzZWxmLnNlbGVjdGVkTGFiZWwpOwogICAgICAgICAgIAogICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpewogICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXF1ZXN0LnJlc3VsdCk7CiAgICAgICAgICAgIGxldCByZXN1bHRzPSByZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7CiAgICAgICAgICAgIGZvcihsZXQgciBvZiByZXN1bHRzKXsKICAgICAgICAgICAgICBsZXQgcmVzdWx0Tm90ZT17aWQ6ci5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDpyLm5vdGUudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0OnIubm90ZS5sYWJlbFRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsQ29sb3VyOnIubm90ZS5sYWJlbENvbG91ciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtaW5kZXJEYXRlOnIubm90ZS5yZW1pbmRlckRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbWluZGVyVGltZTpyLm5vdGUucmVtaW5kZXJUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5RGF0ZVRpbWU6ci5ub3RlLmRpc3BsYXlEYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21wbGV0ZWQ6ci5ub3RlLmlzQ29tcGxldGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9wdXNoIG5vdGUgaW50byBub3Rlc1tdCiAgICAgICAgICAgICAgICBzZWxmLm5vdGVzLnB1c2gocmVzdWx0Tm90ZSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLm5vdGVzKTsKICAgICAgICAgICAgfSAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgfTsKCiAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZGIuY2xvc2UoKTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICBjb25zb2xlLmxvZygnVEFHUycpOwogICAgfSwKCiAgICB1bmxvYWRUYWdzKCl7CiAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgdGhpcy5sYWJlbHM9W107CiAgICAgIHRoaXMuc2VsZWN0ZWRMYWJlbD0nQWxsIG5vdGVzJzsKICAgIH0sCgogICAgLy9jb3VudHMgaG93IG1hbnkgcmVtaW5kZXJzIGV4cGlyZWQKICAgIGxvYWROb3RpZmljYXRpb25zKCl7CiAgICAgIHRoaXMubm90aWZpY2F0aW9ucz0wOwogICAgICAKICAgICAgCiAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHx3aW5kb3cubXNJbmRleGVkREIgfHx3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgICAKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLCAxKTsKICAgICAgICAKICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKXsKICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRhYmFzZSB0ZXN0IGNyZWF0aW9uIGVycm9yIik7CiAgICAgIH0KCiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLHtrZXlQYXRoIDoiaWQiLCAgYXV0b0luY3JlbWVudDp0cnVlfSk7CiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsJ25vdGUubGFiZWxUZXh0Jyx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLFsnbm90ZS50ZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JyxbJ25vdGUucmVtaW5kZXJEYXRlJ10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JyxbJ25vdGUucmVtaW5kZXJUaW1lJ10se3VuaXF1ZTpmYWxzZX0pOyAgCgogICAgICAgICAgY29uc29sZS5sb2coIk9iamVjdCBzdG9yZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4uLiIpOwogICAgICB9OwoKCiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpeyAgIAogICAgICAgICAgCiAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oIm5vdGVzIik7ICAgICAgICAgIAogICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKICAgICAgICAgIGxldCBkYXRlSW5kZXggPSBvYmplY3RTdG9yZS5pbmRleCgiZGF0ZUluZGV4Iik7CiAgICAgICAgICBsZXQgcmVxdWVzdD0nJzsKICAgICAgICAgIHJlcXVlc3QgPSBkYXRlSW5kZXguZ2V0QWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVxdWVzdC5yZXN1bHQpOwogICAgICAgICAgICBsZXQgcmVzdWx0cz0gcmVxdWVzdC5yZXN1bHQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMpOwogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBub3cgPSBub3cuZ2V0VGltZSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IobGV0IHIgb2YgcmVzdWx0cyl7CgogICAgICAgICAgICAgLy9yZWNvbnN0cnVjdCBkYXRlIGFuZCB0aW1lIHRvIGNvbXBhcmUgaXQgd2l0aCBjdXJyZW50IGRhdGUgYW5kIHRpbWUgICAKICAgICAgICAgICAgIGxldCBkYXRlVG9TdHJpbmc9ci5ub3RlLnJlbWluZGVyRGF0ZS50b1N0cmluZygpOwogICAgICAgICAgICAgbGV0IGFjdHVhbERhdGUxPWRhdGVUb1N0cmluZy5zcGxpdCgnICcpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIGFjdHVhbERhdGUxPWFjdHVhbERhdGUxWzBdKycgJythY3R1YWxEYXRlMVsxXSsnICcrYWN0dWFsRGF0ZTFbMl0rJyAnK2FjdHVhbERhdGUxWzNdOwoKICAgICAgICAgICAgIGxldCB0aW1lVG9TdHJpbmc9ci5ub3RlLnJlbWluZGVyVGltZS50b1N0cmluZygpOwogICAgICAgICAgICAgbGV0IGFjdHVhbFRpbWUxPXRpbWVUb1N0cmluZy5zcGxpdCgnICcpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIGFjdHVhbFRpbWUxPWFjdHVhbFRpbWUxWzRdKycgJythY3R1YWxUaW1lMVs1XSsnICcrYWN0dWFsVGltZTFbNl07CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGxldCBhY3R1YWxEYXRlVGltZT1hY3R1YWxEYXRlMSsnICcrYWN0dWFsVGltZTE7CiAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY3R1YWxEYXRlVGltZSk7CgogICAgICAgICAgICAgLy9yZWNvbnZlcnQgdG8gRGF0ZSBmb3JtYXQKICAgICAgICAgICAgIGFjdHVhbERhdGVUaW1lPW5ldyBEYXRlKGFjdHVhbERhdGVUaW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIC8vY29tcGFyZSB3aXRoIGN1cnJlbnQgRGF0ZSBhbmQgVGltZQogICAgICAgICAgICAgLy9pZiByZW1pbmRlciBoYXMgbm90IGV4cGlyZWQsIHB1c2ggbm90ZSBpbnRvIG5vdGVzW10KICAgICAgICAgICAgIGlmKGFjdHVhbERhdGVUaW1lLmdldFRpbWUoKTxub3cpewogICAgICAgICAgICAgIHNlbGYubm90aWZpY2F0aW9ucysrOwogICAgICAgICAgICAgfQogICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgIH07CgogICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgCiAgICB9LAoKICAgIGxvYWRBY3RpdmVSZW1pbmRlcnMoKXsKICAgICAgdGhpcy5hY3RpdmVSZW1pbmRlcnM9MDsgIAogICAgICB0aGlzLnVwY29taW5nUmVtaW5kZXJzPTA7CiAgICAgIHRoaXMubm90ZXM9W107CiAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHx3aW5kb3cubXNJbmRleGVkREIgfHx3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgICAKICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKCJ0b2RvRGF0YWJhc2UiLCAxKTsKICAgICAgICAKICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKXsKICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRhYmFzZSB0ZXN0IGNyZWF0aW9uIGVycm9yIik7CiAgICAgIH0KCiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLHtrZXlQYXRoIDoiaWQiLCAgYXV0b0luY3JlbWVudDp0cnVlfSk7CiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsJ25vdGUubGFiZWxUZXh0Jyx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLFsnbm90ZS50ZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZGF0ZUluZGV4JyxbJ25vdGUucmVtaW5kZXJEYXRlJ10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JyxbJ25vdGUucmVtaW5kZXJUaW1lJ10se3VuaXF1ZTpmYWxzZX0pOyAgCgogICAgICAgICAgY29uc29sZS5sb2coIk9iamVjdCBzdG9yZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4uLiIpOwogICAgICB9OwoKCiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpeyAgIAogICAgICAgICAgCiAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oIm5vdGVzIik7ICAgICAgICAgIAogICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKICAgICAgICAgIGxldCBkYXRlSW5kZXggPSBvYmplY3RTdG9yZS5pbmRleCgiZGF0ZUluZGV4Iik7CiAgICAgICAgICBsZXQgcmVxdWVzdD0nJzsKICAgICAgICAgIHJlcXVlc3QgPSBkYXRlSW5kZXguZ2V0QWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVxdWVzdC5yZXN1bHQpOwogICAgICAgICAgICBsZXQgcmVzdWx0cz0gcmVxdWVzdC5yZXN1bHQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMpOwogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBub3cgPSBub3cuZ2V0VGltZSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IobGV0IHIgb2YgcmVzdWx0cyl7CgogICAgICAgICAgICAgLy9yZWNvbnN0cnVjdCBkYXRlIGFuZCB0aW1lIHRvIGNvbXBhcmUgaXQgd2l0aCBjdXJyZW50IGRhdGUgYW5kIHRpbWUgICAKICAgICAgICAgICAgIGxldCBkYXRlVG9TdHJpbmc9ci5ub3RlLnJlbWluZGVyRGF0ZS50b1N0cmluZygpOwogICAgICAgICAgICAgbGV0IGFjdHVhbERhdGUxPWRhdGVUb1N0cmluZy5zcGxpdCgnICcpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIGFjdHVhbERhdGUxPWFjdHVhbERhdGUxWzBdKycgJythY3R1YWxEYXRlMVsxXSsnICcrYWN0dWFsRGF0ZTFbMl0rJyAnK2FjdHVhbERhdGUxWzNdOwoKICAgICAgICAgICAgIGxldCB0aW1lVG9TdHJpbmc9ci5ub3RlLnJlbWluZGVyVGltZS50b1N0cmluZygpOwogICAgICAgICAgICAgbGV0IGFjdHVhbFRpbWUxPXRpbWVUb1N0cmluZy5zcGxpdCgnICcpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIGFjdHVhbFRpbWUxPWFjdHVhbFRpbWUxWzRdKycgJythY3R1YWxUaW1lMVs1XSsnICcrYWN0dWFsVGltZTFbNl07CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGxldCBhY3R1YWxEYXRlVGltZT1hY3R1YWxEYXRlMSsnICcrYWN0dWFsVGltZTE7CiAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY3R1YWxEYXRlVGltZSk7CgogICAgICAgICAgICAgLy9yZWNvbnZlcnQgdG8gRGF0ZSBmb3JtYXQKICAgICAgICAgICAgIGFjdHVhbERhdGVUaW1lPW5ldyBEYXRlKGFjdHVhbERhdGVUaW1lKTsKCiAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgbGV0IHJlc3VsdE5vdGU9e2lkOnIuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ci5ub3RlLnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDpyLm5vdGUubGFiZWxUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbENvbG91cjpyLm5vdGUubGFiZWxDb2xvdXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbWluZGVyRGF0ZTpyLm5vdGUucmVtaW5kZXJEYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1pbmRlclRpbWU6ci5ub3RlLnJlbWluZGVyVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheURhdGVUaW1lOnIubm90ZS5kaXNwbGF5RGF0ZVRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkOnIubm90ZS5pc0NvbXBsZXRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgLy9jb21wYXJlIHdpdGggY3VycmVudCBEYXRlIGFuZCBUaW1lCiAgICAgICAgICAgICAvL2lmIHJlbWluZGVyIGhhcyBub3QgZXhwaXJlZCwgcHVzaCBub3RlIGludG8gbm90ZXNbXQogICAgICAgICAgICAgaWYoYWN0dWFsRGF0ZVRpbWUuZ2V0VGltZSgpPG5vdyl7CiAgICAgICAgICAgICAgc2VsZi5ub3Rlcy5wdXNoKHJlc3VsdE5vdGUpOwogICAgICAgICAgICAgIHNlbGYuYWN0aXZlUmVtaW5kZXJzKys7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5ub3Rlcyk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgIHNlbGYudXBjb21pbmdSZW1pbmRlcnMrKzsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgfTsKCiAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZGIuY2xvc2UoKTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAKICAgIH0sCgoKCiAgICBsb2FkVXBjb21pbmdSZW1pbmRlcnMoKXsKCiAgICAgIHRoaXMubm90ZXM9W107CiAgICAgIHRoaXMudXBjb21pbmdSZW1pbmRlcnM9MDsKICAgICAgdGhpcy5hY3RpdmVSZW1pbmRlcnM9MDsgIAogICAgICAKICAgICAgbGV0IHNlbGY9dGhpczsKICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8d2luZG93LndlYmtpdEluZGV4ZWREQiB8fHdpbmRvdy5tc0luZGV4ZWREQiB8fHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICAgIAogICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oInRvZG9EYXRhYmFzZSIsIDEpOwogICAgICAgIAogICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpewogICAgICAgICAgY29uc29sZS5sb2coImRhdGFiYXNlIHRlc3QgY3JlYXRpb24gZXJyb3IiKTsKICAgICAgfQoKICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCJub3RlcyIse2tleVBhdGggOiJpZCIsICBhdXRvSW5jcmVtZW50OnRydWV9KTsKICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4Jywnbm90ZS5sYWJlbFRleHQnLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25vdGVJbmRleCcsWydub3RlLnRleHQnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdkYXRlSW5kZXgnLFsnbm90ZS5yZW1pbmRlckRhdGUnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lSW5kZXgnLFsnbm90ZS5yZW1pbmRlclRpbWUnXSx7dW5pcXVlOmZhbHNlfSk7ICAKCiAgICAgICAgICBjb25zb2xlLmxvZygiT2JqZWN0IHN0b3JlIENyZWF0ZWQgU3VjY2Vzc2Z1bGx5Li4uIik7CiAgICAgIH07CgoKICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCl7ICAgCiAgICAgICAgICAKICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICBsZXQgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbigibm90ZXMiKTsgICAgICAgICAgCiAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwogICAgICAgICAgbGV0IGRhdGVJbmRleCA9IG9iamVjdFN0b3JlLmluZGV4KCJkYXRlSW5kZXgiKTsKICAgICAgICAgIGxldCByZXF1ZXN0PScnOwogICAgICAgICAgcmVxdWVzdCA9IGRhdGVJbmRleC5nZXRBbGwoKTsKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpewogICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXF1ZXN0LnJlc3VsdCk7CiAgICAgICAgICAgIGxldCByZXN1bHRzPSByZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIG5vdyA9IG5vdy5nZXRUaW1lKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvcihsZXQgciBvZiByZXN1bHRzKXsKCiAgICAgICAgICAgICAvL3JlY29uc3RydWN0IGRhdGUgYW5kIHRpbWUgdG8gY29tcGFyZSBpdCB3aXRoIGN1cnJlbnQgZGF0ZSBhbmQgdGltZSAgIAogICAgICAgICAgICAgbGV0IGRhdGVUb1N0cmluZz1yLm5vdGUucmVtaW5kZXJEYXRlLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICBsZXQgYWN0dWFsRGF0ZTE9ZGF0ZVRvU3RyaW5nLnNwbGl0KCcgJyk7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgYWN0dWFsRGF0ZTE9YWN0dWFsRGF0ZTFbMF0rJyAnK2FjdHVhbERhdGUxWzFdKycgJythY3R1YWxEYXRlMVsyXSsnICcrYWN0dWFsRGF0ZTFbM107CgogICAgICAgICAgICAgbGV0IHRpbWVUb1N0cmluZz1yLm5vdGUucmVtaW5kZXJUaW1lLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICBsZXQgYWN0dWFsVGltZTE9dGltZVRvU3RyaW5nLnNwbGl0KCcgJyk7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgYWN0dWFsVGltZTE9YWN0dWFsVGltZTFbNF0rJyAnK2FjdHVhbFRpbWUxWzVdKycgJythY3R1YWxUaW1lMVs2XTsKICAgICAgICAgICAgIAogICAgICAgICAgICAgbGV0IGFjdHVhbERhdGVUaW1lPWFjdHVhbERhdGUxKycgJythY3R1YWxUaW1lMTsKICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFjdHVhbERhdGVUaW1lKTsKCiAgICAgICAgICAgICAvL3JlY29udmVydCB0byBEYXRlIGZvcm1hdAogICAgICAgICAgICAgYWN0dWFsRGF0ZVRpbWU9bmV3IERhdGUoYWN0dWFsRGF0ZVRpbWUpOwoKICAgICAgICAgICAgIAoKICAgICAgICAgICAgICBsZXQgcmVzdWx0Tm90ZT17aWQ6ci5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDpyLm5vdGUudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0OnIubm90ZS5sYWJlbFRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsQ29sb3VyOnIubm90ZS5sYWJlbENvbG91ciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtaW5kZXJEYXRlOnIubm90ZS5yZW1pbmRlckRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbWluZGVyVGltZTpyLm5vdGUucmVtaW5kZXJUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5RGF0ZVRpbWU6ci5ub3RlLmRpc3BsYXlEYXRlVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21wbGV0ZWQ6ci5ub3RlLmlzQ29tcGxldGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAvL2NvbXBhcmUgd2l0aCBjdXJyZW50IERhdGUgYW5kIFRpbWUKICAgICAgICAgICAgIC8vaWYgcmVtaW5kZXIgaGFzIGV4cGlyZWQsIHB1c2ggbm90ZSBpbnRvIG5vdGVzW10KICAgICAgICAgICAgIGlmKGFjdHVhbERhdGVUaW1lLmdldFRpbWUoKT5ub3cpewogICAgICAgICAgICAgIHNlbGYubm90ZXMucHVzaChyZXN1bHROb3RlKTsKICAgICAgICAgICAgICBzZWxmLnVwY29taW5nUmVtaW5kZXJzKys7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5ub3Rlcyk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgIHNlbGYuYWN0aXZlUmVtaW5kZXJzKys7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgIH07CgogICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGRiLmNsb3NlKCk7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgLy8KICAgIH0sCgogICAgdG9nZ2xlUmVtaW5kZXJzKG4pewogICAgICAKICAgICAgaWYobj09MSl7CiAgICAgICAgdGhpcy5pc0FjdGl2ZVJlbWluZGVyPXRydWU7CiAgICAgICAgdGhpcy5pc1VwY29taW5nUmVtaW5kZXI9ZmFsc2U7CiAgICAgICAgdGhpcy5sb2FkQWN0aXZlUmVtaW5kZXJzKCk7CiAgICAgIH0KICAgICAgZWxzZXsKICAgICAgICB0aGlzLmlzQWN0aXZlUmVtaW5kZXI9ZmFsc2U7CiAgICAgICAgdGhpcy5pc1VwY29taW5nUmVtaW5kZXI9dHJ1ZTsKICAgICAgICB0aGlzLmxvYWRVcGNvbWluZ1JlbWluZGVycygpOwogICAgICB9CgogICAgICAKCiAgICB9LAoKICAgIC8vbWFya3Mgbm90ZSBhcyBjb21wbGV0ZWQKICAgIG1hcmtDb21wbGV0ZWQobm90ZUlkKXsKICAgICAgLy8KICAgICAgCgogICAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgICAgY29uc3QgaW5kZXhlZERCID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8d2luZG93LndlYmtpdEluZGV4ZWREQiB8fHdpbmRvdy5tc0luZGV4ZWREQiB8fHdpbmRvdy5zaGltSW5kZXhlZERCOwogICAgICAgIAogICAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigidG9kb0RhdGFiYXNlIiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXF1ZXN0IGVycm9yIC0gbWFya0NvbXBsZXRlZCIpOwogICAgICAgIH0KCiAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgibm90ZXMiLHtrZXlQYXRoIDoiaWQiLCAgYXV0b0luY3JlbWVudDp0cnVlfSk7CiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdsYWJlbEluZGV4JyxbJ25vdGUubGFiZWxUZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAgCiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdub3RlSW5kZXgnLFsnbm90ZS50ZXh0J10se3VuaXF1ZTpmYWxzZX0pOyAKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2RhdGVJbmRleCcsWydub3RlLnJlbWluZGVyRGF0ZSddLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgndGltZUluZGV4JyxbJ25vdGUucmVtaW5kZXJUaW1lJ10se3VuaXF1ZTpmYWxzZX0pOyAgIAogICAgICAgICAgICAKICAgICAgICAgICAgY29uc29sZS5sb2coIk9iamVjdCBzdG9yZSBDcmVhdGVkIFN1Y2Nlc3NmdWxseS4uLiIpOwogICAgICAgIH07CiAgICAgIAogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KXsgICAgICAgCiAgICAgICAgICB2YXIgZGIgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oIm5vdGVzIiwicmVhZHdyaXRlIik7CiAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCJub3RlcyIpOwoKICAgICAgICAgIC8vZ2V0IHJlY29yZCB0byBtb2RpZnkKICAgICAgICAgIGNvbnN0IHJlY29yZFJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXQobm90ZUlkKTsKCiAgICAgICAgICByZWNvcmRSZXF1ZXN0Lm9uc3VjY2Vzcz1mdW5jdGlvbigpewoKICAgICAgICAgICAgbGV0IHJlY29yZCA9IHJlY29yZFJlcXVlc3QucmVzdWx0OwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZWNvcmQpOyAgICAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgLy8gcmVjb3JkLm5vdGUudGV4dCA9IHRleHQ7CiAgICAgICAgICAgIC8vIHJlY29yZC5ub3RlLnJlbWluZGVyRGF0ZT1yZW1pbmRlckRhdGU7CiAgICAgICAgICAgIC8vIHJlY29yZC5ub3RlLnJlbWluZGVyVGltZT1yZW1pbmRlclRpbWU7CiAgICAgICAgICAgIC8vIHJlY29yZC5ub3RlLmRpc3BsYXlEYXRlVGltZT1kaXNwbGF5RGF0ZVRpbWU7ICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHJlY29yZC5ub3RlLmxhYmVsVGV4dD1sYWJlbFRleHQ7CiAgICAgICAgICAgIC8vIHJlY29yZC5ub3RlLmxhYmVsQ29sb3VyPWxhYmVsQ29sb3VyOwogICAgICAgICAgICByZWNvcmQubm90ZS5pc0NvbXBsZXRlZD10cnVlOwoKCiAgICAgICAgICAgIC8vc2F2ZSBuZXcgdmFsdWVzIHRvIGluZGV4ZWREQgogICAgICAgICAgICBjb25zdCB1cGRhdGVSZXF1ZXN0PW9iamVjdFN0b3JlLnB1dChyZWNvcmQpOwoKICAgICAgICAgICAgdXBkYXRlUmVxdWVzdC5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVjb3JkIHVwZGF0ZWQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgIH0KICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAKICAgICAgICAgICAgLy9zaG93IGFsbCBub3RlcyAoZmlsdGVyZWQgYnkgdGFnIG9yIG5vdCkKICAgICAgICAgICAgaWYoc2VsZi5vcHRpb249PTEpewogICAgICAgICAgICAgIGlmKHNlbGYuaXNUYWdTZWFyY2gpeyAgICAKICAgICAgICAgICAgICAgIGlmKHNlbGYuc2VsZWN0ZWRMYWJlbCE9J0FsbCBub3RlcycpewogICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkTGFiZWw9c2VsZi5zZWxlY3RlZE5vdGVbMF0ubGFiZWxUZXh0OyAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICBzZWxmLmxvYWRUYWdzKCk7ICAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHNlbGYubG9hZERhdGEoKTsgIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL3Nob3cgbm90ZXMgd2l0aCByZW1pbmRlcnMKICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5vcHRpb249PTIpewogICAgICAgICAgICAgICBpZihzZWxmLmlzQWN0aXZlUmVtaW5kZXIpewogICAgICAgICAgICAgICAgc2VsZi5sb2FkQWN0aXZlUmVtaW5kZXJzKCk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHNlbGYubG9hZFVwY29taW5nUmVtaW5kZXJzKCk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZGIuY2xvc2UoKTsKICAgICAgICAgICAgc2VsZi5pc05vdGVPcHRpb25zPWZhbHNlOwogICAgICAgICAgfTsKCgogICAgICAgICAgfTsKCgoKCiAgICB9LAoKICAgIG1hcmtJbmNvbXBsZXRlKG5vdGVJZCl7CiAgICAgIC8vCiAgICAgICBsZXQgc2VsZj10aGlzOwogICAgICAgIGNvbnN0IGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHx3aW5kb3cubXNJbmRleGVkREIgfHx3aW5kb3cuc2hpbUluZGV4ZWREQjsKICAgICAgICAKICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oInRvZG9EYXRhYmFzZSIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpewogICAgICAgICAgICBjb25zb2xlLmxvZygicmVxdWVzdCBlcnJvciAtIG1hcmtDb21wbGV0ZWQiKTsKICAgICAgICB9CgogICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoIm5vdGVzIix7a2V5UGF0aCA6ImlkIiwgIGF1dG9JbmNyZW1lbnQ6dHJ1ZX0pOwogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbGFiZWxJbmRleCcsWydub3RlLmxhYmVsVGV4dCddLHt1bmlxdWU6ZmFsc2V9KTsgIAogICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbm90ZUluZGV4JyxbJ25vdGUudGV4dCddLHt1bmlxdWU6ZmFsc2V9KTsgCiAgICAgICAgICAgIG9iamVjdFN0b3JlLmNyZWF0ZUluZGV4KCdkYXRlSW5kZXgnLFsnbm90ZS5yZW1pbmRlckRhdGUnXSx7dW5pcXVlOmZhbHNlfSk7ICAKICAgICAgICAgICAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVJbmRleCcsWydub3RlLnJlbWluZGVyVGltZSddLHt1bmlxdWU6ZmFsc2V9KTsgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJPYmplY3Qgc3RvcmUgQ3JlYXRlZCBTdWNjZXNzZnVsbHkuLi4iKTsKICAgICAgICB9OwogICAgICAKICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCl7ICAgICAgIAogICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCJub3RlcyIsInJlYWR3cml0ZSIpOwogICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgibm90ZXMiKTsKCiAgICAgICAgICAvL2dldCByZWNvcmQgdG8gbW9kaWZ5CiAgICAgICAgICBjb25zdCByZWNvcmRSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZ2V0KG5vdGVJZCk7CgogICAgICAgICAgcmVjb3JkUmVxdWVzdC5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXsKCiAgICAgICAgICAgIGxldCByZWNvcmQgPSByZWNvcmRSZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVjb3JkKTsgICAgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJlY29yZC5ub3RlLmlzQ29tcGxldGVkPWZhbHNlOwoKCiAgICAgICAgICAgIC8vc2F2ZSBuZXcgdmFsdWVzIHRvIGluZGV4ZWREQgogICAgICAgICAgICBjb25zdCB1cGRhdGVSZXF1ZXN0PW9iamVjdFN0b3JlLnB1dChyZWNvcmQpOwoKICAgICAgICAgICAgdXBkYXRlUmVxdWVzdC5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVjb3JkIHVwZGF0ZWQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgIH0KICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgLy9zaG93IGFsbCBub3RlcyAoZmlsdGVyZWQgYnkgdGFnIG9yIG5vdCkKICAgICAgICAgICAgaWYoc2VsZi5vcHRpb249PTEpewogICAgICAgICAgICAgIGlmKHNlbGYuaXNUYWdTZWFyY2gpeyAgICAKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYuc2VsZWN0ZWRMYWJlbCk7ICAgICAgCiAgICAgICAgICAgICAgICBpZihzZWxmLnNlbGVjdGVkTGFiZWwhPSdBbGwgbm90ZXMnKXsKICAgICAgICAgICAgICAgICAgLy8gc2VsZi5zZWxlY3RlZExhYmVsPXNlbGYubGFiZWxUZXh0OyAKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VsZi5zZWxlY3RlZExhYmVsKTsgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0gIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgc2VsZi5sb2FkVGFncygpOyAgCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBzZWxmLmxvYWREYXRhKCk7ICAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9zaG93IG5vdGVzIHdpdGggcmVtaW5kZXJzCiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYub3B0aW9uPT0yKXsKICAgICAgICAgICAgICAgaWYoc2VsZi5pc0FjdGl2ZVJlbWluZGVyKXsKICAgICAgICAgICAgICAgIHNlbGYubG9hZEFjdGl2ZVJlbWluZGVycygpOwogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBzZWxmLmxvYWRVcGNvbWluZ1JlbWluZGVycygpOwogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBkYi5jbG9zZSgpOwogICAgICAgICAgICBzZWxmLmlzTm90ZU9wdGlvbnM9ZmFsc2U7CiAgICAgICAgICB9OwoKCiAgICAgICAgICB9OwogICAgfSwKCiAgICB0b2dnbGVEcmFnZ2FibGUoKXsKICAgICAgdGhpcy5pc0RyYWdnYWJsZT0hdGhpcy5pc0RyYWdnYWJsZTsKICAgIH0KCgogIH0KCn0K"},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";AAyiBA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;;;AAIA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;;;;AAKA;;;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;;;AAIA;AACA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;AAGA;;;;;AAKA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA","file":"Main.vue","sourceRoot":"src/components","sourcesContent":["\n\n\n\n<template>\n  <div class='container'>\n    <div class='container'>\n      <div class=\"row shadow top2\" id=\"header\">\n        <a href=\"/\"><img  class=\"logo\" src=\"../assets/logo.png\" alt=\"logo\">      </a>\n      </div>\n\n      \n      <h1 class=\"row\"><span class='section-title'></span></h1>\n  \n      <div class=\"row top2 mainContainer background-whitesmoke  py-0 py-md-2\" id=\"topmenu\">\n          <button v-if='option==1' class=\"col-6 col-md-1 m-md-1 btn btn-primary rounded-0\" @click='setOption(1)'><i class=\"far fa-sticky-note\"></i></button>\n          <button v-if='option!=1' class=\"col-6 col-md-1 m-md-1 btn btn-light rounded-0\" @click='setOption(1)'><i class=\"far fa-sticky-note\"></i></button>\n\n          <button v-if='option==2 && notifications==0' class=\"col-6 col-md-1 m-md-1  btn btn-primary rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"></i></button>\n          <button v-if='option!=2 && notifications==0' class=\"col-6 col-md-1 m-md-1 btn btn-light rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"></i></button>\n  \n          <button v-if='option==2 && notifications>0' class=\"col-6 col-md-1 m-md-1 btn btn-primary rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"> </i> <small class='notification left1'> <b>({{notifications}})</b></small></button> \n          <button v-if='option!=2 && notifications>0' class=\"col-6 col-md-1 m-md-1 btn btn-light rounded-0\" @click='setOption(2)'><i class=\"fas fa-bell\"> </i> <small class='notification left1'> <b>({{notifications}})</b></small></button>  \n          \n      </div>\n  \n  \n     <div v-if=\"option==1\"  class=\"row top2 mainContainer\">\n        <button class=\"btn btn-primary2 fas fa-plus \" @click='addNew'></button>         \n        <button v-if=\"isTagSearch==false\"  class=\"left1 btn black \" @click=\"toggleTagSearch\"><i class=\"fas fa-tag\"></i> group</button>         \n        <button v-if=\"isTagSearch\"  class=\"left1 btn btn-primary2   rounded-0 \" @click=\"toggleTagSearch\"><i class=\"fas fa-tag\"></i> group</button>                               \n     </div> \n\n     <div class=\"row\">\n        <button v-if=\"isDraggable && !isTagSearch\" @click=\"toggleDraggable\" class=\"btn  left1  primary\"><i class=\"fas fa-sort\"></i></button> \n        <button v-if=\"!isDraggable && !isTagSearch\" @click=\"toggleDraggable\" class=\"btn left1  btn  disabled\"><i class=\"fas fa-sort\"></i></button>  \n      </div> \n  \n     \n  \n     <div v-if=\"option==1 && enableAdd\"  class=\"row top1 mainContainer\">\n        <input v-if='enableAdd' class=\"col-md-10 col-12 black\"  maxlength=\"70\" type=\"text\" ref=\"newNoteInput\">  \n    \n        <button v-if=\"!enabledLabel\" class=\"col-12 col-md btn \" @click='toggleLabel' ><i class=\"fas fa-tag\"></i></button>              \n        <button v-if=\"!enabledNotification\" class=\"col-12 col-md btn \" @click='toggleNotification' ><i class=\"fas fa-bell\"></i></button>\n        \n        <transition>\n          <div v-if='enabledLabel' class=\"modalContainer centre\">\n            <div  class=\"col-12 modal1 \">\n  \n              <h2 class=\"col-12 black\"><i class=\"fas fa-tag\"></i> </h2>  \n              \n              <div class=\"col-12 top1 black\"><small><b>Add label</b></small></div>\n              <input class=\"col-10 top1\" type=\"text\" id=\"input_label\"\n              :style=\"{ color: this.colour}\"\n              >   \n              <v-swatches class=\"top1\"\n              v-model=\"colour\"                              \n              shapes=\"circles\"\n                >\n              </v-swatches>\n              <button class=\"col-10 top1 btn btn-light\" @click='addLabel'>ok</button>\n              <button class=\"col-10 top1  btn black \" @click='toggleLabel'>cancel</button>\n                         \n            </div>\n          </div>\n        </transition>\n  \n        <div class=\"col-12 top1\">                  \n            <button v-if=\"labelText!=''\" class=\"btn btn-light fas fa-tag\" :style=\"{color: labelColour}\" @click='deleteLabel()'><small> {{labelText}} -</small></button>\n            <button v-if=\"reminderDate!=null\" class=\"btn darkcyan left1\" @click=\"deleteReminder\" :title=displayDateTime> <i class=\"fas fa-bell\"><small> {{displayDateTime}}  <i class=\"fas fa-trash-alt\"></i></small></i></button>          \n            \n        </div>\n  \n        \n  \n         <transition>\n            <div v-if='enabledNotification' class=\"modalContainer\">\n              <div  class=\"col-12 centre modal1\">\n                <h2 class=\"col-12 black\"><i class=\"fas fa-bell\"></i> </h2> \n                <div class=\"col-12 black\"><small><b>Add Reminder</b></small></div>\n  \n                \n                  <div class=\"col\">\n                    <date-picker id=\"datePicker\"\n                      v-model=\"reminderDate\"\n                      type=\"date\"\n                      format='DD-MM-YYYY'\n                      placeholder=\"Reminder date\"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      >\n                        \n                    </date-picker>\n                  </div>\n  \n                  <div v-if=\"reminderDate!=null\" class=\"col top2\" >\n  \n                    <!-- time picker -->\n                    <date-picker id=\"timePicker\"\n                      v-model=\"reminderTime\"\n                      type=\"time\"\n                      format='HH:mm'\n                      placeholder=\"Reminder time \"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      :clearable=true\n    \n                      :time-picker-options=\"{\n                        start: '00:00',\n                        step: '00:30',\n                        end: '23:30',\n                      }\"\n                      >    \n                    </date-picker>\n  \n                    <!-- no time selected -->\n                    \n                  </div>   \n  \n                  <div class=\"col-12 top1  red\" v-if=\"timeNull\"><small>Please select reminder time</small></div>                       \n  \n                <button class=\"col-10 top1 btn btn-light primary\" @click='addReminder'>add</button>\n                <button class=\"col-10 top1  btn black\" @click='toggleNotification'>cancel</button>\n              </div>  \n            </div>  \n         </transition>\n        \n        <button v-if=\"!this.enabledLabel && !this.enabledNotification\" class=\"col-12 top2 btn btn-primary\" @click='saveNew'>add</button>\n        <button v-if=\"!this.enabledLabel && !this.enabledNotification\"  class=\"col-12 top2 btn btn-primary2 black\" @click='closeAdd'>cancel</button>\n     </div> \n  \n     <div v-if=\"option==1 && !enableAdd\" id=\"notesContainer\" class=\"container top1\" >\n        \n        <!-- filter by labels is off -->\n\n        \n        <span v-if=\"!isNoteOptions && !isEdit && !isTagSearch\">\n\n        \n\n          <draggable v-model=\"notes\" v-if=\"isDraggable\"\n          \n          @end=\"resort\"    \n          >\n            <div class=\"row  shadow-sm  button rounded-0  black my-2\" v-for=\"(n,index) in notes\" :key=\"index\">\n                    \n              \n              <template v-if=\"n.isCompleted==false\">                                \n                <button class=\"button_display_text btn background-primary-light left col-11 rounded-0\" >{{n.text}}  </button>\n                <button class=\"btn rounded-0 col-1 background-primary-light left text-md-right fas fa-sort\"></button>\n                            \n                <div class=\"col-12 \">\n                  <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                </div>                   \n              </template>            \n            </div>   \n         </draggable> \n        \n          <template v-if=\"!isDraggable\">\n            <div  class=\"row  shadow-sm  button rounded-0  black my-2\" v-for=\"(n,index) in notes\" :key=\"index\">\n                    \n              \n              <template v-if=\"n.isCompleted==false\">                                \n                <button class=\"button_display_text btn background-primary-light left col-11 rounded-0\" slot=\"header\" @click='toggleNoteOptions(index, n.id)' >{{n.text}}  </button>\n                <button class=\"btn rounded-0 col-1 background-primary-light text-left text-md-right fas fa-ellipsis-v\"   @click='toggleNoteOptions(index, n.id)'></button>\n                            \n                <div class=\"col-12 \">\n                  <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                </div>                   \n              </template>\n    \n              <!-- if task is completed -->\n              <template v-if=\"n.isCompleted==true\">            \n                <button class=\"button_display_text btn background-primary-light left col system rounded-0\">{{n.text}}  </button>             \n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>\n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button>              \n              </template>\n    \n    \n            </div>  \n          </template>          \n         \n        <!-- END Draggable -->\n\n         <div v-if=\"notes==''\"  class=\"row  top1\">          \n              <p class=\"left1  primary2\">No notes found</p>\n         </div> \n        </span>\n  \n  \n        <!-- filter by labels is on -->\n         <div v-if=\"!isNoteOptions && !isEdit && isTagSearch\"> \n\n          <!-- select          -->\n          <div v-if=\"notes!=''\" class=\"row sticky-top membrane2 top1\">                        \n            <i class=\"fas fa-caret-down margin-v-auto\"></i>             \n            <select v-model=\"selectedLabel\" class=\"left1\"  name=\"tagFilter\"  id=\"tagFilter\" @change=\"loadTags()\">\n               \n              <option class=\"primary\" v-for=\"(l,index) in labels\" :value=\"l\" :key=\"index\">                  \n  \n                <template v-if=\"l==''\">\n                  No label    \n                </template>\n  \n                <template v-if=\"l!=''\">\n                  {{ l }}    \n                </template>\n                 \n              </option>        \n            </select>                        \n          </div> \n  \n                 \n            <div class=\"row  shadow-sm button  black my-2 \" v-for=\"(n,index) in notes\" :key=\"index\">          \n              <template v-if=\"n.isCompleted==false\">       \n                <button class=\"col-11 button_display_text btn background-primary-light left  rounded-0\" @click='toggleNoteOptions(index, n.id)' >{{n.text}}</button>\n                <button class=\"col-1 btn rounded-0 background-primary-light text-left text-md-right fas fa-ellipsis-v\" @click='toggleNoteOptions(index, n.id)'></button>\n                <div class=\"col-12 \">\n                  <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                </div>                 \n              </template>\n\n              <template v-if=\"n.isCompleted==true\">                   \n                <button class=\"button_display_text btn background-primary-light left col system rounded-0\">{{n.text}}  </button>             \n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>\n                <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button>            \n              </template >  \n            </div>  \n\n            <div v-if=\"notes==''\"  class=\"row top1   button  black top1\">          \n              <p class=\" primary2\">No notes found</p>                         \n            </div> \n\n         </div>\n        \n  \n         <span v-if=\"isNoteOptions\">\n            <div class=\"row  shadow  button  black top1\">\n              <!-- <button class=\"btn background-primary-light left col-12 black noteTextButton\" @click='toggleNoteOptions(noteIndex,noteId)'> {{notes[noteIndex].text}}</button> -->\n              <button class=\"btn col-12 text-right  fas fa-ellipsis-v\" @click='toggleNoteOptions(noteIndex,noteId)'></button>\n\n              <button class=\"btn green background-green rounded-0 col-12   top1\" @click='markCompleted(noteId)' ><i class=\"fas fa-check-double\"></i></button>\n              <button class=\"btn primary background-light rounded-0 col-12  black\" @click='toggleEdit' ><i class=\"far fa-edit\"></i></button>            \n              <button class=\"btn rounded-0 col-12\" @click='deleteNote(noteId)' ><i class=\"fa fa-trash\"></i></button>                                        \n            </div>  \n          </span> \n  \n          <span v-if=\"isEdit\">\n            <div class=\"row  button  black top1\">\n              <input  class=\"col-10 black\" id=\"input_edit\" type=\"text\" :value='notes[noteIndex].text'>             \n  \n               <button v-if=\"!enabledLabel\" class=\"col-12 col-md btn \" @click=\"toggleLabel\" ><i class=\"fas fa-tag\"></i></button>            \n               <button v-if=\"!enabledNotification\" class=\"col-12 col-md btn \" @click=\"toggleNotification\" ><i class=\"fas fa-bell\"></i></button>\n            </div>  \n  \n            <div class=\"row top1\">    \n              \n              <button v-if=\"labelText!=''\" class=\"btn btn-light fas fa-tag\" :style=\"{color: labelColour}\" @click='deleteLabel()'><small> {{labelText}} -</small></button>\n              <button v-if='reminderDate!=null' class=\"btn darkcyan left left1\" @click='deleteReminder()' ><i class=\"fas fa-bell\" :title=displayDateTime><small> {{displayDateTime}} <i class=\"fas fa-trash-alt\"></i></small> </i> </button>\n              \n            </div>  \n\n            <div class=\"row\">\n              <button class=\"btn btn-primary2  top1 col-md-2\" @click='saveEdit' >ok</button>            \n              <button class=\"btn btn primary top1 col-md-2  m-md-1\" @click='toggleEdit'>cancel</button>            \n            </div>\n          </span> \n  \n          <transition>\n  \n          <div v-if='enabledLabel' class=\"modalContainer centre\">\n            <div  class=\"col-12 modal1 \">\n  \n              <h2 class=\"col-12 black\"><i class=\"fas fa-tag\"></i> </h2>  \n              \n              <div class=\"col-12 top1 black\"><small><b>Add label</b></small></div>\n              <input class=\"col-10 top1\" type=\"text\" id=\"input_label\"\n              :style=\"{ color: this.colour}\"\n              >   \n              <v-swatches class=\"top1\"\n              v-model=\"colour\"                              \n              shapes=\"circles\"\n                >\n              </v-swatches>\n              <button class=\"col-10 top1 btn btn-light\" @click='addLabel'>ok</button>\n              <button class=\"col-10 top1  btn black \" @click='toggleLabel'>cancel</button>\n              <!-- <button class=\"btn col\">cancel</button> -->             \n            </div>\n          </div>\n        </transition>\n  \n         <transition>\n            <div v-if='enabledNotification' class=\"modalContainer\">\n              <div  class=\"col-12 centre modal1\">\n                <h2 class=\"col-12 black\"><i class=\"fas fa-bell\"></i> </h2> \n                <div class=\"col-12 black\"><small><b>Add Reminder</b></small></div>\n  \n                \n                  <div class=\"col\">\n                    <date-picker\n                      v-model=\"reminderDate\"\n                      type=\"date\"\n                      format='DD-MM-YYYY'\n                      placeholder=\"Reminder date\"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      >\n                        \n                    </date-picker>\n  \n                    \n                  </div>\n  \n                  \n                  <div  class=\"col top2\">\n                    <date-picker \n                      v-model=\"reminderTime\"\n                      type=\"time\"\n                      format='HH:mm'\n                      placeholder=\"Reminder time \"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      :clearable=true\n    \n                      :time-picker-options=\"{\n                        start: '00:00',\n                        step: '00:30',\n                        end: '23:30',\n                      }\"\n                      >\n                        \n                    </date-picker>\n\n                  </div>        \n\n                  <div class=\"col-12 top1  red\" v-if=\"timeNull\"><small>Please select reminder time</small></div>\n\n                <button class=\"col-10 top1 btn btn-light primary\" @click='addReminder'>add</button>\n                <button class=\"col-10 top1  btn black\" @click='toggleNotification'>cancel</button>\n                \n              </div>  \n            </div>  \n         </transition>\n     </div> \n  \n    \n    <!-- Display notes with reminder -->\n     <div v-if=\"option==2\"  class=\" top1\">      \n        <div class=\"row  sticky-top mainContainer membrane2  \">\n          <button v-if='isActiveReminder' class=\"btn  d-md-none col-6\" @click='toggleReminders(1)' ><b>| Expired</b> <small v-if=\"activeReminders>0\" class=\"primary notification\"><b> &nbsp;({{activeReminders}})</b></small></button> \n          <button v-if='!isActiveReminder' class=\"btn d-md-none col-6\" @click='toggleReminders(1)'>Expired <small v-if=\"activeReminders>0\" class=\"primary notification\"><b> &nbsp;({{activeReminders}})</b></small> </button> \n  \n          <button v-if='isUpcomingReminder' class=\"btn d-md-none col-6\" @click='toggleReminders(2)'><b>| Upcoming</b> <small v-if=\"upcomingReminders>0\" class=\"primary notification\"><b> &nbsp;({{upcomingReminders}})</b></small></button>          \n          <button v-if='!isUpcomingReminder' class=\"btn d-md-none col-6\" @click='toggleReminders(2)'>Upcoming <small v-if=\"upcomingReminders>0\" class=\"notification\" ><b> &nbsp;({{upcomingReminders}})</b></small></button>\n\n          <button v-if='isActiveReminder' class=\"btn  d-none d-md-block  text-md-left\" style=\"width:120px\" @click='toggleReminders(1)' ><b>| Expired</b> <small v-if=\"activeReminders>0\" class=\"primary notification\"><b>  &nbsp;({{activeReminders}})</b></small></button> \n          <button v-if='!isActiveReminder' class=\"btn d-none d-md-block  text-md-left\" style=\"width:120px\" @click='toggleReminders(1)'>Expired <small v-if=\"activeReminders>0\" class=\"primary notification\"><b> &nbsp;({{activeReminders}})</b></small> </button> \n  \n          <button v-if='isUpcomingReminder' class=\"btn d-none d-md-block  text-md-left\" style=\"width:120px\" @click='toggleReminders(2)'><b>| Upcoming</b> <small v-if=\"upcomingReminders>0\" class=\"primary notification\"><b> &nbsp;({{upcomingReminders}})</b></small> </button>          \n          <button v-if='!isUpcomingReminder' class=\"btn d-none  d-md-block text-md-left\" style=\"width:120px\" @click='toggleReminders(2)'>Upcoming  <small v-if=\"upcomingReminders>0\" class=\"notification\" ><b>&nbsp;({{upcomingReminders}})</b></small></button>          \n        </div>\n  \n        <div v-if=\"notes==''\"  class=\"row   top1\">          \n            <p class=\"col left1 text-center text-md-left primary2\">No notes found</p>\n        </div>\n         \n        <template  v-if=\"!isNoteOptions && !isEdit\">\n          <div class=\"notesContainer\">\n            <div  class=\"row button  black top1\" v-for=\"(n,index) in notes\" :key=\"index\">          \n                <template v-if=\"n.isCompleted==false\">\n                  <!-- <button class=\"button_display_text btn background-primary-light left col black\" @click='toggleNoteOptions(index, n.id)'>{{n.text}}  </button>                \n                  <button v-if=\"n.labelText!=''\" class=\" btn btn-light2 left\" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button v-if=\"n.labelText==''\" class=\" btn btn-light2 left\"  :title=n.labelText></button>\n                  <button  v-if='n.reminderDate!=null' class=\" btn btn-light2 darkcyan\" :title=n.displayDateTime ><i class=\"fas fa-bell\"></i> <small>{{n.displayDateTime}}</small>  </button>\n                  <button  v-if='n.reminderDate==null' class=\" btn btn-light2 darkcyan\" ><i class=\"fas fa-bell invisible\" ></i></button>                                          -->\n\n                  <button class=\"button_display_text btn background-primary-light left col-11 rounded-0\" @click='toggleNoteOptions(index, n.id)' >{{n.text}}  </button>\n                  <button class=\"btn rounded-0 col-1 background-primary-light text-left text-md-right fas fa-ellipsis-v\" @click='toggleNoteOptions(index, n.id)'></button>\n\n                  <div class=\"col-12 \">\n                    <button v-if=\"n.labelText!=''\" class=\"btn  rounded-0 \" :style=\"{color: n.labelColour}\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                    <button  v-if='n.reminderDate!=null' class=\"btn  darkcyan rounded-0\" :title=n.displayDateTime ><i class=\"fas fa-bell\"><small> {{n.displayDateTime}}</small></i></button>\n                  </div>  \n\n                </template>\n          \n                <template v-if=\"n.isCompleted==true\">\n                  <!-- <button class=\"button_display_text btn btn-light2 left col system\">{{n.text}}  </button>                \n                  <button v-if=\"n.labelText!=''\" class=\" btn btn-light2 left system\" :title=n.labelText> <i class=\"fas fa-tag\"> <small> {{n.labelText}}</small></i></button>\n                  <button v-if=\"n.labelText==''\" class=\" btn btn-light2 left\"  :title=n.labelText></button>\n                  <button  v-if='n.reminderDate!=null' class=\" btn btn-light2 system\" :title=n.displayDateTime ><i class=\"fas fa-bell\"></i> <small>{{n.displayDateTime}}</small>  </button>\n                  <button  v-if='n.reminderDate==null' class=\" btn btn-light2 system\" ><i class=\"fas fa-bell invisible\" ></i></button>                                                       \n                  <button class=\"btn btn-light2 left col-1 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>                  \n                  <button class=\"btn btn-light2 col-1  black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button> -->\n\n                  <button class=\"button_display_text btn background-primary-light left col system rounded-0\">{{n.text}}  </button>             \n                  <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 green\" @click='markIncomplete(n.id)'><i class=\"fas fa-undo\"></i></button>\n                  <button class=\"btn background-primary-light col-2 col-md-1 rounded-0 black\" @click='deleteNote(n.id,complete=true)' ><i class=\"fa fa-trash\"></i></button>            \n                </template>\n            </div>\n    \n           \n          </div>           \n        </template>  \n         \n           \n        <span v-if=\"isNoteOptions\">\n        <!-- <div class=\"row  shadow  button  black top1\">\n          <button class=\"button_display_text btn background-primary-light left col black\" @click='toggleNoteOptions(noteIndex,noteId)'> {{notes[noteIndex].text}}</button>\n          <button class=\"btn green background-green rounded-0 col-12 col-md-1  my-1 my-md-0\" @click='markCompleted(noteId)' ><i class=\"fas fa-check-double\"></i></button>\n          <button class=\"btn primary background-light rounded-0 col-12 col-md-1 my-1 my-md-0 black\" @click='toggleEdit' ><i class=\"far fa-edit\"></i></button>            \n          <button class=\"btn rounded-0 col-12 col-md-1  my-1 my-md-0\" @click='deleteNote(noteId)' ><i class=\"fa fa-trash\"></i></button>            \n        </div>   -->\n          <div class=\"row  shadow  button  black top1\">\n              <!-- <button class=\"btn background-primary-light left col-12 black noteTextButton\" @click='toggleNoteOptions(noteIndex,noteId)'> {{notes[noteIndex].text}}</button> -->\n              <button class=\"btn col-12 text-right fas fa-ellipsis-v\" @click='toggleNoteOptions(noteIndex,noteId)'></button>\n\n              <button class=\"btn green background-green rounded-0 col-12   top1\" @click='markCompleted(noteId)' ><i class=\"fas fa-check-double\"></i></button>\n              <button class=\"btn primary background-light rounded-0 col-12  black\" @click='toggleEdit' ><i class=\"far fa-edit\"></i></button>            \n              <button class=\"btn rounded-0 col-12\" @click='deleteNote(noteId)' ><i class=\"fa fa-trash\"></i></button>                                        \n          </div> \n        </span> \n  \n        <span v-if=\"isEdit\">\n          <div class=\"row  button  black top1\">\n            <input  class=\"col-12 col-md-10 black\" id=\"input_edit\" type=\"text\"  maxlength=\"70\" :value='notes[noteIndex].text'>             \n  \n              <button v-if=\"!enabledLabel\" class=\"col-12 col-md btn \" @click=\"toggleLabel\" ><i class=\"fas fa-tag\"></i></button>            \n              <button v-if=\"!enabledNotification\" class=\"col-12 col-md btn \" @click=\"toggleNotification\" ><i class=\"fas fa-bell\"></i></button>\n          </div>  \n  \n          <div class=\"row top1\">    \n            \n            <button v-if=\"labelText!=''\" class=\"btn btn-light fas fa-tag\" :style=\"{color: labelColour}\" @click='deleteLabel()'><small> {{labelText}} -</small></button>\n            <button v-if='reminderDate!=null' class=\"btn darkcyan left left1\" @click='deleteReminder()' ><i class=\"fas fa-bell\" :title=displayDateTime><small> {{displayDateTime}} <i class=\"fas fa-trash-alt\"></i> </small> </i> </button>\n            \n          </div>  \n                      \n          <div class=\"row\">\n            <button class=\"btn btn-primary2  top1 col-md-2\" @click='saveEdit' >ok</button>            \n            <button class=\"btn btn primary top1 col-md-2  m-md-1\" @click='toggleEdit'>cancel</button>            \n          </div>\n        </span> \n  \n        <transition>\n  \n          <div v-if='enabledLabel' class=\"modalContainer centre\">\n            <div  class=\"col-12 modal1 \">\n  \n              <h2 class=\"col-12 black\"><i class=\"fas fa-tag\"></i> </h2>  \n              \n              <div class=\"col-12 top1 black\"><small><b>Add label</b></small></div>\n              <input class=\"col-10 top1\" type=\"text\" id=\"input_label\"\n              :style=\"{ color: this.colour}\"\n              >   \n              <v-swatches class=\"top1\"\n              v-model=\"colour\"                              \n              shapes=\"circles\"\n                >\n              </v-swatches>\n              <button class=\"col-10 top1 btn btn-light\" @click='addLabel'>ok</button>\n              <button class=\"col-10 top1  btn black \" @click='toggleLabel'>cancel</button>\n              <!-- <button class=\"btn col\">cancel</button> -->             \n            </div>\n          </div>\n        </transition>\n  \n        \n  \n        \n         <transition>\n            <div v-if='enabledNotification' class=\"modalContainer\">\n              <div  class=\"col-12 centre modal1\">\n                <h2 class=\"col-12 black\"><i class=\"fas fa-bell\"></i> </h2> \n                <div class=\"col-12 black\"><small><b>Add Reminder</b></small></div>\n  \n                \n                  <div class=\"col\">\n                    <date-picker\n                      v-model=\"reminderDate\"\n                      type=\"date\"\n                      format='DD-MM-YYYY'\n                      placeholder=\"Reminder date\"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      >\n                        \n                    </date-picker>\n  \n                    \n                  </div>\n  \n                  \n                  <div  class=\"col top2\">\n                    <date-picker \n                      v-model=\"reminderTime\"\n                      type=\"time\"\n                      format='HH:mm'\n                      placeholder=\"Reminder time \"\n                      :editable=false\n                      confirm=true\n                      confirm-text='ok'\n                      :clearable=true\n    \n                      :time-picker-options=\"{\n                        start: '00:00',\n                        step: '00:30',\n                        end: '23:30',\n                      }\"\n                      >\n                        \n                    </date-picker>\n                  </div>     \n                  <div class=\"col-12 top1  red\" v-if=\"timeNull\"><small>Please select reminder time</small></div>\n\n                <button class=\"col-10 top1 btn btn-light primary\" @click='addReminder'>add</button>\n                <button class=\"col-10 top1  btn black\" @click='toggleNotification'>cancel</button>\n                \n              </div>  \n            </div>  \n         </transition>\n        \n     </div>  \n  \n     \n  <div v-if=\"notes.length>1\" class=\"row  top1\">\n      <small class=\"col lightgrey\">scroll to see all notes</small>  \n  </div>\n        \n    <!-- <button class=\"btn btn-danger\" @click='deleteDB'>Delete all notes</button>   -->\n  \n    <!-- <button class=\"btn\" @click='loadData'>read</button>   -->\n  \n  \n  \n  \n    \n  \n  \n    </div>\n  </div>\n</template>\n\n<script>\nimport VSwatches from 'vue-swatches'\nimport 'vue-swatches/dist/vue-swatches.css'\n\nimport DatePicker from 'vue2-datepicker';\nimport 'vue2-datepicker/index.css';\n  \nimport draggable from 'vuedraggable'\n  \n\nexport default {\n  name: 'Main',\n  props: {\n    title: String,\n  },\n  components: { VSwatches,DatePicker,draggable },\n\n    mounted(){\n      this.loadData();\n      this.loadNotifications();\n    },\n\n  data(){\n    return{\n      option:1,\n      notes:[],  \n      notesNoLabel:[],    \n      enableAdd:false,\n      enabledLabel:false,\n      enabledNotification:false,\n      colour:'#000000',\n      labelText:'',\n      labelColour:'',            \n      labels:[],\n      selectedLabel:'All notes',\n      isNoteOptions:false,\n      noteIndex:'',\n      noteId:'',\n      selectedNote:[],\n      reminderDate: null,      \n      reminderTime: null, \n      displayDateTime:'',             \n      dateNull:false,\n      timeNull:false,\n      isEdit:false ,\n\n      isTagSearch:false,\n      isActiveReminder:false,\n      isUpcomingReminder:false,\n      activeReminders:0,\n      upcomingReminders:0,\n      notifications:0,\n      isDraggable:false,\n      \n\n    }\n  },\n\n  methods:{\n    setOption(n){\n        this.option=n;       \n        this.isNoteOptions=false;\n        //show all notes\n        if(n==1){\n          this.loadData();\n          this.isActiveReminder=false;\n          this.isUpcomingReminder=false;\n        }\n        //show notes with reminders\n        if(n==2){\n          \n          this.loadActiveReminders();\n          \n          this.isActiveReminder=true;\n          this.isTagSearch=false;\n        }\n    },\n\n    addNew(){\n      \n      this.enableAdd=true;\n      this.isTagSearch=false;\n      this.isNoteOptions=false;\n      setTimeout(() => {\n        this.$refs.newNoteInput.focus();  \n      }, 200);      \n    },\n\n\n    closeAdd(){\n      this.enableAdd=false;\n      this.labels=[];\n      this.reminderDate= null;        \n      this.reminderTime= null; \n      this.timeNull=false;\n      this.dateNull=false;   \n      this.displayDateTime='';\n\n    },\n\n    toggleLabel(){      \n      this.enabledLabel=!this.enabledLabel;      \n      if(this.enabledLabel){\n        setTimeout(() => {\n        document.getElementById('input_label').focus();  \n        }, 100);\n      }\n      else{\n        setTimeout(() => {\n          if(this.enableAdd){\n            this.$refs.newNoteInput.focus();  \n          }\n          else{\n            document.getElementById('input_edit').focus();\n          }\n        \n        }, 100);\n      }\n    },\n\n    toggleNotification(){      \n      this.enabledNotification=!this.enabledNotification;\n\n      //cancel is clicked\n      if(!this.enabledNotification && this.displayDateTime==''){      \n                \n          this.reminderDate= null;        \n          this.reminderTime= null; \n          this.timeNull=false;\n          this.dateNull=false;   \n      }\n      \n\n    },\n\n    addLabel(){\n      this.labelText=document.getElementById('input_label').value.trim();\n      this.labelColour=this.colour;\n      // let newLabel={labelText:labelText,colour:labelColour};\n\n      // if(labelText.trim()!=''){\n      //     this.labels.push(newLabel);\n      //     this.toggleLabel();\n      //     }\n\n      if(this.labelText!=''){\n          // this.labels.splice(0,1,newLabel);\n          this.toggleLabel();\n          }\n\n      \n      \n    },\n\n    addReminder(){\n      // this.toggleNotification();      \n      if(this.reminderDate!=null && this.reminderTime!=null){\n        this.dateNull=false;\n        this.timeNull=false;\n        this.enabledNotification=!this.enabledNotification;\n\n        //reformat date\n        let fDate=this.reminderDate.toDateString();\n        fDate=fDate.split(' ');\n        fDate=fDate[2]+' '+fDate[1]+' '+fDate[3];\n        let displayDate=fDate;\n\n        //reformat time        \n        let fTime=this.reminderTime.toString();\n        fTime=fTime.split(' ');\n        fTime=fTime[4];\n        fTime=fTime.split(':');\n        fTime=fTime[0]+':'+fTime[1];\n        let displayTime=fTime;\n        this.displayDateTime=displayDate + ' '+displayTime        \n      }\n\n      if(this.reminderDate==null){\n        this.dateNull=true;\n      }\n\n      if(this.reminderTime==null){\n        this.timeNull=true;\n      }    \n    },\n\n    saveNew(){\n      let newNoteText=this.$refs.newNoteInput.value;\n      console.log(this.labels);\n\n      let newNote;\n      newNote={text:newNoteText,\n              reminderDate:this.reminderDate,\n              reminderTime:this.reminderTime,\n              displayDateTime:this.displayDateTime,\n              labelText:this.labelText,\n              labelColour:this.labelColour,\n              isCompleted:false\n              };\n    \n      let self = this;\n      \n      //indexedDB\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;      \n      console.log(indexedDB);      \n      const request= indexedDB.open('todoDatabase',1);\n      \n      //onerror\n      request.onerror=function(event){\n        console.log(event);\n      }\n\n      //onupgradeneeded\n      request.onupgradeneeded=function(event){\n        let db = event.target.result;\n        let objectStore=db.createObjectStore('notes', { keyPath: \"id\", autoIncrement: true });        \n        objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n        objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n        objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n        objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});           \n        console.log(\"Object store Created Successfully...\");\n      }\n\n      //onsuccess\n      request.onsuccess = function (event){       \n       var db = event.target.result;\n       console.log(db);\n       var transaction = db.transaction(\"notes\", \"readwrite\");\n       var objectStore = transaction.objectStore(\"notes\");     \n       \n       if(newNoteText.trim()!=''){\n       objectStore.add({ note: newNote});\n        db.close();\n        self.enableAdd=false;\n        self.labelText='',\n        self.labelColour=''\n        \n        self.reminderDate=null;\n        self.reminderTime=null;\n        self.displayDateTime='';\n\n      }\n       transaction.oncomplete = function () {   \n       self.labels=[];\n       self.selectedLabel='All notes';             \n       self.loadData();\n       self.loadNotifications();\n        };\n     }\n\n    },\n\n    toggleNoteOptions(n,id){      \n      \n      this.selectedNote=[];\n      //get selected note's id\n      this.noteId=id;\n\n\n      //set get selected note\n      for(let n of this.notes){\n\n        console.log(n.id);\n        if(n.id==id){\n          this.selectedNote.push(n);\n        }\n      }\n\n      console.log(this.notes);\n      console.log(this.selectedNote);\n      this.noteIndex=n;      \n      this.isNoteOptions=!this.isNoteOptions;\n    },\n\n    deleteNote(id,complete){      \n    //  this.notes.splice(n,1);\n    //  this.isNoteOptions=!this.isNoteOptions;\n\n\n    //delete note from db\n\n    let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n      \n        request.onerror = function(){\n            console.log(\"request error deleteNote\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});\n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});                \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction('notes','readwrite');\n          const objectStore = transaction.objectStore(\"notes\");\n\n          const deleteNote = objectStore.delete(id);\n          deleteNote.onsuccess = function(){\n          console.log('note id: '+id+ ' deleted');\n          \n         }  \n            \n          transaction.oncomplete = function () {     \n\n            if(self.option==1){\n              if(self.isTagSearch){                  \n                self.selectedLabel='All notes';          \n                self.loadTags();  \n              }\n              else{\n                self.loadData();  \n\n                self.labels=[];\n                  self.reminder=[];\n                  self.reminderDate=null;\n                  self.reminderTime=null;\n                  self.displayDateTime='';\n\n              }   \n            }\n            else if(self.option==2){\n\n              if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n\n            }\n\n            \n            \n            if(complete==true){\n              this.isNoteOptions=false;\n              \n            }\n            else{\n              self.isNoteOptions=!self.isNoteOptions;              \n            }\n            db.close();\n            self.loadNotifications();\n          };\n          \n        }\n\n    },\n\n    toggleEdit(){               \n      this.isEdit=!this.isEdit;\n      this.isNoteOptions=!this.isNoteOptions;\n       \n      setTimeout(() => {\n        if(this.isEdit){\n\n        document.getElementById('input_edit').focus();\n        \n        this.labelText= this.notes[this.noteIndex].labelText;\n        \n        this.labelColour= this.notes[this.noteIndex].labelColour;\n      \n        \n        this.reminderDate=null;\n        this.reminderTime=null;\n\n        this.reminderDate=this.notes[this.noteIndex].reminderDate;\n        this.reminderTime=this.notes[this.noteIndex].reminderTime;\n        this.displayDateTime=this.notes[this.noteIndex].displayDateTime;\n        \n      }\n      }, 100);\n      \n\n    },\n\n    saveEdit(){\n      if(document.getElementById('input_edit').value.trim()!=''){\n\n        //updated field values\n          let text= document.getElementById('input_edit').value.trim();\n          let labelText=this.labelText;\n          let labelColour=this.labelColour;\n          let reminderDate=this.reminderDate;\n          let reminderTime=this.reminderTime;\n          let displayDateTime = this.displayDateTime;\n          \n\n        //save changes to indexedDB\n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n                        \n        request.onerror = function(){\n            console.log(\"request error - saveEdit\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});   \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n\n        \n\n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\",\"readwrite\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n          //get record to modify\n          const recordRequest = objectStore.get(self.noteId);\n\n          \n\n          recordRequest.onsuccess=function(){\n\n            \n            let record = recordRequest.result;\n            console.log(record);    \n                    \n            record.note.text = text;\n            record.note.reminderDate=reminderDate;\n            record.note.reminderTime=reminderTime;\n            record.note.displayDateTime=displayDateTime;            \n            record.note.labelText=labelText;\n            record.note.labelColour=labelColour;\n            record.note.isCompleted=false;\n\n\n            //save new values to indexedDB\n            const updateRequest=objectStore.put(record);\n\n            updateRequest.onsuccess=function(){\n              console.log('record updated');\n            }\n            \n          }\n          transaction.oncomplete = function () {\n            self.labelText='';\n            self.labelColour='';            \n            self.reminderDate=null;\n            self.reminderTime=null;\n            self.displayDateTime='';\n\n            //show all notes (filtered by tag or not)\n            if(self.option==1){\n              if(self.isTagSearch){    \n                if(self.selectedLabel!='All notes'){\n                  self.selectedLabel=labelText;         \n                }  \n                            \n                 self.loadTags();  \n              }\n              else{\n                self.loadData();  \n              }\n            }\n            //show notes with reminders\n            else if (self.option==2){\n               if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n               \n            }\n            self.loadNotifications();                                                      \n            db.close();\n          };\n\n\n          };\n\n      }\n      \n      \n      this.isEdit=!this.isEdit;\n      \n     \n    },\n\n    deleteLabel(){            \n      this.labelText='';\n      this.labelColour='';\n    },\n\n    deleteReminder(){    \n            \n      this.reminderDate=null;\n      this.reminderTime=null;\n      this.displayDateTime='';\n      if(this.notes!=''){\n        this.notes[this.noteIndex].reminder.reminderDate=null;\n        this.notes[this.noteIndex].reminder.reminderTime=null;\n      }\n      \n    },\n\n     toggleTimePanel() {\n      this.showTimePanel = !this.showTimePanel;\n    },\n\n    loadData(){\n      \n        \n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n        \n        let foundNotes=[];\n        \n        request.onerror = function(){\n            console.log(\"database test creation error\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n            // read through table\n            objectStore.openCursor().onsuccess = event => { \n              var cursor = event.target.result; \n              if (cursor) { \n                console.log('is cursor')\n                  \n                  let record;\n                  \n                     record={id:cursor.value.id,\n                             text:cursor.value.note.text,\n                             labelText:cursor.value.note.labelText,\n                             labelColour:cursor.value.note.labelColour,\n                             reminderDate:cursor.value.note.reminderDate,\n                             reminderTime:cursor.value.note.reminderTime,\n                             displayDateTime:cursor.value.note.displayDateTime,\n                             isCompleted:cursor.value.note.isCompleted\n                             }\n                             \n                  \n                  \n                  console.log(record);\n                  foundNotes.push(record);              \n                  console.log(cursor.value);\n\n                  console.log(\"id: \"+ cursor.value.id);\n                  console.log(\"text: \"+ cursor.value.note.text);\n                  \n                  cursor.continue(); \n              } else { \n                  console.log('end of table');\n              } \n            };\n\n          \n            \n          transaction.oncomplete = function () {\n            console.log(foundNotes);\n            self.notes=[];\n            for(let n of foundNotes){\n              self.notes.push(n);          \n            }\n                                    \n             console.log(self.notes)\n             \n            db.close();\n          };\n\n          \n        }\n\n    \n\n    },\n\n    deleteDB(){\n\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n      \n      indexedDB.deleteDatabase(\"todoDatabase\");      \n      \n    },\n\n    resort(){\n\n      let self =this;\n      \n      this.deleteDB(); \n  \n      const request = indexedDB.open(\"todoDatabase\",1);\n\n      request.onupgradeneeded=function(event){\n        let db = event.target.result;\n        let objectStore=db.createObjectStore('notes', { keyPath: \"id\", autoIncrement: true });        \n        objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n        objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n        objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n        objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n        \n        console.log(\"Object store Created Successfully...\");\n      }\n\n       request.onsuccess = function (event){       \n       var db = event.target.result;\n       let transaction = db.transaction(\"notes\",\"readwrite\");\n       const objectStore = transaction.objectStore(\"notes\");\n        console.log(objectStore);\n\n      \n\n      self.notes.forEach(function (n) {     \n      let newNote={ \n                   text:n.text,\n                   labelText:n.labelText,\n                   labelColour:n.labelColour,\n                   reminderDate:n.reminderDate,\n                   reminderTime:n.reminderTime,\n                   displayDateTime:n.displayDateTime,\n                   isCompleted:n.isCompleted\n                   \n                   }\n      objectStore.add({ note: newNote});\n      \n      console.log(n.text+'-'+ n.id)          \n          // objectStore.put({id: n, name: \"deevana\",branch: \"CSE\"});\n      })\n \n      transaction.oncomplete = function () {        \n        console.log('resorting updated');\n        \n        self.loadData();\n        db.close();\n\n      };\n\n    \n          \n    }\n\n    },\n\n    toggleTagSearch(){\n      this.isTagSearch=!this.isTagSearch;\n      this.enableAdd=false;\n      this.isNoteOptions=false;\n      if(this.isTagSearch){\n        this.loadTags();\n        \n      }\n      else{\n        this.unloadTags();\n      }\n      \n    }, \n\n    loadLabels(){\n      //populate labels[] with labelText values\n\n      this.labels=[];\n      this.labels.push('All notes');\n\n\n\n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n              \n      request.onerror = function(){\n            console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let labelIndex = objectStore.index(\"labelIndex\");\n          \n\n          \n\n          let request  = labelIndex.getAll();\n          \n          \n                    \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            \n            for(let r of results){\n                            \n               let exists=false;\n                self.labels.forEach(l => {\n                 if(r.note.labelText==l){\n                  exists=true;\n                 } \n                });\n\n                if(exists==false){\n                  \n                  self.labels.push(r.note.labelText);\n                }   \n\n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }           \n    },\n\n    \n    loadTags(){\n        \n        this.enableAdd=false;\n        this.notes=[];\n        this.loadLabels();\n\n      \n        \n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n        \n        \n        \n        request.onerror = function(){\n            console.log(\"database test creation error\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n            console.log(\"Object store Created Successfully...\");\n        };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let labelIndex = objectStore.index(\"labelIndex\");\n          \n\n          let request='';\n          if(self.selectedLabel=='All notes'){\n            request = labelIndex.getAll();\n\n          }\n          else{\n            request = labelIndex.getAll(self.selectedLabel);\n           \n          }\n                    \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            for(let r of results){\n              let resultNote={id:r.id,\n                              text:r.note.text,\n                              labelText:r.note.labelText,\n                              labelColour:r.note.labelColour,\n                              reminderDate:r.note.reminderDate,\n                              reminderTime:r.note.reminderTime,\n                              displayDateTime:r.note.displayDateTime,\n                              isCompleted:r.note.isCompleted\n                              }\n\n              \n              \n\n                                         \n                //push note into notes[]\n                self.notes.push(resultNote);\n                console.log(self.notes);\n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      console.log('TAGS');\n    },\n\n    unloadTags(){\n      this.loadData();\n      this.labels=[];\n      this.selectedLabel='All notes';\n    },\n\n    //counts how many reminders expired\n    loadNotifications(){\n      this.notifications=0;\n      \n      \n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n        \n      request.onerror = function(){\n          console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n          var db = event.target.result;\n          var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n          objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n          objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n          objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n\n          console.log(\"Object store Created Successfully...\");\n      };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let dateIndex = objectStore.index(\"dateIndex\");\n          let request='';\n          request = dateIndex.getAll();\n                      \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            \n            \n            let now = new Date();\n            now = now.getTime();\n            \n            \n            \n            for(let r of results){\n\n             //reconstruct date and time to compare it with current date and time   \n             let dateToString=r.note.reminderDate.toString();\n             let actualDate1=dateToString.split(' ');                \n             actualDate1=actualDate1[0]+' '+actualDate1[1]+' '+actualDate1[2]+' '+actualDate1[3];\n\n             let timeToString=r.note.reminderTime.toString();\n             let actualTime1=timeToString.split(' ');                \n             actualTime1=actualTime1[4]+' '+actualTime1[5]+' '+actualTime1[6];\n             \n             let actualDateTime=actualDate1+' '+actualTime1;\n             console.log(actualDateTime);\n\n             //reconvert to Date format\n             actualDateTime=new Date(actualDateTime);\n                                                        \n             //compare with current Date and Time\n             //if reminder has not expired, push note into notes[]\n             if(actualDateTime.getTime()<now){\n              self.notifications++;\n             }\n             \n                                            \n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      \n    },\n\n    loadActiveReminders(){\n      this.activeReminders=0;  \n      this.upcomingReminders=0;\n      this.notes=[];\n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n        \n      request.onerror = function(){\n          console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n          var db = event.target.result;\n          var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n          objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n          objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n          objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n\n          console.log(\"Object store Created Successfully...\");\n      };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let dateIndex = objectStore.index(\"dateIndex\");\n          let request='';\n          request = dateIndex.getAll();\n                      \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            \n            \n            let now = new Date();\n            now = now.getTime();\n            \n            \n            \n            for(let r of results){\n\n             //reconstruct date and time to compare it with current date and time   \n             let dateToString=r.note.reminderDate.toString();\n             let actualDate1=dateToString.split(' ');                \n             actualDate1=actualDate1[0]+' '+actualDate1[1]+' '+actualDate1[2]+' '+actualDate1[3];\n\n             let timeToString=r.note.reminderTime.toString();\n             let actualTime1=timeToString.split(' ');                \n             actualTime1=actualTime1[4]+' '+actualTime1[5]+' '+actualTime1[6];\n             \n             let actualDateTime=actualDate1+' '+actualTime1;\n             console.log(actualDateTime);\n\n             //reconvert to Date format\n             actualDateTime=new Date(actualDateTime);\n\n             \n\n              let resultNote={id:r.id,\n                              text:r.note.text,\n                              labelText:r.note.labelText,\n                              labelColour:r.note.labelColour,\n                              reminderDate:r.note.reminderDate,\n                              reminderTime:r.note.reminderTime,\n                              displayDateTime:r.note.displayDateTime,\n                              isCompleted:r.note.isCompleted\n                              }\n                            \n                \n             //compare with current Date and Time\n             //if reminder has not expired, push note into notes[]\n             if(actualDateTime.getTime()<now){\n              self.notes.push(resultNote);\n              self.activeReminders++;\n              console.log(self.notes);\n             }\n             else{\n              self.upcomingReminders++;\n             }\n                                            \n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      \n    },\n\n\n\n    loadUpcomingReminders(){\n\n      this.notes=[];\n      this.upcomingReminders=0;\n      this.activeReminders=0;  \n      \n      let self=this;\n      const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n      const request = indexedDB.open(\"todoDatabase\", 1);\n        \n      request.onerror = function(){\n          console.log(\"database test creation error\");\n      }\n\n      request.onupgradeneeded = function(event) {\n          var db = event.target.result;\n          var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n          objectStore.createIndex('labelIndex','note.labelText',{unique:false});  \n          objectStore.createIndex('noteIndex',['note.text'],{unique:false});  \n          objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n          objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});  \n\n          console.log(\"Object store Created Successfully...\");\n      };\n\n\n        request.onsuccess = function (event){   \n          \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\");          \n          const objectStore = transaction.objectStore(\"notes\");\n          let dateIndex = objectStore.index(\"dateIndex\");\n          let request='';\n          request = dateIndex.getAll();\n                      \n          request.onsuccess = function(){\n            console.log('success');\n            console.log(request.result);\n            let results= request.result;\n            console.log(results);\n            \n            \n            let now = new Date();\n            now = now.getTime();\n            \n            \n            \n            for(let r of results){\n\n             //reconstruct date and time to compare it with current date and time   \n             let dateToString=r.note.reminderDate.toString();\n             let actualDate1=dateToString.split(' ');                \n             actualDate1=actualDate1[0]+' '+actualDate1[1]+' '+actualDate1[2]+' '+actualDate1[3];\n\n             let timeToString=r.note.reminderTime.toString();\n             let actualTime1=timeToString.split(' ');                \n             actualTime1=actualTime1[4]+' '+actualTime1[5]+' '+actualTime1[6];\n             \n             let actualDateTime=actualDate1+' '+actualTime1;\n             console.log(actualDateTime);\n\n             //reconvert to Date format\n             actualDateTime=new Date(actualDateTime);\n\n             \n\n              let resultNote={id:r.id,\n                              text:r.note.text,\n                              labelText:r.note.labelText,\n                              labelColour:r.note.labelColour,\n                              reminderDate:r.note.reminderDate,\n                              reminderTime:r.note.reminderTime,\n                              displayDateTime:r.note.displayDateTime,\n                              isCompleted:r.note.isCompleted\n                              }\n                            \n                \n             //compare with current Date and Time\n             //if reminder has expired, push note into notes[]\n             if(actualDateTime.getTime()>now){\n              self.notes.push(resultNote);\n              self.upcomingReminders++;\n              console.log(self.notes);\n             }\n             else{\n              self.activeReminders++;\n             }\n                                            \n            }            \n            \n         };\n\n          transaction.oncomplete = function () {                                  \n            db.close();\n          };\n        }\n      //\n    },\n\n    toggleReminders(n){\n      \n      if(n==1){\n        this.isActiveReminder=true;\n        this.isUpcomingReminder=false;\n        this.loadActiveReminders();\n      }\n      else{\n        this.isActiveReminder=false;\n        this.isUpcomingReminder=true;\n        this.loadUpcomingReminders();\n      }\n\n      \n\n    },\n\n    //marks note as completed\n    markCompleted(noteId){\n      //\n      \n\n        let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n                        \n        request.onerror = function(){\n            console.log(\"request error - markCompleted\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});   \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n      \n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\",\"readwrite\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n          //get record to modify\n          const recordRequest = objectStore.get(noteId);\n\n          recordRequest.onsuccess=function(){\n\n            let record = recordRequest.result;\n            console.log(record);    \n                    \n            // record.note.text = text;\n            // record.note.reminderDate=reminderDate;\n            // record.note.reminderTime=reminderTime;\n            // record.note.displayDateTime=displayDateTime;            \n            // record.note.labelText=labelText;\n            // record.note.labelColour=labelColour;\n            record.note.isCompleted=true;\n\n\n            //save new values to indexedDB\n            const updateRequest=objectStore.put(record);\n\n            updateRequest.onsuccess=function(){\n              console.log('record updated');\n            }\n            \n          }\n          transaction.oncomplete = function () {\n          \n            //show all notes (filtered by tag or not)\n            if(self.option==1){\n              if(self.isTagSearch){    \n                if(self.selectedLabel!='All notes'){\n                  self.selectedLabel=self.selectedNote[0].labelText;                           \n                }  \n                            \n                 self.loadTags();  \n              }\n              else{\n                self.loadData();  \n              }\n            }\n            //show notes with reminders\n            else if (self.option==2){\n               if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n               \n            }\n          \n                                                                  \n            db.close();\n            self.isNoteOptions=false;\n          };\n\n\n          };\n\n\n\n\n    },\n\n    markIncomplete(noteId){\n      //\n       let self=this;\n        const indexedDB = window.indexedDB || window.mozIndexedDB ||window.webkitIndexedDB ||window.msIndexedDB ||window.shimIndexedDB;\n        \n        const request = indexedDB.open(\"todoDatabase\", 1);\n                        \n        request.onerror = function(){\n            console.log(\"request error - markCompleted\");\n        }\n\n        request.onupgradeneeded = function(event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(\"notes\",{keyPath :\"id\",  autoIncrement:true});\n            objectStore.createIndex('labelIndex',['note.labelText'],{unique:false});  \n            objectStore.createIndex('noteIndex',['note.text'],{unique:false}); \n            objectStore.createIndex('dateIndex',['note.reminderDate'],{unique:false});  \n            objectStore.createIndex('timeIndex',['note.reminderTime'],{unique:false});   \n            \n            console.log(\"Object store Created Successfully...\");\n        };\n      \n        request.onsuccess = function (event){       \n          var db = event.target.result;\n          let transaction = db.transaction(\"notes\",\"readwrite\");\n          const objectStore = transaction.objectStore(\"notes\");\n\n          //get record to modify\n          const recordRequest = objectStore.get(noteId);\n\n          recordRequest.onsuccess=function(){\n\n            let record = recordRequest.result;\n            console.log(record);    \n                    \n            record.note.isCompleted=false;\n\n\n            //save new values to indexedDB\n            const updateRequest=objectStore.put(record);\n\n            updateRequest.onsuccess=function(){\n              console.log('record updated');\n            }\n            \n          }\n          transaction.oncomplete = function () {\n            \n\n            //show all notes (filtered by tag or not)\n            if(self.option==1){\n              if(self.isTagSearch){    \n                console.log(self.selectedLabel);      \n                if(self.selectedLabel!='All notes'){\n                  // self.selectedLabel=self.labelText; \n                  // console.log(self.selectedLabel);                     \n                }  \n                            \n                 self.loadTags();  \n              }\n              else{\n                self.loadData();  \n              }\n            }\n            //show notes with reminders\n            else if (self.option==2){\n               if(self.isActiveReminder){\n                self.loadActiveReminders();\n               }\n               else{\n                self.loadUpcomingReminders();\n               }\n               \n            }\n                                                                  \n            db.close();\n            self.isNoteOptions=false;\n          };\n\n\n          };\n    },\n\n    toggleDraggable(){\n      this.isDraggable=!this.isDraggable;\n    }\n\n\n  }\n\n}\n</script>\n\n\n"]}]}